<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<html manifest="./manifest.php">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 8, revision: 1, date: new Date("June 23, 2013"), extensions: {}};

//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2012

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.


----------------------------------------------------

This is a modified version by Henrique Matheus da Silva Lima in order to:
* Translate part of the interface to other languages
* To make this TiddlyDict dictionar responsive for smaller screens like smartphone's

" />
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />
<link rel="shortcut icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Flag_of_Ido_%28new%29.svg/1200px-Flag_of_Ido_%28new%29.svg.png" type="image/x-icon">
<!--}}}-->

<!--PRE-HEAD-END-->
<title>vortareto.tk</title>
<style id="styleArea" type="text/css">
.twtable {font-size: 1.5em;}
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:50%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}

#nomesearch {font-size:1.0em;}
#formulariopesquisa {width:auto;font-size:1.4em;}
#botaook {width:auto;font-size:1.0em;}
	
@media screen and (max-width: 800px)
{
	#nomesearch {font-size:1.0em;}
	#formulariopesquisa {width:auto;font-size:1.0em;}
	#botaook {width:auto;font-size:1.0em;}
}
	
@media screen and (max-width: 600px)
{
	#nomesearch {display: block; font-size:0.7em;}
	#formulariopesquisa {display: block; width:90%;font-size:1.3em; margin: auto;}
	#botaook {display: block; width:auto; font-size:1.0em; margin: 10px auto auto auto;}
}

</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>

</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;
</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;
</pre>
</div>
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]
</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' role='banner' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' role='navigation' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' role='navigation' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' role='complementary' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea' role='main'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/
</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' role='navigation' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;
</pre>
</div>

</div>
<!--POST-SHADOWAREA-->
<div id="storeArea">
<div title="BackstageSidebarPlugin" creator="YourName" modifier="YourName" created="201306061158" tags="systemConfig" changecount="1">
<pre>/***
|''Name:''|BackstageSidebarPlugin|
|''Description:''|Moves the sidebar to the backstage, as suggested at http://www.tiddlywiki.org/wiki/Dev:Backstage#Customization|
|''Author''|JonathanLister|
|''CodeRepository:''|n/a |
|''Version:''|0.1|
|''Comments:''|Please make comments at http://groups.google.co.uk/group/TiddlyWikiDev |
|''License''|[[BSD License|http://www.opensource.org/licenses/bsd-license.php]] |
|''~CoreVersion:''|2.4|

***/

//{{{
if(!version.extensions.BackstageSidebarPlugin) {
version.extensions.BackstageSidebarPlugin = {installed:true};

config.tasks.sidebar = {
	text: &quot;sidebar&quot;,
	tooltip: &quot;sidebar options&quot;,
	content: &quot;&lt;&lt;tiddler SideBarOptions&gt;&gt;&lt;&lt;tiddler SideBarTabs&gt;&gt;&quot;
};
config.backstageTasks.push(&quot;sidebar&quot;);

config.macros.BackstageSidebarPlugin = {
	tiddler:tiddler
};

config.macros.BackstageSidebarPlugin.init = function() {
	var tiddler = this.tiddler;
	setStylesheet(store.getTiddlerText(tiddler.title+'##Stylesheet'),'BackstageSidebarPlugin');
};

} //# end of 'install only once'
//}}}

/***
!Stylesheet

#sidebar {
	display:none;
}

!(end of Stylesheet)
***/</pre>
</div>
<div title="DefaultTiddlers" creator="YourName" modifier="YourName" created="201306061157" changecount="1">
<pre>[[sercho]]</pre>
</div>
<div title="Ido-Esperanto" creator="YourName" modifier="YourName" created="201401011609" modified="201502020537" tags="dic" changecount="3">
<pre>{{{
a (= ad) -- al
-ab- -- (Sufikso je verbo; ekz.: amabis = estis aminta, amabos = estos aminta)
abado -- abato
abandonar (tr) -- forlasi
abasar (tr) -- malaltigi; (fig.) malnobligi
abatar (tr) -- faligi per bato
abdomino -- abdomeno
abelo
abismo
ablaktar (tr) -- demamigi
abolisar (tr) -- abolicii, aboli
abominar (tr) -- abomeni
abonar
abordar (tr) -- enŝipiĝi, entrajniĝi
abortar
aboyar (netr) -- boji
abreviar (tr) -- mallongigi
abrikoto
abrupta
absenta -- forestanta
absoluta
absorbar (tr) -- sorbi
abstenar (tr) -- abstini
abstrakta
absurda
abundar (netr) -- esti abunda, abundi
acelerar (tr) -- akceli
acendar (tr) -- fajrigi
acensar (tr/netr) -- supreniri, *ascendi
acento -- akcento
aceptar (tr) -- akcepti
acerba -- acida~, acerba~
acesar (tr) -- havi aliron al
acesora -- akcesora
-ach- -- -aĉ-
acida
acidentar (tr) -- kaŭzi akcidenton al
acidento -- akcidento
ad (= a) -- al
adavane -- antaŭen
aden -- en (+ akuzativo)
adjuntar (tr) -- aldoni
admaxime -- maksimume
adminime -- minimume
advokar (tr) -- alvoki
-ad-
adaptar
adequata -- adekvata
adherar (netr) -- algluiĝi, *adheri
adiar (tr) -- adiaŭi
adicionar (tr) -- adicii
adjektivo
administrar
admirar
admisar (tr) -- enlasi
adolecar (netr) -- esti *adoleska
adoptar
adorar
adreso
adulta -- plenaĝa, *adolta
adulterar (netr) -- adulti
adverbo
adversa -- kontraŭa, opona
advokato
aero
aeroplano
afabla
afanono -- enmiksiĝemulo
afecionar (tr) -- havi korinklinon por
afeciono -- korinklino
afektar (tr) -- afekcii
afektacar (tr/netr) -- afekti
afero
afirmar (tr) -- aserti~, deklari ke io estas vera
afisho -- afiŝo
afliktar
afrankar
Afrika -- Afriko
-ag- -- (Sufikso uzata kun substantivo por signifi "agi per"; ekz.: martelagas, butonagis)
agar
agento
agitar
aglo
aglutinar
agnoskar
agnostika
agosto -- aŭgusto
agro -- kampo
agrokultivo -- agrikulturo
agrafo
agreabla -- agrabla
agulo -- kudrilo; nadlo
-aj- -- -aĵ-
ajila -- movlerta
ajornar (tr) -- prokrasti
ajustar (tr) -- (al)ĝustigi
ajuto
akademio
akaro
aklamar
akomodar
akompanar
akordar
akordeono -- akordiono
akra -- akra~; (fig.) amara~ [D scharf, herb, beissend [auch bildl.], E acrid; acrimonious, F âcre, aigre [pr et fig.] âcre; mordant, I agro, acre [anche fig.], S acre]
akrobato
akrochar (tr) -- kroĉi, pendigi je hoko
akto
aktiva
aktoro
aktuala
akumular
akurata
akustiko
akuta -- akra; (pri supersigno) dekstrakorna
akuzar
akuzativo
al (= a la) -- al la
-al- -- (Sufikso kun signifo "rilatanta al"; ekz domala, marala, monatala, nacionala)
alo -- flugilo; alo
alarmar
albergo -- gastejo, hotelo kampara
albumo
albumeno
alegar (tr) -- argumenti~, aserti~, doni faktojn aŭ argumentojn por pruvi aŭ pravigi ion
alegorio
alejar (tr) -- senpezigi
alergio
alerta -- vigla
alfabeto
algebro
alio -- ajlo
aliniar (tr) -- liniigi, vicigi
alkoholo
alkovo
almanako
almonar (netr) -- doni almozon
alonge -- laŭlonge de
aloyar (tr) -- aloji
alta
altaro
alterar (tr) -- aliigi, ŝanĝi la naturon aŭ kvaliton de
alternar
alternativo
altitudo
altra -- alia (adj.)
altru -- alia (pron.)
altri -- aliaj (pron.)
altruismo -- altruismo
altruisto -- altruismulo, altruisto
aludar
alumeto
aluminio
aluro -- irmaniero, marŝ-maniero
amar
amalgamo
amaso
amatoro
amba -- ambaŭ
ambasado
ambiciar
ambigua
amboso
ambulanco
ameliorar -- plibonigi
amendo -- monpuno
Amerika -- Ameriko
amfibia
amiko
amilo -- amelo
amontar -- sumiĝi al
amorar
amortisar (tr) -- amortizi, malintensigi, malfortigi; dampi (muzike); estingi (ŝuldon)
ampla -- pli ol sufiĉa, pli ol sufiĉe granda
ampulo
amputar
amuzar
an -- tuj apud
an-
anado -- anaso
anagramo
anakronismo
analgeziar (tr) -- produkti analgezion je
analgezio
analizar
analoga
ananaso
anarkio -- anarĥio, anarkio
anatemar
anatemo
anatomio
ancestro -- praulo, prapatr(in)o
anciena -- malnova
anekdoto
Anglia -- Anglujo, Anglio
anguilo -- angilo
angulo
animar (tr) -- animi; (fig.) vigligi
animalo
aniversario -- datreveno
anjelo -- anĝelo
anke, ank -- ankaŭ
ankore, ankor -- ankoraŭ, plu
ankor-foye -- ankoraŭfoje
ankro
anmo -- animo
anonima
anorako
anso
antagonismo
antagonisto
ante -- antaŭ (en tempo)
antea -- antaŭa
anteno
antero
anti- -- (Prefikso kun senco "kontraŭ", uzata ĉefe en sciencaj vortoj; ekz antisepta)
anticipar
antidoto
antilopo
antiqua -- antikva
antologio
anuncar (tr) -- anonci
anxiar (netr) -- maltrankvili
aparar (netr) -- aperi
aparato
aparta
apartamento
apartenar
apatio
apelar (netr) -- apelacii, apeli
apendico
apene, apen -- apenaŭ
apertar (tr) -- malfermi
apetitar (tr) -- havi apetiton por
apetito
aplastar (tr) -- (kun)premegi (ion ne rezistpovan)
aplaudar (tr) -- aplaŭdi
aplikar
apogar
apokrifa
apostolo
apostrofo
apoteko
apreciar (tr) -- taksi alte, apreci, aprezi
aprentiso -- metilernanto
aprilo
aprobar
aproximar -- proksimumigi
apta -- taŭga
apud
apuda
apuntar (tr) -- celumi
aquo -- akvo
aquario -- akvario
aquirar (tr) -- akiri
-ar-
arachar (tr) -- elŝiri, fortiri
araneo
aranjar (tr) -- aranĝi
arbitrar (tr) -- arbitracii
arboro -- arbo
arbusto
archo -- arkeo
ardezo
ardorar (netr) -- ardi
ardua -- malglata, sulka, peniga
areo
areno
arestar
argano -- simpla argano, levbumo
argilo
argumentar
-ari- -- (Sufikso por ricevanto de ago; ekz pagario - tiu kiu ricevas pagon)
ario
arida -- seka kaj malfekunda
aristo
aristokrata
aritmetiko
arivar (netr) -- alveni
arjento -- arĝento
arko
arkado -- arkadaro
arkaika
arkeologo
arkeologio
arki- -- arĥi-, arki-
arkitekto
arkitekturo
arkivo
arlekino -- arlekeno
armo -- armilo
armeo
armoro -- ŝranko
arogar
aromo
arozar (tr) -- malsekigi, humidigi
arto
arterio
artifico -- artefaritaĵo, artifiko~
artiko
artiklo
artizano -- metiisto, manlaboristo
artrito
asaltar (tr) -- kurataki
asbesto
asekurar
asemblar (tr) -- kunigi, kunvenigi
asentar (tr) -- jesi
asepta -- asepsa
asertar
asfalto
asidua -- konstanta (pri laboro ktp)
asiejar (tr) -- sieĝi
asignar
asimilar
asistar (tr) -- ĉeesti
askoltar (tr) -- aŭskulti
asno -- azeno
asociar
asortar (tr) -- sortimenti
asparago
aspektar
aspera -- malglata
aspirar
aspirino
asterisko -- steleto, asterisko
astmo
astonar (tr) -- mirigi
astro
astronomo
astronomio
asumar (tr) -- ŝarĝi sin per, alpreni
ataĉar (tr) -- alligi, alfiksi
atakar
ateismo
ateisto
ateliero -- laborejo (de artisto aŭ metiisto)
atencar (tr) -- atenti
atentar (tr) -- ataki krime, atenci
atestar
atingar
atitudo -- sinteno
atlaso -- maparo
atleto
atmosfero
atomo
-atr- -- (Sufikso kun signifo "simila a" aŭ "kun formo de"; ekz metalatra, lanatra)
atraktar
atrapar (tr) -- trompi~, prifriponi~
atribuar
atributo
atuno -- tinuso
aturdar (tr) -- senkonsciigi
aucionar (tr) -- oferti pli altan prezon
audar (tr) -- aŭdi
audacar (tr) -- aŭdaci
augmentar (tr/netr) -- pliigi, plimultigi
augurar (tr) -- aŭguri
augusta -- respekteginda, majesta
aulo -- aŭlo
aureolo -- aŭreolo, nimbo
auroro -- tagiĝo, aŭroro
auspicio -- aŭspicio
austera -- severmora (pri si)
Australia -- Aŭstralio
Austria -- Aŭstrio
autentika -- aŭtenta, aŭtentika
autobiografio -- aŭtobiografio
autobuso -- aŭtobuso, buso
autografo -- aŭtografo
autokrato -- aŭtokrato
automata -- aŭtomata
automobilo -- aŭtomobilo
autonoma -- aŭtonoma
autoro -- aŭtoro
autoritato -- aŭtoritato
autuno -- aŭtuno
avo
avan -- antaŭ (en spaco)
avancar (tr/netr) -- antaŭeniri
avantajo -- avantaĝo
avantalo -- antaŭtuko
avara -- avida
avelano -- avelo
aveno
aventurar (netr) -- serĉi aŭ iri aventure
aventuro
avenuo
averajo -- averaĝo
averso -- bildoflanko~, malo de dorsa flanko
avertar
aviacar (netr) -- flugi (en flug-maŝino)
avida
avizar
axo -- akso
axiomo -- aksiomo
aye! -- aj!, aŭ!, huj! (ekkrio pro subita doloro; D autsch, E ouch, ow, F aïe, I ahi, S ay)
Azia -- Azio
azilo
babilar
bagajo -- pakaĵ(ar)o
bagatelo
bakar
balo
balanco -- pesilo (ekvilibra)
balayar (tr) -- balai
balde -- baldaŭ
baleno
baleto -- baledo
balkono
balnar (tr) -- bani
balono -- sfero (plena je aero), balono
balustrado
bambuo
banano
bando -- grupo (de personoj), bando~
bandajo -- bandaĝo; pneŭmatiko
bandito
banko
bankrotar
baptar
barar
baraktar
barbo
barbara
barelo
barikado
barko
baroka -- bizara
basa -- malalta, *basa
baseno
basko
baskular
bastiono
bastono
batar
bataliar (netr) -- batali
batelo -- boato
baterio
bayo -- golfeto
bazo
bazaro
bear (netr) -- gapi~
beata
bebeo -- bebo
bedo
beja -- flavgriza
beko
bela
Belgia -- Belgujo, Belgio
bendo -- strio, bendo~
benedikar (tr) -- beni
benigna -- favora; milda, *benigna
benko
benzino -- benzeno
bero
beredo -- ĉapo (vaska)
berjero -- brakseĝo remburita
berloko -- breloko
bersar (tr) -- luli
bestio -- besto
beto -- beto (en pli ĝenerala senco)
betono
betravo -- (ruĝa) beto
bezonar
bi- -- (Prefikso ĉefe scienca kun senco "du"; ekz biplano)
bipunto -- dupunkto
biblo -- biblio
biblioteko
biciklo
bideto -- bideo
bidono -- ladskatolo (por oleo ktp)
bifurkar -- branĉiĝi, forkiĝi
bigota
bilanco
bilieto -- bileto
bindar
bineto -- sarkilo~ (D Hacke, E hoe, F binette, I zappa, S binadera)
binoklo -- okulvitroj
biografio
biro -- biero
bis
biskoto
bisquito -- biskvito
bitra -- amara
blamar (tr) -- kulpigi
blanka
blasfemar
blinda
bloko
blokusar (tr) -- blokadi
blonda
blotisar (netr) -- kaŭri~, kuntiri sin
blua
blufar
bluzo
bo-
bobino -- bobeno
boikotar (tr) -- bojkoti
boko -- buŝo
bolo -- bovlo, pelvo
boliar (netr) -- boli
bombo
bona
bonvenigar
bonbono -- bombono
boneto -- ĉapo
borar
bordo -- rando
bordumo -- tekseĝo, (drap)randaĵo
bosko -- arbareto, bosko~
boto
botelo
bovo
braceleto
brakio -- brako
bramar (netr) -- bleki
brancho -- branĉo
brandisar (tr) -- svingi~
brankio -- branko
brasar (tr) -- kirli
brava
brecho -- breĉo
bretelo -- skarpo~ ;ŝelko, -eto
brezo -- lignocindro~, ligno ŝanĝita al karbono per brulo
brido
briko
brilar
briska -- vigla~, verva~
Britania -- Britujo, Britio
brizo -- freŝa vento, *brizo
brocho -- broĉo
brodkastar -- dissendi, disaŭdigi
brokantar
bronzo
brosar
brosilo -- broso
broshar (tr) -- kudri (librojn)
brovo
brueto -- ĉarumo
bruisar (netr) -- brui
brular
bruna
bruska
bruto
bubo -- bubo; (ludkarto) pajo
buchar (tr) -- buĉi
budar (netr) -- paŭti
budjeto -- buĝeto, budĝeto
bufar (netr) -- ŝveli
bufeto -- bufedo
bufono -- histriono, arlekenaĉo
bujio -- vakskandelo; sparkilo
buketo -- bukedo
buklo -- buko
bulo -- pilko
bulbo
buletino -- bulteno
burjono -- burĝono
burokrato
burso -- monujo (poŝa)
busho -- densejo, arbetaro
busolo -- kompaso
butar (netr) -- frapi hazarde (ekz per piedo)
butiko
butono
butro -- butero
buxo -- skatolo
ca (= ica) -- ĉi tiu, tiu ĉi (adj.)
cedar
celar (tr) -- kaŝi
celebrar (tr) -- festi, soleni, celebri
celerio
celiba -- fraŭla
celulo -- ĉelo
cemento
ceno -- sceno
censurar (tr) -- cenzuri
cent
centi-
centro
ceramiko
cerealo
cerebro -- cerbo
ceremonio
cerizo -- ĉerizo
certa -- certa~
certena -- iu~, ia~, certa~ (D ein gewisser, E a certain)
certifikar (tr) -- atesti kiel aŭtenta
cervo
cesar (tr/netr) -- ĉesi
cetero
chagrenar (netr) -- malĝoji (ntr), ĉagreni [tr]
chambro -- ĉambro
champiniono -- fungo manĝebla, *ŝampinjono
championo -- ĉampiono
chanco -- ŝanco
chanjar (tr/netr) -- ŝanĝi
chanto -- mallarĝa flanko (de io larĝa en aliaj direktoj, ekz libro)
chapelo -- ĉapelo
chapitro -- ĉapitro
charo -- ĉaro
charioto -- ŝarĝaŭto (kun flank-tabuloj)
charjar (tr) -- ŝarĝi
charmar (tr) -- ĉarmi
charniro -- ĉarniro
chasar (tr) -- ĉasi
chasta -- ĉasta
che -- ĉe la hejmo de
chefa -- ĉefa
cheko -- ĉeko
chera -- multekosta
chipa -- malmultekosta
chokolado -- ĉokolado
choseo -- ŝoseo; digvojo
cidro
cielo -- ĉielo
cienco -- scienco
cifro -- cifero
cigano
cigno
cikatro
ciklo
ciklono
cilindro
cindro
cinemo -- kinejo
ciniko -- cinikulo
cintilo -- fajrero
cintilo (elektrala) -- sparko
cirko
cirklo
cirkondar (tr) -- ĉirkaŭi
cirkonspekta -- singarda~, malriskema~
cirkonstanco
cirkuito -- rondiro, ĉirkaŭiro; (elektro) cirkvito
cirkular
cirkulero
cirkum -- ĉirkaŭ (prep.)
cirkume -- ĉirkaŭ (adv.)
citar
civila
civilizar
civilizeso -- civilizacio
civito
cizo -- tondilo
cizelar (tr) -- ĉizi
co (= ico) -- ĉi tio, tio ĉi
da -- de (indikante aganton), far*
dal = da la -- de~ la
damo -- virino (edziniĝinta aŭ vidvino)
damnar
damzelo -- fraŭlino
Dania -- Danlando, Danujo, Danio
danjero -- danĝero
dankar
dansar (tr/netr) -- danci
dardo -- mansago, sageto; pikilo (de insekto)
darfar (netr) -- havi rajton aŭ permeson
darnar (tr) -- ripari nur kudre (vestojn)
dato
dazlar (tr) -- blindumi, blindetigi
de -- de, da (indikante originon, devenon, enhavon aŭ kvanton)
depos -- depost, ekde
deo -- dio
debar (tr) -- ŝuldi
debatar
debeto
decar
decembro
decensar (tr/netr) -- malsupreniri, *descendi
deceptar (tr) -- trompi la esperojn de, *desaponti (D enttäuschen, E disappoint, F décevoir, I deludere, S decepcionar)
decidar
decimala
dedikar (tr) -- dediĉi
deduktar
defekto -- neperfektaĵo
defensar (tr) -- defendi
defiar
deficito
definar (tr) -- difini
definitiva
deformar (tr) -- misformi, de-formi
degenerar
degnar (netr) -- bonvoli~, *degni
dejunar (netr) -- tagmanĝi
dejurar (netr) -- deĵori
dek
dekadar (netr) -- malpliboniĝi
deklarar
dekorar (tr) -- dekoracii
del = de la -- de~ la
delegar (tr) -- delegacii, (delegi)
delegaciono -- delegacio
delektar (tr) -- ravi
deliberar (netr) -- konsideradi
delicio -- ĝuo bonega
delikata -- delikata~
deliktar (netr) -- fari delikton
delikto
delto
demandar (tr) -- peti (ion de iu)
demarshar (netr) -- klopodi
dementa -- freneza
dementiar (tr) -- dementi
demisionar (netr) -- eksiĝi
demokrata
demokratio
demolisar (tr) -- malkonstrui
demono
demonstrar (tr) -- demonstracii, demonstri
denigrar (tr) -- nigrigi, malestimigi
densa
dento
dentelo -- punto
denuncar
departar (netr) -- foriri
dependar
depozar (tr) -- deponi
depresar (tr) -- premi malsupren; deprimi
derivar
des- -- mal-
desaparar (netr) -- malaperi, sveni~
desavantajo -- malavantaĝo
desfacila -- malfacila
deskovrar (tr) -- malkovri, eltrovi
desquieta -- maltrankvila
desegnar
desero -- deserto
desertar (tr) -- dizerti; forlasi
deskriptar (tr) -- vortpentri, priskribi
despenso -- manĝaĵejo
destinar
destruktar (tr) -- detrui
detalo
detaloza -- detala
detektivo
determinar
detersar (tr) -- purigi, *detergi
detrimentar (tr) -- esti malprofita al
devar (netr) -- devi morale
devo
devancar (tr) -- preterpasi~, *devanci
developar (tr) -- disvolvi, evoluigi
deviacar -- devii
devota -- sindona
dextra -- dekstra
dezerta
dezirar
dezolar (tr) -- malĝojigi, aflikti
di -- de (indikante proprieton, ian rilaton aŭ genitivon)
di qua -- kies
di qui -- kies
dio -- tago~ (24 horoj), diurno
di.-mezo -- tagmezo
diablo
diafana -- travidebla
diagnozar
diagonala
diagramo
dialekto
diamanto
diametro
diario -- taglibro
dicar (tr) -- diri
dicernar (tr) -- distingi
dicionario -- vortaro (alfabeta kun difinoj)
diciplinar
dicipulo -- disĉiplo
dieto
difamar (tr) -- ataki la honoron aŭ reputacion de
diferar (netr) -- diferenci
difuzar
digo
digestar
digna -- inda, meritplena
digresar (netr) -- deflankiĝi
dika
diktatoro
dil = di la -- de~ la
dilemo
diligenta
dilutar (tr) -- dilui
dimensiono -- dimensio
diminutar (tr/netr) -- malgrandigi, -iĝi
dina -- maldika
dindo -- meleagro
dinear (netr) -- vespermanĝi
diplomo
direciono -- direkto~ (A-B kaj B-A)
direktar
direta -- senpera
dis-
dissolvar (tr) -- disigi, solvi~
disho -- manĝaĵo preparita, plado~
disipar
disko
diskontar
diskreta
diskursar (netr) -- doni diskurson, paroladi
diskurso
diskutar
dispersar
disponar
disputar
distar (netr) -- esti malproksima
disto -- distanco
distanta -- malproksima
distingar (tr) -- diferencigi
distinta -- aparta~, klara~ (D deutlich, EF distinct, IS distinto)
distraktar (tr) -- distri
distributar (tr) -- distribui
distrikto
ditenar (tr) -- reteni (ĝis iu okazo)
ditreso -- aflikto, malĝojo~
divenar (tr/netr) -- fariĝi, iĝi
divergar -- disiĝi, (mat., fiz.) diverĝi
diversa
dividar
divinar (tr) -- diveni
divulgar (tr) -- malkaŝi (sekreton ktp)
dizastro -- katastrofo kiu afliktas multnombre
do
docar (tr) -- instrui (temon)
docila -- obeema, kvieta~
dogano
dogmato -- dogmo
doko
doktoro
dokumento
dolca -- dolĉa
dolorar
domo
domajar (tr) -- difekti, damaĝi
domeno -- bieno; sfero de ago aŭ influo
domestika -- (pri animalo) hejma~, loĝanta kun homoj
dominacar (tr) -- domini
domtar (tr) -- subjugigi
donar
donacar
dop -- malantaŭ (en spaco)
dorlotar
dormar
dorno
dorso
dotar
dramato -- dramo
drashar (tr) -- draŝi
drastika -- drasta
driftar (netr) -- drivi
drilo
drinkar (tr) -- trinki
drogo
drola -- amuza~, komika~
dronar (tr) -- dronigi
du
dua-dek -- dudek
duesma -- dua
duimo -- duono
duopla -- duobla
dubitar (netr) -- dubi
duktar (tr) -- konduki
dum
dum ke -- dum, dum ke
dungo -- sterko
dupo -- trompito naiva
duplikato
durar (netr) -- daŭri
durstar (netr) -- soifi
dushar (tr) -- duŝi
e -- kaj
-e- -- (vidu afiks-liston)
ec (= ed cetere) -- ktp., ktp
-ebl-
ebria
ecelar (netr) -- esti bonega, superi
ecelanta -- bonega~
eceptar (tr) -- escepti
ecesar (tr/netr) -- havi eksceson
echopo -- budo
ecitar (tr) -- eksciti
ed (= e) -- kaj
-ed- -- (Sufikso por enhavaĵo de; ekz glasedo; manuedo = manpleno)
edc -- ktp
editar (tr) -- eldoni
edukar
efacar (tr) -- forviŝi, malaperigi~
efekto
efemera
eficienta -- *rendimenta
efikar
-eg-
egoista -- egoista
egala
egarar (tr) -- misloki, perdeti
egardar (tr) -- enkalkuli, atenti
Egiptia -- Egiptujo, Egiptio
ek -- el
eko -- eĥo
eklezio
ekonomio
el (= elu) -- ŝi
elaborar (tr) -- ellabori
elastika -- elasta
elefanto
eleganta
elektar
elektro
elektroniko
elemento
elevar (tr) -- plialtigi
eliminar
eloquenta -- elokventa
elu (= el) -- ŝi
elua -- ŝia
-em-
emalio -- emajlo
embarasar
emblemo
embracar (tr) -- ĉirkaŭpreni, stringi
embuskar
emendar (tr) -- amendi
emfazar
eminenta
emisar (tr) -- eligi, emisii
emocar (netr) -- emociiĝi
emplastro -- pretpansaĵo
employar (tr) -- okupigi
emundar (tr) -- pritondi, ĉirkaŭtranĉi
en
enirar
enterigar
-end-
endetala -- podetala
enemiko -- malamiko
energio
engajar (tr) -- dungi
engrosa -- pogranda
enigmato -- enigmo
enorma -- grandega
enoyar (netr) -- enui
enrejistrar (tr) -- registri
ensemblo
ento
enternar (tr) -- internigi
entraprezar (tr) -- entrepreni
entravar (tr) -- kateni
entuziasmar (netr) -- esti entuziasma
entuziasmo
envelopar (tr) -- envolvi
envidiar (tr) -- envii
episkopo
epizodo
epoko
equatoro -- ekvatoro
equilibrar (tr/netr) -- ekvilibri
equipar (tr) -- ekipi
equivalar (tr) -- egalvalori
-er- -- (Sufikso por indiki iun aŭ foje ion kiu regule aŭ ofte aŭ tipe faras ion; ekz fotografero, fumero, prezidero)
ero -- erao
erektar (tr) -- starigi (vertikale)
-eri- -- (Sufikso por establ(aĵ)o; ekz lakterio, distilerio, sporterio)
eriko
ermito
erodar (tr) -- erozii
erorar (netr) -- erari
erste -- ne antaŭ (pri tempo)
eruptar (netr) -- erupcii, (erupti)
-es- -- -iĝ- (kun verbo; ekz skribesos = skribiĝos); -ec- [ekz beleso, infanteso, qualeso = kvalito]
esar (netr) -- esti
es (= esar) -- esti
esamo -- svarmo
esenco
esforcar (netr) -- peni
-esk- -- (diveni) -iĝ- [kun adjektivo]; [komencas] ek- [kun verbo]
eskaldar (tr) -- brogi
eskalero -- ŝtuparo
eskapar
eskarpa -- kruta
eskombro -- forĵetaĵo, rubo
eskrokar (tr) -- friponi~, ŝteli per trompo aŭ ruzo
eskudelo -- supplado
-esm- -- (Sufikso por indiki numer-vorton ordan; ekz duesma = dua, unesma = unua)
espado -- glavo
esperar
esprito -- sprit(ec)o
esquado -- roto; grupo (de laboristoj); teamo
esto -- oriento
establisar (tr) -- establi
estimar
-estr-
esvanar (netr) -- sveni~
-et-
etajo -- etaĝo
etapar (netr) -- halti je etapo
eterna
etiko
etiketo -- etikedo
etuyo -- ujo speciala por iu entenaĵo (ekz violono)
eufemismo -- eŭfemismo
Europa -- Eŭropo
evar (tr) -- aĝi
evo -- aĝo
evaluar (tr) -- taksi
eventar (netr) -- okazi
evento -- okazo
eventuala
evidenta
eviero -- (lavo)pelvo, defluejo (kiel en kuirejo)
evitar
ex- -- eks-
exajerar -- troigi
exakta -- preciza; (matematiko) ekzakta
examenar (tr) -- ekzameni
exasperar (tr) -- kolerigi~, iriti~ (E exasperate, F exaspérer, I esasperare, S exasperar)
exekutar (tr) -- ekzekucii
exemplo
exemplero -- ekzemplero
exercar (tr) -- ekzerci
exhaustar (tr) -- elĉerpi, elkonsumi; ellacigi
exhortar (tr) -- admoni~
existar (netr) -- ekzisti
exkavar (tr) -- elfosi, elkavigi
exkluzar (tr) -- elbari, ekskluzivi
exkursar (netr) -- ekskursi
exkuzar (refl) -- senkulpigi
exotika -- ekzotika
expansar (tr/netr) -- pligrandigi, -iĝi, ekspansii
expediar (tr) -- ekspedi
expediciono -- ekspedicio
expektar (tr) -- atendi~, antaŭvidas~, supozas~ (D erwarten, E expect, F s'attendre à, I aspettarsi)
experiencar (tr) -- sperti
experimentar (tr/netr) -- eksperimenti
experta -- sperta
explikar (tr) -- klarigi
explorar (tr) -- esplori
explotar (tr) -- ekspluati
explozar (netr) -- eksplodi
expozar (tr) -- elmontri, ekspozicii
expresar (tr) -- esprimi
extensar (tr) -- etendi
exter -- ekster
extingar (tr/netr) -- estingi
extraktar (tr) -- ekstrakti
extraordinara -- eksterordinara
extrema -- ekstrema
-ey- -- -ej-
fabo
fablo
fabrikar
facar (tr) -- fari
faceto
facila
facinar (tr) -- fascini
fairo -- fajro
fako
fakto
faktoro
fakturo
fakultativa
falar
falchar (tr) -- falĉi
faldar
faleno -- nokta papilio, *faleno~
faliar (tr/netr) -- malsukcesi, fiaski~
falsa
famo
famoza -- fama, fame konata, renoma
familio
familiara
famino -- malsatego
fanatika
fanfaronar
fango -- koto
fantomo
farbo
fardo -- ŝminko
farino -- faruno
faringo
farmacio
fasado
fasko
fasonar (tr) -- formi; fasoni
fato -- sorto
fatigar (tr) -- lacigi
favorar
fazo
feo
febla -- malforta
febrar
februaro
federar (tr) -- federacii, (federi)
felo
felgo -- rando (de rado), radrondo
felica -- feliĉa
femina -- ina, inseksa, ingenra
femuro -- femurosto
feno -- fojno
fenco -- barilo~ (D Zaun, E fence, F barrière~, I recinto~, S valla, cerca)
fendar
fenestro
fenomeno
fero
ferdeko
ferio -- foiro
ferma -- firma
feroca -- kruela~
fertila -- fekunda (produkta)
fervorar
festar (netr) -- soleni; celebri
festinar -- festeni
fiancar (tr) -- fianĉigi
fiasko
fibro
fidar
fidela
fiera
figuro
fiktiva
filo -- fadeno
filio -- filo aŭ filino
filiino -- filino
filiulo -- filo
filmo
filtrar
finar (tr/netr) -- fini, -iĝi
finala -- fina
fingar (tr) -- ŝajnigi~ (D vortäuschen, E feign, sham, F feindre, I fingere~, S fingir)
fingro
fintar
firmo -- firmao, firmo, negoco~
fisho -- fiŝo
fitar (netr) -- bone sidi (en), esti laŭmezura
fixa -- fiksita
flako -- pluvkaveto, *flako
flamo
flanko -- flanko~
flarar
flatar
flava
flecho -- sago
flegar
flexar (tr/netr) -- fleksi, -iĝi
flirtar (netr) -- flirti~, koketi
floko
floro
floso -- naĝilo
flotacar (netr) -- flosi
fluar
flugar
fluida
fluktuar
fluro -- interŝtuparo
fluvio -- granda rivero
foko -- fokuso
fola -- freneza
folio
folieto -- flugfolio
fondar
fonto
fonteno -- fontano
for -- for de
fora
fore -- for
forco -- forto
foresto -- arbarego
forjar (tr) -- forĝi
forko
formo
formala -- formala
formacar (tr) -- formi
formato
formiko
formulo
formulario -- formularo
forno -- bakujo
forsar (tr) -- perforti~ (D zwingen, aufbrechen, E force, F forcer, I forzare, S forzar~)
forsan -- eble~ (D vielleicht, E perhaps, F peut-être, I forse)
forta
fortifikar (tr) -- fortikigi
fortuno -- bonŝanco
fortunoza -- bonŝanca
foso -- fosaĵo
fosato -- fosaĵo, ĉirkaŭfosaĵo
fosto
fotelo -- brakseĝo, (fotelo~)
fotografar
fotokopiar
foyo -- fojo
fraciono -- frakcio
frago
fragmento
frajila -- rompiĝema, facile rompebla
frakasar
framo -- framo; ĉasio
frambo
Francia -- Francujo, Francio
frapar
frato -- frato aŭ fratino
fratino
fratulo -- frato
fraudar -- fraŭdi
frazo
fremisar (netr) -- tremi~
freno -- bremso
frenezio -- furiozeco, frenezo
frequa -- oftega (pri frekvenco)
fresha -- freŝa
fricionar (tr) -- froti (mekanike aŭ medicine)
fripono
fritar
frivola
fromajo -- fromaĝo
fronto -- frunto (de kapo); antaŭo
frontiero -- landlimo
frostar (netr) -- frostiĝi
frotar
frua
frukto
frumento -- tritiko
fugar (tr/netr) -- fuĝi
fulgurar (netr) -- fulmi
fulminar -- fulmobati
fumar
funcionar (netr) -- funkcii
fundo
fundamento
funelo
funero -- funebra solenaĵo
funesta -- malfavora, pereiga
fungo
furo -- pelto
furgono -- kamiono fermita flanke kaj supre
furiar (netr) -- furiozi
furioza -- furioza
furnazo -- forno por fandi metalojn ktp
furnelo -- kuir- aŭ hejt-forno, stovo
furnisar (tr) -- liverigi~
furtar (tr) -- ŝteli
fushar (tr) -- fuŝi
fusilo
futbalo
futuro -- estonteco; (gramatiko) futuro
fuzar (tr) -- fandi
galanta
galerio
gambo -- kruro~
gambitar (tr) -- stumbligi~
gambolar (netr) -- saltetadi, petoli~
ganar (tr) -- gajni
ganso -- ansero
ganto
garajo -- aŭtejo, remizo, garaĝo
garantiar
gardar
gardeno -- ĝardeno
gaso
gasto
gaya -- gaja
gazolino -- benzino
ge-
gemo
genero -- genro (en biologio)
generala -- ĝenerala
generaciono -- generacio
generalo
genio
geniozo -- geniulo
genitar (tr) -- generi
genitoro -- (plurale) gepatroj
genro -- genro (en gramatiko)
genuo
geografio
Germania -- Germanujo, Germanio
gestar
gibo -- tubero~; ĝibo
gicheto -- giĉeto
glacio
glaso
glata
glitar
globo
glorio -- gloro
gluo -- glu(aĵ)o
glutar
glutinar (tr/netr) -- glui
golfo -- golf(lud)o
gracio
grado -- ŝtupo; grado
gramo
gramatiko
gramofono
grano -- grajno
granda
grandioza
grantar (tr) -- doni kiel favoro (ion petatan aŭ deziratan)
graso
gratar
gratifikar
gratitudar (tr) -- esti danka al
gratuita -- senpaga
gratular
grava -- peza; (pri supersigno) maldekstrakorna; [fig.] grava
gravida -- graveda
Grekia -- Grekujo, Grekio
greto -- krado~
grilar (tr) -- kradrosti
griza
grondar (netr) -- muĝi~
grosa -- ampleksa, dika~
grosiera -- kruda~, maldelikata~
groteska
grozelo -- groso
grucho -- lambastono
grunar (netr) -- grumbli; grunti
grupo
gudro
guidar (tr) -- gvidi
gulfo -- golfo (geog.)
gumo
gurto -- rimeno (por ligi)
gustar (tr) -- gustumi
guto
guturo -- gorĝo
guvernar (tr) -- direkti kun aŭtoritato, regi~
ha!
habila -- lerta
habitar -- (konstante) loĝi en
hachar (tr) -- haĉi
hakar
halo
haltar
hano -- kok(in)o
hancho -- kokso
handikapar
haro -- haro (de homa kapo)
harda -- malmola
harmoniar
harneso -- jungilaro
hastar (netr) -- rapidi, hasti
haular (tr) -- treni
havar
hazardo
hefo -- gisto
hego -- heĝo
helico
heliko
helpar
hemo -- hejmo
herbo
herdo -- kameno
heredar
heroo
hezitar
hiere -- hieraŭ
higieno
hike -- ĉi tie, tie ĉi
himno
hipar (netr) -- singulti
hisar
Hispania -- Hispanujo, Hispanio
histerio
historio
hodie -- hodiaŭ
hobio
hoko
hola! -- lo!, ha lo!
homo
honesta
honoro
horo
hordeo
horizonto
horizontala -- horizontala
horlojo -- horloĝo
hororar
hospitalo
hosto -- gastiganto
hotelo
hufo
humana
humida
humila
humoro
humuro
hundo
Hungaria -- Hungarujo, Hungario
hungrar (netr) -- esti malsata, malsati
hura!
-i- -- 
ibe -- tie
ica (= ca) -- ĉi tiu, tiu ĉi (adj.)
ico (= co) -- ĉi tio, tio ĉi
-id- -- (Sufikso por posteulo; ekz Izraelido)
ideo
ideala -- ideala
identa
idioto
-ier- -- (Sufikso kun substantivo); -ul- [iu kiu havas ian atribuon; ekz milioniero]; -arb- [ekz pomiero = pomarbo]; -ing- [ekz plumiero]
-if- -- (Sufikso je substantivo por formi verbon kun senco produkti aŭ eligi; ekz sangifas, panifo)
-ig-
igar
ignorar
-ik- -- 
il (= ilu) -- li
-il-
ilu -- li
ilua -- lia
ilustrar
iluzionar (netr) -- iluzi-iĝi
-im- -- -on-
imaginar (tr) -- imagi
imajo -- bildo
imensa -- grandega
imitar
impaso -- senelirejo
impedar (tr) -- malhelpi, obstrukci
imperar (tr) -- ordoni
impertinenta
implemento -- mana ilo
implikar (tr) -- implici
implorar (tr) -- emocie petegi (iun)
importar (netr) -- esti grava, gravi
importanta -- grava
impostar
impozar (tr) -- trudi
impregnar
impresar
imprimar (tr) -- presi
-in-
inaugurar (tr) -- inaŭguri
incitar (tr) -- antaŭenpuŝi, instigi, inciti~
-ind-
indexo -- indekso; montrilo
India -- Hindujo, Hindio
indico -- indikaĵo, signo kiu trovigas ion
indiferenta
indignar
indijar (tr) -- grave bezoni (kiel malriĉegulo)
indijanto -- senhavulo
indijena -- indiĝena
indikar
individuo
indolenta -- mallaborema, *pigra
industrio
indutar (tr) -- ŝmiri
infama -- malglora
infanto -- infano
infektar
inferno -- infero
infinita
infinitivo
infirma -- malforta~, ne povanta uzi normale parton de sia korpo
inflar (tr) -- ŝveligi
inflamar (tr) -- inflamigi
influar
informar
infre -- malsupre
ingrediento -- ingredienco
inhibar (tr) -- inhibicii, inhibi
iniciar (tr) -- inici; iniciati
inko
inklinar -- klin(iĝ)i, inklini, emi
inkluzar (tr) -- inkluzivi
inkurar (tr) -- altiri sur sin, submetiĝi al
inocenta -- senkulpa~, kiu ne faras ion malbonan
inquestar (tr) -- enketi
insekto
insertar (tr) -- enmeti, (scienco) inserti
insigno
insistar
insolenta -- malrespektega
inspektar
inspirar
instalar
instanto -- momento
instinto -- instinkto
institucar (tr) -- starigi~
institucuro -- institucio
instituto
instruktar (tr) -- instrui (personon)
instrumento -- ilo, laborilo
insulo
insultar
integra
intelektar (tr) -- kompreni intelekte
intelekto
inteligenta
intencar
intensa
inter
internaciona -- internacia
interruptar (tr) -- interrompi
interdiktar (tr) -- malpermesi, (interdikti~)
interesar
interesto -- interezo
interimo -- intertempo
interna
interpretar
intervalo
interviuvar (tr) -- intervjui
intima
intrikar (tr) -- impliki
introduktar (tr) -- prezenti; enkonduki
intruzar -- entrudiĝi
inundar
invadar
invalida -- kiu esti invalido
invalido
inventar (tr) -- elpensi, inventi
inversa
invitar
ipsa -- mem
irar
iracar (netr) -- esti kolera, koleri
irga -- iu ajn (adj.)
irgo -- io ajn
irgu -- iu ajn (pron.)
irgube -- kie ajn
irgaloke -- ie ajn
irgekande -- kiam ajn
iritar (tr) -- inciti~ (D irritieren~, E irritate, F irriter, I irritare, S irritar)
ironio
-ism-
-ist- -- (Sufikso por persono kiu aŭ ĉiam okupiĝas pri io aŭ estas adepto de io; ekz dentisto, kantisto, pacifisto)
ita (= ta) -- tiu (adj.)
ito (= to) -- tio
Italia -- Italujo, Italio
iterar (tr) -- refojigi, ripeti
-iv- -- -iv-, povanta (+ verbo)
-iz- -- (Sufikso por formi verbon kun senco "provizi per"; ekz salizi, kronizi)
izolar
ja -- jam
jacar (netr) -- kuŝi~
jaluza -- ĵaluza
januaro
jaro -- vazo el fajenco (por akvo, oleo ktp)
jeleo -- gelatenaĵo, ĵeleo
jemar (netr) -- ĝemi
jemelo -- ĝemelo
jenar (tr) -- ĝeni, malhelpi
jeneroza -- malavara, donacema
jentila -- ĝentila~
jerar (tr) -- administri, direkti (firmon por la proprietulo)
jerzeo -- ĵerzo (vesto)
jetar (tr) -- ĵeti
jinjero -- zingibro
jirar (netr) -- rondiri, ĉirkaŭiri
jokar -- ŝerci
jolia -- beleta~, linda (D hübsch, E pretty, F joli, I carino, S bonito, lindo)
jonglar (netr) -- ĵongli
jorno -- tago~ (periodo de sunlumo)
jovdio -- ĵaŭdo
joyar (netr) -- ĝoji
juar (tr) -- ĝui
judiciar (tr) -- juĝi justice
judikar -- juĝi (en ĝenerala senco, ne justice)
julio
jungar
junglo -- ĝangalo
junio
juntar (tr) -- kunigi
jupo
jurar -- ĵuri
jurnalo -- ĵurnalo
jus -- ĵus
justa -- ĝusta
justifikar (tr) -- pravigi~ (D rechtfertigen, E justify, F justifier, I giustificare, S justificar)
juvelo
ka (= kad) -- ĉu
kabo
kabano
kablo
kadavro
kadro
kaduka
kafeo -- kafo
kajo -- kaĝo
kalamitato -- granda misokazo por multaj personoj, katastrofo~
kaldrono -- kaldrono~, kuirvazo
kalendario -- kalendaro
kalkular
kalma -- kvieta
kalumniar
kalzo -- ŝtrumpo
kalzeto -- ŝtrumpeto
kam -- ol, (tiel ..) kiel
kamarado
kambiar (tr) -- interŝanĝi
kameno -- kamentubo
kamero -- fotografilo, fotilo
kamiono
kamizo -- ĉemizo
kampar (netr) -- tendumi, kampi
kampaniar (netr) -- kampanji
Kanada -- Kanado
kanalo
kanapeo -- kanapo
kande, kand -- kiam
kandelo
kandida -- malkaŝema
kandidato
kanelo -- kanelo; ranuro
kanoo -- kanuo
kanono
kanoto
kansono -- kanzono
kantar
kanvaso
kaoso -- ĥaoso
kaoso -- ĥaoso, kaoso
kapo
kapabla
kapaca -- ampleksa~ (pri kapacito)
kapaceso -- enhaveco, kapacito
kapelo
kapitano
kaprico
kaptar
kapuco -- kapuĉo
kara
karaktero
karbo -- karbono
karbono -- karbo
karcero
karear (tr) -- vivi sen bezoni, senigi sin je
karezar -- karesi
kargar (tr) -- ŝarĝi (varojn en aŭ sur ion)
kargajo -- kargo
kariero
karno -- (parto de korpo) karno; [por manĝi] viando
karnavalo
karoto
karpo -- pojno; (fiŝo) karpo
karpentar (tr) -- ĉarpenti
karto -- karto (ne mapo)
kartono
kaso
kaseto
kasiso -- ribo
kaskado
kasqueto -- kaskedo
kasrolo -- kaserolo
kastelo
kato
katalogo
kataro
katareto -- malvarmumo
katastrofo
katedralo
kategorio
kateno -- ĉeno
kauchuko -- kaŭĉuko
kaudo -- vosto
kaulo -- brasiko
kauzo -- kaŭzo
kava
kavalo -- ĉevalo
kavalkar -- rajdi
kaverno
kayo -- kajo
kayero -- kajero
kazo
ke
kelero -- kelo
kelka -- iom da, kelka
kerno
kesto
kilogramo
kin -- kvin
kiosko
kirko -- preĝejo, (kirko)
kiroptero -- vesperto~
kisar
klakar
klamar (tr) -- ekkrii, kriegi (vortojn)
klara
klaso
klasika
klaudikar (netr) -- lami
klauno -- klaŭno
klavo
klefo -- ŝlosilo
klefapertar -- malŝlosi
klefklozar -- ŝlosi
klemar (tr) -- kunpremi
klementa -- kompatindulga, korfavora
kleriko
kliento
klifo
kliktar (netr) -- klaktinti, tintegi
klimar -- grimpi
klimato
klinar -- interkovriĝi
kloko -- horo~, tempo~ horloĝa (ye un kloko = je la unua (horo))
klosho -- sonorilo
klovo -- najlo
klozar (tr) -- fermi
klubo
koaktar (tr) -- devigi perforte
kofro
koherar
koincidar
kolo
kolda -- malvarma
kolego
kolegio
kolektar
koliar (tr) -- deŝiri, *pluki
koliaro -- koliero
kolino -- monteto, altaĵo
kolizionar (netr) -- kolizii
kolmo -- plej alta rango
kolono -- kolono; kojlo
koloro
kolumo
kolumno
kom -- kiel~ (estante, en la ofico de)
komo
komo-punto -- punktokomo
komandar
kombatar (tr/netr) -- batali
kombinar
komedio
komencar (tr/netr) -- komenc(iĝ)i
komendar (tr) -- mendi
komentar (tr) -- komentarii, komenti
komercar
kometo
komforto
komika -- komika~
komitato
komizo
komoda -- konvena, oportuna~
komodo
kompakta
kompano -- kunul(in)o
kompanio
komparar
kompaso -- cirkelo
kompatar
kompensar
kompetenta
komplemento
kompleta
komplexa -- malsimpla, kompleksa
komplezar (netr) -- komplezi (tr)
komplikar
komplimentar
kompozar (tr) -- komponi; konsistigi
komprar (tr) -- aĉeti
komprenar
kompresar (tr) -- malgrandigi per premo, kunpremi~, densigi~
komuna
komunikar
kono -- konuso
koncentrar
konceptar
koncernar
koncerto
konciar (tr) -- konscii
koncienco -- konscienco
konciliar (tr) -- repacigi, akordigi
konciza
kondamnar
kondensar
kondicionar (tr) -- kondiĉi
kondolar (tr) -- kondolenci
konduktoro
kondutar
konektar
konferar (netr) -- konferenci
konfesar
konfidar
konfirmar
konfiskar
konfliktar
konfundar (tr) -- konfuzi
konfuza
kongresar
konkava
konkluzar (tr) -- konkludi
konkordar (netr) -- interkonsenti
konkreta
konkursar (netr) -- konkuri
konocar (tr) -- koni
konquestar (tr) -- konkeri
konsentar
konsequar (netr) -- sekvi (logike)
konservar
konsiderar
konsilar
konsistar
konsolacar (tr) -- konsoli
konspirar
konsputar (tr) -- esprimi malestim(ec)on al
konstanta
konstatar
konsternar
konstitucar (tr) -- konsistigi, formi
konstriktar (tr) -- malvitigi, kuntiri
konstruktar (tr) -- konstrui
konsultar
konsumar
kontar (tr) -- nombri
konto
kontaktar
kontenar (tr) -- enhavi, enteni
kontenta
kontestar
kontinento
kontinua
kontoro
kontrastar
kontre -- kontraŭ
kontrea -- kontraŭa
kontributar -- kontribui
kontrolar
konturo
kontuzar
konvenar
konversar (netr) -- konversacii
konvertar
konvexa -- konveksa
konvinkar
kooperar (netr) -- labori en kooperativo
koordinar (tr) -- kunordigi
kopiar
koquar (tr) -- kuiri
koro -- ĥoro
koram -- en la ĉeesto de, antaŭ~
korbo
kordo -- ŝnuro
kordio -- koro
kordono
Korea -- Koreujo, Koreo
korekta
korespondar
koridoro
korko
korno
korniko
korpo
korsajo -- korsaĵo
korto -- korto (spaco), -ego [de princo], -umo [juĝa]
kosto -- ripo
kostumo
kotono
kovrar
kozo -- aĵo
krabo
krano -- argano
kranio
kraso -- malpuraĵo
kravato
krayono -- krajono
krear
kredar
kremo
kreskar
krespo
kresto
kreto
krevar
kriar
kriblo -- kriblilo~
kriminar (netr) -- krimi
kristalo
kriterio
kritikar
krizo
krokar (tr) -- krakmaĉi
kruco
krucho -- kruĉo
kruda -- kruda~, en natura stato
kruela
krugo -- kruĉo (metala aŭ ligna)
krumplar (tr) -- ĉifi
kruro -- femuro
kubo
kudo -- kubuto
kuko
kuliero -- kulero
kulpar (netr) -- esti kulpa, kulpi
kulpo
kultelo -- tranĉilo
kultivar
kulturo
kun
kune
kunvenar
kuniklo
kupolo
kupono
kupro
kurar
kuracar
kurajar (netr) -- kuraĝi
kuriero
kurioza -- scivola
kurso -- kurso; kurzo
kurta -- mallonga
kurteno
kurtezar (tr) -- amindumi
kurva -- kurba
kuseno
kushar (tr) -- kuŝigi (kiel por dormi)
kushar su -- kuŝi (kiel por dormi)
kustar (tr) -- kosti
kustumar (netr) -- kutimi
kustumo -- kutimo
kuvo
kuverto -- koverto
kuzo -- kuz(in)o
la
labio -- lipo
labirinto
laborar
laco -- laĉo
lacerar (tr) -- ŝiri
lago
lakrimo -- larmo
lakto
lamo -- klingo; lameno
lamentar
lampo
lano
lando
lango
lanjo -- vindotuko
lansar (tr) -- brandisi~, ĵeti~
lanterno
larja -- larĝa
lasar (tr) -- lasi~, permesi~
lasta
latero
latrino -- necesejo, latrino~
latugo -- laktuko
laudar (tr) -- laŭdi
lauta -- laŭta
lavar
laxa -- malstreĉita, malfirma
le -- la~ (uzata por indiki pluralon kiam mankas alia indiko)
leciono
leda -- malbela
ledro -- ledo
lego -- leĝo
legendo
legitima -- laŭleĝa
legumo -- legomo
lejera -- malpeza
lekar
lektar (tr) -- legi
lenso -- lenso (optiko); lento [bot.]
lenta -- malrapida, *lanta
lernar
letro -- letero
levar
levero -- levilo, levstango, regostango
lezar (tr) -- lezi; malutili
li -- ili
lia -- ilia
libera
libro
lido -- kovrilo~, fermoplato
ligar
ligno
likar
limito -- limo
limono -- citrono
limonado
lineo -- linio
linealo -- liniilo
linguo -- lingvo
linjo -- tolaĵo
liquida -- likva
liquido -- likvaĵo
listo
lito
litero
literaturo
litro
livar (tr) -- forlasi~
livrar (tr) -- liveri
lo -- ĝi (kiam aludi fakton, ne aĵon)
logiko
lojar (netr) -- loĝi~
loko
lokacar (tr) -- lui
lokomotivo
loncho -- tranĉaĵo
longa
lor -- je la tempo de
lore -- tiam
loyala -- lojala
lu -- li aŭ ŝi
lua -- lia aŭ ŝia
ludar
lugar (tr) -- luigi
luktar
lumar
lumo
luno
lundio -- lundo
lurar (tr) -- logi
luxo -- lukso
ma -- sed
maestro -- majstro
magazino -- vartenejo, provizejo, staplo
magneto
magnetofono
magra -- malgrasa, *magra
maizo
majoritato -- plimulto, *majoritato
makulo
mala -- malbona
malada -- malsana
maledikar (tr) -- malbeni
maleolo
malgre -- malgraŭ
malico -- malic(ec)o; petolado~
maligna -- malbonintenca; malutila
mamo
mancho -- tenilo (rekta)
mandato -- poŝtmandato, monomandato
maneto -- tenilo turnebla aŭ movebla (ekz por malfermi pordon)
maniero
maniko
manipular
manivelo -- kranko
manjar (tr) -- manĝi
mankar
manovrar
mantelo
mantenar (tr) -- konservi~, subteni~
manuo -- mano
manuskripto
mapo -- mapo, (land)karto
maro
mar.-hundo -- foko
marchar (netr) -- marŝi
marchandar (tr) -- marĉandi (ntr)
mardio -- mardo
margarino
mariajar (tr) -- geedzigi
mariajesar -- edz(in)iĝi
marioneto
marjino -- marĝeno
marko
marmelado
marmito
marmoro
marsho -- marĉo
marto
martelo
martiro
marvelo -- mirindaĵo
maso
mashin-skribar -- tajpi
mashino -- maŝino
maskula -- virseksa, *maskla
mastikar (tr) -- maĉi
mastro
mato
materio
matida -- malbrila, malhela (pri sono, koloro ktp)
matino -- mateno
matro -- patrino
matraco
matura
maxim -- plej
mayo -- majo
mayuskulo -- majusklo
me -- mi
mea -- mia
mecho -- meĉo
medalio -- medalo
medio
medicino
mediko -- kuracisto
medikamento
mekanismo
meleo -- interbatiĝo, miksbatalo
melkar
melodio
mem -- eĉ
membro
memorar
mencionar (tr) -- mencii
mendikar -- almozi
mento -- menso
mentiar (netr) -- mensogi
mentono
menuo
meritar
merkar (tr) -- noti mense
merkato -- vendoplaco; merkato~
merkato
merkurdio -- merkredo
merlo
mesajo -- mesaĝo
meskina -- mallarĝanima
mestiero -- metio
metar (tr) -- (sur)meti (veston)
metaforo
metalo
metodo
metro
mezo
mezurar
mi- -- duon-
mielo
mieno
migrar
mikra -- malgranda
mil
milio -- mejlo
miliono
militar
mimar
min -- malpli
minar
minacar
minim -- malplej
minoritato -- malplimulto, *minoritato
minus
minuskulo -- minusklo
minuto
mirajo -- miraĝo
miraklo
mis-
misterio -- mistero
mistika
mistikismo -- mistiko, -ismo
mito
mixar (tr) -- miksi
mizerar
mizero
moblo -- meblo
modo
modelo
moderar (tr) -- moderigi
moderna
modesta
modifikar (tr) -- modifi
mokar
mola
moldar (netr) -- ŝimi
molestar
monako -- monaĥo
monato
mondo
moneto -- monero, mono (metala)
monopolo
monotona
monstro
monto
montrar
monumento
morbo -- malsano
mordar
morge -- morgaŭ
mortar
moskito
motivo
motoro
movar (tr/netr) -- mov(iĝ)i
moyeno -- rimedo
muelar
mujar (netr) -- muĝi~
muliero -- virino
multa -- multa, multe da
multa
multiplikar
muntar
muro
murmurar
muso
musho -- muŝo
muskulo -- muskolo
mustar (netr) -- devi pro neceso
muta
mutono -- ŝafo
mutuala
muzeo
muzikar
naciono -- nacio
naiva
nam -- ĉar~ (D denn, E for, F car, I poiché, dato che, S pues)
naracar (tr) -- rakonti (ion veran)
naskar (netr) -- naskiĝi
natar (netr) -- naĝi
naturo
navo -- ŝipo; navo
navo
nazo
ne -- ne (adv.)
nebular (netr) -- esti nebula
nebulo
necesa
negar (tr) -- nei, *negi
negativa
neglijar (tr) -- neglekti
nek ... nek
nepoto -- nepo, -ino
nesto
neta -- neta, pura
neta
neutra -- neŭtra; neŭtrala
nevo
ni
nia
Nigeria -- Niĝerio
nigra
nilono
nivar (netr) -- neĝi
nivelo
no -- ne (kontraŭaĵo de 'jes')
nobela
nobla
nocar (tr) -- malutili
nocho -- noĉo
nodo
noktar (netr) -- esti nokto
nokto
nomar (tr) -- voki nomon de, nomi~
nomo
nombro
non -- naŭ
nordo
normo
normala -- normala
notar
nova
novembro
nuanco
nubo
nuco -- nukso
nuda
nudlo -- nudelo
nukleo
nula -- neniu (adj.)
nulo -- nenio
nulu -- neniu (pron.)
nultempe -- neniam
numero
nun
nuna
nur
nura
nutrar
o -- aŭ
o ... o (= od ... od) -- aŭ ... aŭ
obediar (tr) -- obei
objecionar (tr) -- kontraŭargumenti
objekto
obligar (tr) -- devigi, komplezi~
obliqua -- oblikva
obliviar (tr) -- forgesi
oblonga
observar
obskura -- malluma, malklara, *obskura
obsoleta -- ne plu uzata, arkaika~ (D überholt, veraltet, E obsolete, F dépassé, périmé, I obsoleto, S en desuso)
obstaklo
obstinar (netr) -- esti obstina, obstini
obstruktar (tr) -- obstrukci
obtenar (tr) -- havigi~ (D erhalten, E obtain, F obtenir, I ottenere)
oceano
ocidar (tr) -- mortigi (perforte)
od (= o) -- aŭ
odiar (tr) -- malami
odorar
ofensar (tr) -- ofendi
ofico
oficala -- oficiala
oficiro
ofrar (tr) -- oferi; oferti
ofrar (tr) -- oferti (por aĉeto / kompro)
ofta
ofte
ok
okaziono -- kazo~, okazo~, tempo oportuna
oktobro
okulo
okupar
ol (= olu) -- ĝi
olda -- maljuna, *olda
oleo
oli -- ili (tiuj aĵoj)
olim -- iufoje, antaŭe
olivo
olu -- ĝi
olua -- ĝia
ombro
omisar (tr) -- preterlasi
omleto
omna -- ĉiu (adj.) [D jeder, alle, E every, I ogni, S todo]
omno -- ĉio
omnu -- ĉiu (pron.)
omni -- ĉiuj (pron.)
omnibuso -- aŭtobuso
on (= onu) -- oni
ondo
onklo -- onklo aŭ onklino
onklino
onklulo -- onklo
onu -- oni
onua -- onia
onyono -- cepo
-op-
opaka -- maldiafana
opinionar (netr) -- opinii
-opl- -- -obl-
oportuna
opozar (tr) -- kontraŭ(star)i, *oponi
opresar (tr) -- premi~
optimismo
optimisto
oro
oranjo -- oranĝo
ordinar (tr) -- ordigi
ordinara
orelo
orfano -- orfo
organo
organizar (tr) -- organizi
origino
originala -- originala
ornar (tr) -- ornami
ornamento -- ornamaĵo
orta
ortodoxa -- ortodoksa
osto
ovo
ovala
-oz- -- -hav-, -riĉ-, -oz- (Sufikso kun senco "(en)havanta"; ekz poroza, porozeso, marveloza, sukroza)
pacar (netr) -- esti je paco
paco
pacienta -- pacienca
pafar
pagar
pagino -- paĝo
pako
pala
palaco
palio -- pajlo
paliso
palmo -- manplato, *polmo; palmobranĉo
palpar (tr) -- palpi~
paltoto -- palto
pano
panear
panelo
panoramo
pantalono
pantoflo
papero
papiliono -- papilio
par- -- el- (komplete; ekz parlerni)
para
paro
para- -- protektilo (ekz parapluvo)
parapluvo -- (pluv)ombrelo
paradizo
paradoxo -- paradokso
paragrafo
paralela
pardonar
parenta -- parenca
parfumo
pariar (tr) -- veti
parko
paroko -- pastro paroĥa
parolar
parto
partenero -- kundancant(in)o, kunludant(in)o
partio -- grupo (por amuzo, ludo, ĉaso)
partikulara -- aparta~, speciala~
partiso -- partio
parturar (tr) -- akuŝi
pasar
pasabla -- ĵus akceptebla, sufiĉa, sufiĉe bona
pasiono -- pasio
pasiva
pasporto
pasto
pastelo -- paŝtelo
pasteto -- pasteĉo~
pastoro
patetika -- kortuŝa, korŝira
patro
patriota
pauzar (netr) -- paŭzi
pavo -- pavimero
pavono -- pavo
pavorar (netr) -- timi (instinkte)
pazar (netr) -- paŝi
peco
pedo -- piedo
peizajo -- pejzaĝo
pekar
pektar (tr) -- kombi
pektoro -- brusto
pekunio -- mono
pelo -- haŭto
penar
pendar (tr/netr) -- pend(ig)i
pensar
per
perdar
perfekta
perfida
periodo
perisar (netr) -- perei
permanar (netr) -- daŭri senĉese
permananta -- konstanta~, daŭra senĉese
permisar (tr) -- permesi
persono
persuadar (tr) -- persvadi
peskar -- fiŝi, fiŝkapti
petro -- ŝtono (materio)
petular (netr) -- petoli~
pezar
piktar (tr) -- pentri
pikturo -- pentraĵo
pilo -- haro~ (alia ol de homa kapo)
pinchar (tr) -- pinĉi
pinglo
pinto
pipo
pizo
placo
plado
plafono
plajo -- plaĝo
plako -- plato
plana -- ebena
plando
planko -- tabulo
planto
plantacar (tr) -- planti
plaso -- loko~ (por persono aŭ aĵo)
plata
plear (tr) -- ludi~ (rolon, instrumenton ktp)
plena
plendar
plezar -- plaĉi
plezuro
plorar
plu -- pli
plugar
plumo
plunjar (netr) -- plonĝi
plura
pluralo
plus
plusa -- kroma, aldona, ekstra
pluvar
po
poka -- malmulta
polexo -- polekso
polico
polisar (tr) -- poluri
polita -- ĝentila~ (D höflich, E polite, F poli, I cortese, S cortés, correcto)
Polonia -- Pollando, Polujo, Polio
polvo
pomo
ponderar (tr) -- pesi
ponto
populo -- popolo
populara
por
por ke
porciono -- porcio
pordo
portar
portuo -- haveno
pos -- post
pos.-dimezo -- posttagmezo
posedar
posho -- poŝo
posibla -- ebla
posto -- poŝto
postular
povar
povo
povra -- malriĉa, *povra
pozar (tr) -- meti
praktikar
preco -- prezo
precipua -- ĉefa, precipa
preciza -- preciza (klare determinita)
preferar
pregar (tr) -- peti (iun, pri/por io)
pregar (religie) (tr) -- preĝi~
prenar
preparar
presar (tr) -- premi
preske -- preskaŭ
prestar (tr) -- prunti~, pruntedoni
preter
preventar (tr) -- malebligi, *preventi
prezenta -- ĉeestanta; nuntempa; (gramatiko) prezenca
prezervar (tr) -- prezervi, protekti~, savi~, ŝirmi~ (de vundo aŭ malutilo)
pri
principo
printempo
privata
prizar (tr) -- ŝati
prizentar (tr) -- prezenti
pro
pro ke -- ĉar~ (D da, weil, E because, F parce que, I perché, S porque)
pro quo -- kial
probar (tr) -- provi
probabla
probabla -- verŝajna, probabla
problemo
produktar
profesiono -- profesio
profitar
profunda
projetar (tr) -- projekti
proklamar
prokurar (tr) -- havigi~ (D verschaffen, E procure, F procurer, I procurare)
promenar
promisar (tr) -- promesi
pronta -- preta
proporciono -- proporcio
propozar (tr) -- proponi
propra
proprietar
protektar
proverbo
provizar
provizora
proxim -- proksima al, apud~
prudenta
pruntar (tr) -- prunti~, pruntepreni
pruvar
publika
puero -- knabo aŭ knabino
puerino -- knabino
puerulo -- knabo
pulsar (tr) -- puŝi
pulvero -- pulvoro
punisar (tr) -- puni
punto -- punkto
pura
qua -- kiu
quadrata -- kvadrata
quala -- kia
quale -- kiel
qualeso -- kvalito
quankam -- kvankam
quanta -- kiom da, kioma
quanto -- kvanto
quas -- kvar
quarimo -- kvarono
quaze -- kvazaŭ
querar (tr) -- iri por alporti, venigi~ (D (ab)holen, E fetch, F quérir, S ir en busca de, buscar)
questionar -- demandi
qui -- kiuj
quieta -- trankvila (mense)
quik -- tuj
quo -- kio
raciono -- racio
radiar
radio
radiko
rafto -- floso
rago -- ĉifono
rajuntar (tr) -- atingi~, ĝisiĝi
raketo -- rakedo, (raketo)
rakontar (tr) -- rakonti (ion fikcian)
ramo -- branĉeto, vergo~
rampo -- deklivo (supren)
rano
rango -- rango; serio~, etendiĝo~
rapida
raportar
rara
raso
rato
rauka -- raŭka
razar
reaktar (netr) -- reagi, reakcii
reala
recenta -- antaŭnelonga, lastatempa
recepto
recevar (tr) -- ricevi
reciproka
reda -- ruĝa
redaktar
reduktar
referar -- direkti~, rilatigi~
reflektar
refutar
refuzar (tr) -- rifuzi
regardar (tr) -- rigardi
regiono
registro
regnar -- regi
regretar (tr) -- bedaŭri
regular (tr) -- regul(ig)i
regulo
rejo -- reĝ(in)o
rejimo -- reĝimo
reklamar
rekoltar (tr) -- rikolti
rekomendar
rekompensar (tr) -- rekompenci
rekordo
rekta
relo
relatar -- rilati (ntr)
religio
remar
remarkar (tr) -- rimarki
remediar (tr) -- resanigi~ (malsan(ec)on)
remplasar (tr) -- anstataŭi
renkontrar (tr) -- renkonti
renversar
reparar (tr) -- ripari
repastar (netr) -- manĝi~ (je regula okazo)
repasto -- manĝo~ (D Essen, Mahlzeit, E meal, F repas, I pasto)
repentar -- penti
repetar (tr) -- ripeti
repozar (netr) -- ripozi
represar (tr) -- (sub)premi; repuŝi~
reprezentar
reprimandar (tr) -- admoni~
reprochar (tr) -- riproĉi
reptar (netr) -- rampi
republiko -- respubliko
repugnar (tr) -- produkti grandan antipation en
repulsar (tr) -- repuŝi, forpuŝi, forpeli
respektar
respirar (tr/netr) -- spiri
respondar
responsar (netr) -- respondeci, prirespondi, (responsi)
restar
restaurar (tr) -- *restaŭri
restorar (tr) -- doni manĝaĵon kaj trinkaĵon por konsumo
restorerio -- restoracio
restriktar (tr) -- limigi
reto
retenar (tr) -- (re)teni
retro -- malantaŭen
retro- -- re-, retro-
revar
revelar (tr) -- malkaŝi; riveli
revenuo -- enspezo
revizar (tr) -- revizii~, (revizi~)
revuar
revuo
reza -- samnivela
rezervar
rezidar
reziduo -- restaĵo; rekremento
rezignar -- rezignacii
rezistar
rezolvar (tr) -- decidi~ (pri ago) [D beschliessen, E resolve (to), F résoudre (de faire)]
rezonar
rezultar
rezumar (tr) -- resumi
ri- -- re-
rikonocar (tr) -- rekoni
risanigar -- resanigi (malsanulon)
richa -- riĉa
ridar
ridetar
rigida
rimo
rimeno
rinforcar (tr) -- plifortigi
ringo
rinsar (tr) -- tralavi~, laveti~ (E rinse, F rincer)
ripar -- flankengliti, jori~
riskar
ritmo
rivo -- bordo
rivala
rivero
rizo
robo
robineto -- krano
roko
rolo
romano
romantika -- romantika
ronda
rostar
roto -- rado
rozo
rubando
rubarbo -- rabarbo
ruda -- kruda~, maldelikata, triviala~
ruinar (tr) -- ruinigi
rular (tr/netr) -- rul(iĝ)i
ruptar (tr) -- rompi
ruro -- kamparo
Rusia -- Rusujo, Rusio
rusto
rutino
sablo
saja -- saĝa
sako
sakra -- sankta (respekteginda)
salo
salado -- salato
salariar (tr) -- doni salajron al
salario -- salajro
salono
saltar
salutar
salvar (tr) -- savi
sama
sana
sandalo
sango
santa -- sankta (religie purega)
sapono -- sapo
saporar (netr) -- gust-umi
sarko -- ĉerko
sarklar (tr) -- sarki
sat -- sufiĉe, adekvate
satisfacar (tr) -- kontentigi, plenumi
saturdio -- sabato
sauco -- saŭco
savar (tr) -- scii
se
sedo -- postaĵo (de korpo)
sedimento
seduktar (tr) -- delogi
segar
seglo -- velo
segmento
segun -- laŭ
sekar (tr) -- tranĉeti~, sekci~, dividi tranĉete
sekreta
sekundo
sekura
selektar (tr) -- elekti~, (selekti), preni prefere
semar
semano -- semajno
semblar (netr) -- ŝajni
semino -- semo
sempre -- ĉiam
sen
sen-
senco
sendar
senso
sentar
sentimento
sep
separar (tr) -- apartigi, disigi, (separi)
septembro
sequar (tr) -- sekvi
serchar (tr) -- serĉi
serio
serioza
serpento
seruro
servar
severa
sezono
sfero
shamar (netr) -- honti
shancelar (netr) -- ŝanceliĝi
sharpo -- skarpo
shirmar (tr) -- ŝirmi
shokar (tr) -- ŝoki~, trafi~, bati~
shuo -- ŝuo
shultro -- ŝultro
sidar
siflar (tr/netr) -- fajfi
signo
signalar
signatar (tr) -- subskribi
signifikar (tr) -- signifi
sika -- seka
siklo -- falĉileto, serpo
silencar (netr) -- silenti (ne fari bruon)
silenco -- silento (manko de bruo)
silko
simbolo
simila
simpatiar (tr) -- havi simpation por
simpla
simptomo
sincera
singla -- ĉiu (D jeder einzelne, E each, I ciascuno, S cada)
singlu -- ĉiu (pron.)
singlutar (netr) -- spasmoplori, plorsingulti
singulara
sinioro -- moŝto~, sinjoro~
sinistra -- maldekstra
sinkar (tr/netr) -- malleviĝi, -igi, sink(ig)i
sinso -- direkto~, senco~ (A al B aŭ B al A sed ne ambaŭ)
sioro -- sinjoro, (-ino)
siorino -- sinjorino
siorulo -- sinjoro
siropo
sis -- ses
sisar (netr) -- sibli
sistemo
sitelo
situar (tr) -- loki, situigi
situeso -- situacio, situo
sivo -- kriblilo (fajna)
sive ... sive -- ĉu .. ĉu
sizar (tr) -- (ek)kapti~ (D ergreifen, E seize, F saisir, I afferrare, S agarrar)
skalo -- ŝtupetaro, *eskalo; skalo
skarsa -- malabunda
skemo
skeptika
skeptiko -- skeptikulo
skisar (tr) -- skizi
skolo -- lernejo; skolo~
skopo -- celo
skrapar
skreno -- ekrano
skribar
skrubo -- ŝraŭbo
skrubino -- ŝraŭbingo, boltingo
socio
sociala -- sociala, socia
societo
sociso -- kolbaso
sola
soldato
solena
solida
solitara -- sola~, izola~ (D einsam, abgelegen, E solitary, F solitaire, IS solitario)
solvar
somero
somito -- supro~, (supra) pinto
sonar
sonjar (netr) -- sonĝi
sonora
sordida -- malpura, *sordida
sorgar (tr) -- zorgi~
sorto -- speco
sospirar (netr) -- suspiri
sovaja -- sovaĝa
spaco
spado -- fosilo, ŝpato
sparar (tr/netr) -- ŝpari
speco -- specio
specimeno
spegulo
spektar
spektaklo
spensar (tr) -- elspezi
spico
spino
spiralo
spirito
splendida -- belega~, grandioza~, brila~ (D glänzend, E splendid, F splendide, I splendido, S espléndido)
spoliar (tr) -- rabi
sponjo -- spongo
spontana
sporto
spozo -- edz(in)o
spozino -- edzino
spozulo -- edzo
spumo -- ŝaŭmo
sputar (tr) -- kraĉi; (malsane) sputi
squatar (netr) -- kaŭri~, sidi sur siaj kalkanoj
stabila
stablo -- stalo
stacar (netr) -- stari
staciono -- stacio
stadio -- stadio~ = loko por konkursoj atletaj ktp
stagnar
stalo -- ŝtalo
standar (netr) -- farti
stando -- stato
standardo
stango
startar (tr/netr) -- ekfunkci(ig)i, start(ig)i
stato -- ŝtato
stelo
sterila
stilo
stipular (tr) -- kondiĉi
stofo -- ŝtofo
stoko
stomako
stono -- ŝtono (individua, ne la materio)
stopar (tr) -- ŝtopi
strado -- strato
stranja -- stranga
stranjera -- fremda
strato -- tavolo; *stratumo
strategio
streko
streta -- mallarĝa
strio -- tre streta kanelo
strikar
strikta
strukturo
studento
studiar (tr/netr) -- studi
stulo -- seĝo
stulta -- malsaĝa
stupida -- stult(eg)a
sturmar (netr) -- esti ŝtorma
sturmo -- ŝtormo
su -- si
sua -- sia
sub
subisar (tr) -- ricevi aŭ suferi devigite
subita
subjekto
substanco
substantivo
substitucar (tr) -- substitui
subterfujo -- artifiko~
subtila
sucedar (tr) -- sekvi sen interrompo
sucesar (netr) -- sukcesi
suciar (tr) -- zorgi~ pri, maltrankvili~ pri
sudo
sudoro -- ŝvito
suficar (netr) -- sufiĉi
suflar (tr/netr) -- blovi
sufokar
sufrar (netr) -- suferi
sugar (tr) -- suĉi
sugestar
suko
sukombar (netr) -- subfali
sukro -- sukero
sukusar (tr) -- skui
sulo -- grundo
sumo
suno
sundio -- dimanĉo
suolo -- plandumo
supo
supear (netr) -- manĝi manĝaĵon ĉirkaŭ noktomezo
super
superflua -- super-flua
superiora -- aŭtoritate supera
superstico -- superstiĉo
suplear (tr) -- anstataŭi provizore
suplemento
suplikar (tr) -- petegi humile (iun pri io)
suportar (tr) -- subteni~
supozar
supra
supre
supresar (tr) -- subpremi, malebligi ekziston de
sur
surda
surfaco -- supraĵo, surfaco
surprizar
surtuto -- varma palto
suspektar
suspendar (tr) -- pendigi
sustenar (tr) -- subteni~, helpi subteni
sustracionar (tr) -- subtrahi
susurar -- flustri
sutar (tr) -- kudri
suveniro -- memoraĵo
swichar (tr) -- ŝalti
ta (= ita) -- tiu (adj.)
tabelo
tablo
tabulo -- breto
tacar (tr/netr) -- diri nenion, silenti~
tala -- tia
tale -- tiel
talento
talioro -- tajloro
talismano
tam ... kam -- tiel ... kiel
tamen
tandem -- finfine (post longa atendo)
tanko -- tanko; fermita metala rezervujo
tanta -- tiom da, tioma, tiel multa
tante -- tiel (multe)
tapiso -- tapiŝo
tarda -- malfrua
tarto -- torto
taso
tasko
tastar (netr) -- palpi~, palpserĉi
taverno
tayo -- talio
teo
teatro
tedar
tegar
tekniko
tekto -- tegmento
telefonar (tr) -- telefoni
temo
tempo
temperamento
temperaturo
tempestar (netr) -- esti tempesto
tenar
tenaca
tendencar
tenebro -- mallumo, (tenebro)
tenera -- molkora, *tenera
tensar (tr) -- streĉi
tentar
tenua -- fajna~, maldika kaj longa
tepida -- varmeta, *tepida
tero
terpomo
terorar (netr) -- teruriĝi
texto -- teksto
ti (= iti) -- tiuj (pron.)
til -- ĝis
timar (tr) -- timi (intelekte, racie)
timida -- malaŭdaca, (timida)
tipo
tirar
titilar (tr) -- tikli
titulo -- titolo
to (= ito) -- tio
toalo -- tualeta tuko, mantuko~, bantuko~
tolerar
tomato
tombo
tono
tondar
tondrar
torcho -- torĉo
tordar
torento
torso
torto -- pasteĉo~ (ronda)
tota -- tuta
tra
tradukar
trafiko
tragedio
trahizar (tr) -- perfidi
traktar
tranchar (tr) -- tranĉi (tute tra)
tranquila -- trankvila
trans
transferar (tr) -- transigi, transdoni
translucida -- diafana
transportar
transversa
trasar (tr) -- desegni skize
traurar (netr) -- funebri
tre
treko -- vojstreko
treliso -- latiso
tremar
treno -- trajno
tresto -- stablo
trezoro
tri
trikotar (tr) -- triki
trista -- malgaja, malĝoja, (trista)
tro
trogo
trompar
trotuaro
trovar
truo
trublar (tr) -- maltrankviligi
trunko
trupo
tu -- ci
tua -- cia
tualetar (netr) -- fari tualeton (lavon ktp)
tualet.-tuko -- mantuko; bantuko
tualeto
tubo
tufo
tuko
tunelo
turo -- rondvojaĝo
turisto -- turisto
turbo -- amaso (de personoj)
turmo -- turo
turnar (tr/netr) -- turn(iĝ)i
tusar
tushar (tr) -- tuŝi
ube -- kie
ucelo -- birdo
-ul- -- (Sufikso por virsekso, masklo; ekz fratulo, kuzulo, bovulo, katulo (virkato))
ula -- iu (adj.)
ulo -- io
ulu -- iu (pron.)
ultra -- kroma, plua
ultre -- krom
un -- unu
unesma -- unua
unfoye -- unufoje
-un- -- -er-
unanima -- unuanima
unglo -- ungo
unguento -- ŝmiraĵo, ungvento
uniforma -- unuforma, samaspekta
uniformo
unika
unionar (tr) -- unuigi
uniono -- unuiĝo, unio
-ur- -- (Sufikso uzata kun verba radiko por indiki produkton aŭ rezulton; ekz aperturo, fotografuro, kopiuro, skulturo)
uragano
urbo
urjar (netr) -- urĝi~
urso
Usa -- Usono
utensilo -- (praktika) ilo, ujo
utila
-uy- -- -uj-
uzar
vagono
vakar
vakancar (netr) -- ferii
vakua -- malplena
valo
valida
valizo
valorar
vana
vango
vanitato -- vantemo~ (D Eitelkeit, E vanity, F vanité, I vanità, S vanidad)
vaporo
varo
variar
varma
varsar (tr) -- verŝi
vartar (tr) -- atendi~ (ĝis okazo)
vasta
vaxo -- vakso
vazo
vehar (netr) -- veturi (en veturilo)
veino -- vejno
vekar (netr) -- vekiĝi
vekigar (tr) -- veki
venar
vendar
veneno
venerdio -- vendredo
ventar (netr) -- blovi~
vento
ventro
vera
verbo
verda
vergo
vers -- al~, en direkto al (D ige(ge)n, auf ... zu, nach ... zu, -wärts, E toward(s), F vers, S hacia, I verso)
versiono -- versio
vertikala
vertuo -- virto
vervo
vespo
vespero
vesto
vestono -- jako (vira)
vetero
veturo -- veturilo
vexar (tr) -- ĉagreni
vi -- vi (plurala)
via -- via (plurale)
vibrar
vice -- anstataŭ
vicio -- malvirto
vicina -- najbara
vidar
vidva
vigoro -- fortikeco (korpa, spirita)
viktimo
vilajo -- vilaĝo
vino
vinagro
vinkar (tr) -- venki
vintro
violentar (tr) -- perforti (iun)
violento -- perforto~
viro
visar (tr/netr) -- ŝraŭbi
vishar (tr) -- viŝi
vitro
vivar
vivaca -- viveca, verva
vizar (tr/netr) -- celi
vizajo -- vizaĝo
vizitar
voco -- voĉo
vokar
vokalo
volar
volumino -- volumeno
voluntar (netr) -- volonte ... -i, volonti
volvar
vorto
votar (tr/netr) -- voĉdoni
voyo -- vojo
voyajar (netr) -- vojaĝi
vu -- vi (singulara)
vua -- via (singulare)
vulgara
vundar
westo -- okcidento
ya -- ja
yaro -- jaro
ye -- je
yen -- jen
yes -- jes
yuna -- juna
yuno -- junul(in)o
yunino -- junulino
yunulo -- junulo
yuro -- rajto
yusta -- justa
zero -- nulo
zono

}}}</pre>
</div>
<div title="Esperanto-Ido" creator="YourName" modifier="YourName" created="201401011609" modified="201502020537" tags="dic" changecount="3">
<pre>{{{
A
abako abako
abdiki abdikar (tr)
abdomeno abdomino
abelo abelo
abio abieto
Abisenio Abisinia
abismo abismo
abneg(aci)i abnegar (tr)
abol(ici)i abolisar (tr)
abomeni abominar (tr)
aboni abonar (tr)
aborigena aborijena
aborigeno aborijeno
aborti abortar (netr)
abrikoto abrikoto
abrupta abrupta
absceso abceso
absinto absinto
absoluta absoluta
absolvi absolvar (tr)
absolvi remisar (tr)
absorbi absorbar (tr)
abstini abstenar (tr)
abstrakti abstraktar (tr)
absurda absurda
abundi abundar (netr)
abutmento kontraforto
acerba (p) acerba
acero acero
acetileno acetileno
acida acida
acido acido
aĉeti komprar (tr)
adapti adaptar (tr)
adekvata adequata
adepto adepto
adheri adhelar (netr)
adiaŭi adiar (tr)
adicii adicionar (tr)
adjektivo adjektivo
adjutanto adjutanto
administri administrar (tr)
administri jerar
admiralo admiralo
admiri admirar (tr)
admoni exhortar (tr)
admoni remonstrar (netr)
adoleski adolecar (netr)
adolta adulta
adonido adoniso*
adopti adoptar (tr)
adori adorar (tr)
adori veneracar (tr)
adreso adreso
Adriatiko Adriatika
adstringa astriktiva
adstringagusta acerba
adulti adulterar (netr)
adverbo adverbo
adversa (p) adversa
advokato advokato
aero aero
aerolito aerolito 
aeroplano aeroplano
aerumi aerizar (tr)
afabla afabla
afekcii afektar (tr)
afekti afektacar (x)
afekti fingar (tr)
afero afero
afero kozo
Afganio Afganistan
afgano Afgano (tr)
afikso afixo
afiŝo afisho
aflikti afliktar (tr)
aforismo aforismo
afranki afrankar (tr)
Afriko Afrika
afusto afusto
agaci agacar (tr)
agato agato
agendo agendo
agento agento
agi agar (x)
agi oportune temporisar (netr)
agiti agitar (tr)
aglo aglo
aglutini aglutinar (tr)
agnoski agnoskar (tr)
agonii agoniar (netr)
agrabla agreabla
agrafo agrafo
agro agro
agronomio agronomio
agronomo agronomo
aĝi evar (x)
aha! ah!
aj! ah!
ajlo alio
ajuto ajuto
akacio akacio
akademio akademio
akaro akaro
akaro zeko
akceli acelerar (tr)
akcento acento
akcepti aceptar (tr)
akcepti admisar (tr)
akcesora acesora
akcidenti acidentar (tr)
akcio aciono
akcipitro acipitro
akiri aquirar (tr)
aklami aklamar (tr)
akno akneo
akompani akompanar (tr)
akordi akordar (netr)
akordiono akordeono
akoro akoro
akra akra
akra akuta
akra bitra
akrido akrido
akrobato akrobato
akselo axelo
aksiomo axiomo
akso axo
aktiva aktiva
akto akto
aktoro aktoro
aktuala aktuala
akumuli akumular (tr)
akupunkturi akupuntar* (tr)
akurata akurata
akustiko akustiko
akuŝi akushar (tr)
akuta akuta
akuzativo akuzativo
akuzi akuzar (tr)
akv(um)i arozar (tr)
akvarelo aquarelo
akvario aquario
akvo aquo
akvodukto aquedukto
akvolilio nenufaro
akvomelono aquomelono
al a(d)
alarmi alarmar (tr) 
alaŭdo alaudo
Albanio Albania
albumeno albumeno
albumo albumo
aldoni adjuntar (tr)
aldoni anexar (tr)
alegorio alegorio
aleo aleo
Aleutoj Aleuti
alfabeto alfabeto
algebro algebro
algo algo
Alĝerio Aljeria
Alĝero Aljer
alĝustigi adjustigar (tr)
alĝustigi ajustar (tr)
alia altra
alianci aliancar (tr)
alibio alibio
aliformigi transformar (tr)
aligatoro aligatoro
aliigi alterar (tr)
alkalo alkalio
alkaloida alkaloida
alkaloido alkaloido
alkemio alkemio
alkoholo alkoholo
allogi atraktar (tr)
almanako almanako
almenaŭ adminime
almozdoni almonar (netr)
almozpeti mendikar (tr)
alno alno
alo alo
aloji aloyar (tr)
aloo aloo
alpako alpako*
Alpoj Alpi
alporti adportar (tr)
alporti querar (tr)
alproprigi sustraktar (tr)
alta alta
altaro altaro
alterni alternar (netr)
altetaksi prizar (tr)
altiri atraktar (tr)
altitudo altitudo
altrudi impozar (tr)
aludi aludar (tr)
alumeto alumeto
aluminio aluminio
aluno aluno
alutili nocar (tr)
alveni arivar (netr)
alvoki advokar (x)
alvoki advokar (tr)
alvoki sumnar (tr)
amalgamo amalgamo
amara bitra
amaso amaso
amatoro amatoro
amazono amazono
ambasado ambasado
ambasadoro ambasadisto
ambaŭ amba
ambaŭsenca ambigua
ambicii ambiciar (tr)
ambigua ambigua
amboso amboso
ambulanco ambulanco
amebo amebo
ameli starchar (tr)
amelo amilo
amen! amen!
Ameriko Amerika
amfibia amfibia
amfibioj amfibia
ami afecionar (tr)
ami amar (tr)
ami amorar (tr)
amiko amiko
amindumi kurtezar (tr)
amnestii amnestiar (tr)
amoniako amoniako
amori amorar (tr)
ampleksa ampla 
ampleksa kapaca
amplitudo amplitudo
ampolo ampulo
amputi amputar (tr)
amuzi amuzar (tr)
anakronismo anakronismo
analfabeta iliterata
analfabeto iliterato
analizi analizar (tr)
analoga analoga
Anamo Anam
ananaso ananaso
anarkio anarkio
anaso anado
anatom(netr)o anatom(netr)o
Andoj Andi
Andoro Andora
anekdoto anekdoto
aneksi anexar (tr)
anemio anemio
anemono anemono
anestezi anesteziar (tr)
angilo anguilo
angio vaskulo
angla Angla
Anglio Anglia
anglo Anglo
Angolo Angola
angori angorar (netr)
angulo angulo
anĝelo anjelo
anheli anhelar (netr)
animalo animalo
animo anmo
anjono aniono
ankaŭ anke
ankoraŭ ankore
ankro ankro
ano ĉino Chinia
anodo anodo
anomalia anomala
anonci anuncar (tr)
anonima anonima
ansero ganso
anso anso
anstataŭ vice
anstataŭi (ruze) suplantar (tr)
anstataŭi remplasar (x)
anstataŭi suplear (tr)
anstataŭigi remplasar (x)
antaŭ (spaco) avan
antaŭ (tempo) ante
antaŭ koram
antaŭ ~en adavan
antaŭ(iĝ)i avancar (x)
antaŭa priora
antaŭdiri predicar (tr)
antaŭe olim
antaŭenpuŝi propulsar (tr)
antaŭhieraŭ prehiere
antaŭi precedar (tr)
antaŭigi avancar (x)
antaŭlasta prelasta
antaŭnomo prenomo
antaŭpagi prepagar (tr)
antaŭscenejo avantalo
antaŭtuko avantalo
antaŭurbo preurbo
antaŭurbo suburbo
antaŭvorto prefaco
anteno anteno
anticipi anticipar (tr)
antidoto antidoto
antikva anciena
antikva antiqua
Antiloj Antili
antilopo antilopo
antipatii antipatiar (tr)
antisepsi antisepsiar (tr)
antologio antologio
antropologio antropologio
anuso anuso
aorto aorto
aparato aparato
aparta aparta
aparta partikulara 
aparta singulara
apartamento apartamento
aparteni (al) apartenar (netr) (ad)
apatio apatio
apel(aci)i apelar (netr)
apenaŭ apene
Apeninoj Apenini
aperi aparar (netr)
aperti (p) apertar (tr)
apetiti apetitar (tr)
aplaŭdi aplaudar (tr)
apliki aplikar (tr)
aplombo aplombo
apogi apogar (tr)
apologii apologiar (tr)
apopleksio apoplexio
apostrofo apostrofo
apoteko apoteko
aprilo aprilo
apro apro
aprobi aprobar (tr)
apud apud
apud proxim
apuda kontigua
araba Araba
Arabio Arabia
arabo Arabo
araneo araneo
aranĝi aranjar (tr)
aranĝi jerar
aranĝi harojn kuafar (tr)
arbaro foresto
arbaro silvo
arbitr(ec)o arbitrio
arbitracii arbitrar (tr)
arbo arboro
arbŝelo kortico
arbusto arbusto
ardeo herono
ardezo ardezo
ardi ardorar (netr)
areo areo
aresti arestar (tr)
argano krano
Argentino Arjentinia
argilo argilo
argono argono
argumenti argumentar (netr)
arĝenta arjento,
arĝento arjento,
ario ario
aristokrata aristokrata
aritmetiko aritmetiko
arkado arkado
arkaika arkaika
arkaismo arkaismo
arkana arkana
arkeolog(netr)o arkeolog(netr)o
arkipelago arkipelago
arkitekturo arkitekturo
arkivo arkivo
arko arko
Armenio Armenia
armeo armeo
armilo armo
aro aro
arogi arogar (tr)
arseno arseno
artefar(ad)o artifico
arterio arterio
artiko artiko
artikolo artiklo
arto arto
asasini asasinar (tr)
asbesto asbesto
asekuri asekurar (tr)
asepsa asepta
aserti afirmar (tr)
aserti asertar (tr)
asfalto asfalto
asidua asidua
asigni asignar (tr)
asimili asimilar (tr)
Asirio Asiria
askarido askarido
asocii asociar (tr) 
asparago asparago
aspekti aspektar (netr)
aspergi aspersar (tr)
aspiri aspirar (tr)
aspiri hungrar (netr)
aspra aspera
asterio asterio
astigmata astigmata
astmo astmo
astro astro
astrolog(netr)o astrolog(netr)o
astronom(netr)o astronom(netr)o
ataki atakar (tr)
atako stroko
ateismo ateismo
atenci atentar (tr)
atendi vartar (tr)
atenti atencar (tr)
atestanto testo
atesti atestar (tr)
atingi arivar (netr)
atingi atingar (tr)
atingi rajuntar (tr)
Atlantiko Atlantiko
atlaso atlaso
atlaso mapo
atmosfero atmosfero
atomo atomo
atribui atribuar (tr)
atuto trumpo
avanci avancar (x)
avancigi avancar (x)
avantaĝo avantajo
avara avara
avelo avelano
aveno aveno
aventuri aventurar (netr)
avenuo avenuo
averso averso
averti avertar (tr)
aviadi aviacar (netr)
avida avida
avido luxurio
avino avino
avizi avizar (tr)
avizi notifikar (tr)
avo avulo
aŭ o(d)
aŭdaci audacar (tr)
aŭdi audar (tr)
aŭdienco audienco
aŭditoro auditoro
aŭguri augurar (tr)
aŭgusto agosto
aŭkcii aucionar (tr)
aŭreolo aureolo
aŭriklo aurikulo
aŭroro auroro
aŭskulti askoltar (tr)
aŭskultumi auskultar (tr)
aŭspicio auspico
Aŭstralio Australia
Aŭstrio Austria
aŭtentika autentika
aŭto(mobilo) automobilo
aŭtodidakto autodidakto
aŭtografa autografa
aŭtografo autografo
aŭtokrato autokrato
aŭtomato automato
aŭtonoma autonoma
aŭtoritato autoritato
aŭtoro autoro
aŭtuno autuno
azeno asno
azilo azilo
Azio Azia
azukio azukio*
B
babilaĉi barbuliar (tr)
babili babilar (netr)
bacilo bacilo
bagatelo bagatelo
bajo bayo 
bajoneto bayoneto
bakalaŭro bachelero
baki bakar (tr)
bakŝiŝo gelto
bakterio bakterio
balado balado
balai balayar (tr)
balai skandar (tr)
balasto balasto
balbuti balbutar (x)
balbuti stoterar (x)
baldakeno baldakino
baldaŭ balde
baledo baleto
baleno baleno
baleto baleto
balkono balkono
balo balo
balono balono
Balta Maro Baltiko
balteo baldrio
balustrado balustrado
balzamino balzamino
balzamo balzamo
bambuo bambuo
banano banano
bandaĝo bandajo
banderolo banderolo
bandito bandito
bando bando
bang! plump!
Bangladeŝo Bangladesh
bani balnar (tr)
banko banko
bankostumo malyoto
bankroti bankrotar (netr)
bankroti faliar (x)
bapti baptar (tr)
barako barako
barakti baraktar (netr)
barbara barbara
barbaro barbaro
barbo barbo
bardano bardano
barelo barelo
bari barar (tr)
bari inkombrar (tr)
barikado barikado
barilo fenco
bario bario
baritonisto baritono
barko barko
baroka baroka
barometro barometro
barono barono
basbalo basbalo*
baseno baseno
basko basko
baskuli baskular (netr)
bastardo bastardo
bastono bastono
batali bataliar (netr)
bataliono bataliono
batato patato
baterio baterio
bati batar (tr)
bato stroko
batpremi tampar (tr)
Bavario Bavaria
bavi (p) bavar (netr)
baŭmi kabrar (netr)
bazaro bazaro
bazo bazo
beata beata
bedaŭri regretar (tr)
begonio begonio
beko beko
bela bela
belega splendida
belga Belga
Belgio Belgia
belgo Belgo
belgrajno spoto
bendo bendo
Bengalo Bengal
beni benedikar (tr) 
benigna benigna
benko benko
benzino benzino
Berberio Berberia
Bermudoj Bermudi
bero bero
besto bestio
betono betono
betulo birko
bezoni bezonar (tr)
Biblio biblo
bibliofilo bibliofilo
bibliografio bibliografio
biblioteko biblioteko
biciklo biciklo
bieno domeno
biero biro
bifsteko bifsteko
bilanco bilanco
bilardo biliardo
bildo imajo
bileto bilieto
biliono biliono
bindi bindar (tr)
binoklo bilorneto
biografio biografio
biologio biologio
birdo ucelo
Birmo Burma
bis bis
biskvito bisquito
bivaki bivakar (netr)
blanka blanka
blasfemi blasfemar (tr)
blato blato
blazono blazono
blazonŝildo skudo
bleki bramar (netr)
blinda blinda
blindetigi dazlar (tr)
bloki blokusar (tr)
bloko bloko
blonda blonda
blovi suflar (netr)
blua blua
bluzo bluzo
boaco rentiro
boato batelo
bobeli ebuliar (netr)
bobeno bobino
Bohemio Bohemia
boji aboyar (netr)
bojkoti boikotar (tr)
boksi boxar (tr)
boleto cepo
boli boliar (netr)
Bolivio Bolivia
bolto bolto
bombardi bombardar (tr)
bombo bombo
bombono bonbono
bona bona
bonedo boneto
bonefika salutara
bonvola benigna
bonzo bonzo
bordo bordo
bordo rivo
bori borar (tr)
Borneo Borneo
borso borso
bosko bosko
botaniko botaniko
boteleto fialo
botelo botelo
boto boto
bova pokso vacino
bovleto eskudelo
bovo bovo
braceleto braceleto
braĉo bracho
braĝo brezo
brako brakio
branĉeto ramo
branĉo brancho
brando brandio 
brankardo kamilo
branko brankio
brano brano
brasiko kaulo
brava brava
Brazilo Brazilia
bremo bremo
bremsi klemar (tr)
bremso freno
breto tabulo
Bretonio Bretonia
bretono Bretono
brido brido
brigado brigado
briko briko
brili brilar (netr)
Britio Britania
broĉo brocho
brodi brodar (tr)
brodkasti brodkastar (tr)
brokaĵo brokato
brokanti brokantar (netr)
brokato brokato
bromo bromo
bronkito bronkito
bronko bronkio
bronzo bronzo
brosi brosar (tr)
broŝuri broshar (tr)
brovo brovo
brui bruisar (netr)
bruli brular (x)
bruligi brular (x)
bruligi kombustar (tr)
brullignaĵo brando
brulligno por kremacio rogo
brulumigi inflamar (tr)
brulvundi eskaldar (tr)
bruna bruna
brusto pektoro
bruto bruto
bubalo bufalo
bubo bubo
buĉi buchar (tr)
budaismo budhismo*
bufo rospo
bufro bufro
buĝeto budjeto
bukedo buketo
buklo loklo
buklo treso
buko buklo
bukso buso
bulbo bulbo
buldogo buldogo
Bulgario Bulgaria
bulteno buletino
bunta (p) bunta
burgo burgo
burĝo borgezo
burĝono burjono
burleska burleska
burokrato burokrato
busolo busolo
busto busto
buŝo boko
Butano Butan
butero butro
butiko butiko
butono butono C
cedi cedar (tr)
cedi sukombar (netr)
cedro cedro
Cejlono Ceylon
cekumo ceko
celebri celebrar (tr)
celi apuntar (tr)
celi vizar (x)
celiba celiba
celo skopo
celtido celtiso*
celuloido celuloido
celulozo celuloso 
cemento cemento
cent cento
centaŭreo centaureo
centimetro centimetro
centimo centimo
centrifugi centrifugar (tr)
centro centro
centurio centurio
cenzuri censurar (tr)
cepo onyono
ceramiko ceramiko
cerbo cerebro
cerebelo cerebelo
ceremonio ceremonio
certa certa
cervo cervo
cetacoj cetaceo
cetero cetero
ci tu
cidonio quingo
cidro cidro
cifero cifro
cigano cigano
cigaredo sigareto
cigaro sigaro
cigno cigno
cikado cikado
cikatro cikatro
ciklameno ciklameno
ciklo ciklo
ciklono ciklono
cikonio cikonio
cikorio cikorio
cilindro cilindro
cilio cilio
cimbalo cimbalo
cimo cimo
cinabro cinabro
cinamo cinamo
cindro cindro
cinik(ul)o ciniko
cinocefalo cinocefalo
cipreso cipreso
Cipro Chipro
cirkelo kompaso
cirklo cirklo
cirko cirko
cirkonstanco cirkonstanco
cirkulero cirkulero
cirkuli cirkular (netr)
cirkvito cirkuito
ciro cirajo
cis cis
cisterno cisterno
cisterno tanko
citi citar (tr)
citi referar (x)
citrono citrono
civila civila
civilizi civilizar (tr)
civito civito
Ĉ
Ĉado Chad
ĉagreni vexar (tr)
ĉagreniĝi chagrenar (netr)
ĉagreniĝi despitar (netr)
ĉambelano chambelano
ĉambro chambro
ĉamo chamo
ĉampano champanio
ĉampiono championo
ĉano hano
ĉapelo chapelo
ĉapitro chapitro
ĉapo boneto
ĉapo chapo
ĉapo kofio
ĉar nam
ĉarlatano sharlatano
ĉarmi charmar (tr)
ĉarniro charniro
ĉaro charo
ĉarpenti karpentar (tr)
ĉarpenti menuzar (netr) 
ĉarto charto
ĉasaĵo vildo
ĉasbesto vildo
ĉasbirdo vildo
ĉasi chasar (x)
ĉasta chasta
ĉe an
ĉe che
ĉeestanta prezenta
ĉeesti al asistar (tr)
ĉefo chefo
ĉefo kapo
Ĉeĥoslovakio Chekoslavakia
ĉeko cheko
ĉelo celulo
ĉemizo kamizo
ĉeno kateno
ĉerizo cerizo
ĉerko sarko
ĉerpi cherpar (tr)
ĉesi cesar (x)
ĉesigi (sangon) estanchar (tr)
ĉesigi cesar (x)
ĉevalo kavalo
ĉiam sempre
ĉiea ubiqua
ĉielo cielo
ĉifi krumplar (tr)
ĉifono rago
ĉifono shifono
ĉifri chifrar (tr)
ĉikani shikanar (netr)
Ĉilio Chili
ĉilo chilo
ĉimpanzo chimpanzeo
Ĉinio Chinia
ĉio singla
ĉipa chipa
ĉirimeno chirimeno*
ĉirkaŭ cirkum
ĉirkaŭfrazi perifrazar (tr)
ĉirkaŭi cernar (tr)
ĉirkaŭi cirkondar (tr)
ĉirkaŭi embracar (tr)
ĉirkaŭpremi embracar (tr)
ĉirpi kantar (tr)
ĉiu singla
ĉiu omna
ĉizi cizelar (tr)
ĉizojo cizo
ĉokolado chokolado
ĉu ka(d)
ĉu�c ĉu�c sive�csive�c
D
daimio daimio*
daktilo datelo
dalio dalio
daltonismo daltonismo
damasko damasko
damni damnar (tr)
damo damo
dana Dana
danci dansar (x)
dandaĉa fatua
dando dandio
danĝero danjero
Danio Dania
danki dankar (tr)
Danlando Dania
dano Dano
Danubo Danubio
dativo dativo
dato dato
datreveno aniversario
daŭra perena
daŭra perpetua
daŭri durar (netr)
de (genitivo) di
de (post pasiva verbo) da
de (starta punkto) de
deartikigi luxacar (tr)
debati debatar (tr)
debati kontroversar (tr)
debeto debeto 
debila debila
debuti debutar (netr)
debutigi introduktar (tr)
decembro decembro
deci decar (netr)
decidi decidar (x)
decidi rezolvar (tr)
decilitro decilitro
decimala decimala
decimalo decimalo
deĉifri dechifrar (tr)
dediĉi dedikar (tr)
dediĉi konsakrar (tr)
dedukti deduktar (tr)
defali kaj kreski (haroj) muar (netr)
defendi defensar (tr)
deficito deficito
defii defiar (tr)
definitiva definitiva
deflankiĝi digresar (netr)
degeneri degenerar (netr)
degni degnar (netr)
dehaki emundar (tr)
deĵori dejurar (netr)
deĵori por noktogardo vigilar (netr)
dek dek
dekduo dekeduo
deklami deklamar (tr)
deklari deklarar (tr)
deklari enuncar (tr)
deklinacii deklinar (netr)
deklivo (malsupren) pento
deklivo (supren) rampo
deklivo taluso
dekokti dekoktar (tr)
dekolti en krescenta formo
sesgar (tr)
dekor(aci)i dekorar (tr)
dekreti dekretar (tr)
dekstra dextra
delegi delegar (tr)
delfeno delfino
delikata delikata
delikti deliktar (netr)
delikti kontravencar (x)
deliri delirar (netr)
delogi kaptacar (tr)
delogi seduktar (tr)
demagogio demagogio
demamigi ablaktar (tr)
demanda interogativa
demandi demandar (tr)
demandi inquestar (tr)
demandi questionar (x)
demandvorto interogativa
demarŝi demarshar (netr)
demisii demisionar (netr)
demokrata demokrata
demokrata demokrato
demokratio demokratio
demono demono
demonstri demonstrar (tr)
denominatoro denominatoro
densa densa
densejo busho
dento dento
departemento departmento
dependi dependar (netr)
depeŝo depesho
deponi depozar (tr)
depremi depresar (tr)
depreni privacar (tr)
deputi deputar (tr)
derivi derivar (tr)
desegni desegnar (tr)
deserto desero
desinfekti desinfektar (tr)
deskvamigi exfoliar (tr)
despoto despoto
destini destinar (tr)
deŝiri koliar (tr)
detala endetala
detalo detalo
detektivo detektivo 
deteni ditenar (tr)
determini determinar (tr)
detranĉi rekortar (tr)
detrui abatar (tr)
detrui demolisar (tr)
detrui destruktar (tr)
devi devar (tr)
devi mustar (netr)
devigi koaktar (tr)
devigi obligar (tr)
devii deviacar (x)
deviigi deviacar (x)
devizo devizo
devori devorar (tr)
devot(ec)o devoco
devota devota
dezerta dezerta
dezerto dezerto
deziri dezirar (tr)
diabeto diabeto
diablo diablo
diafana diafana
diafana limpida
diafragmo diafragmo
diagnozi diagnozar (tr)
diagonala diagonala
diagonalo diagonalo
diagramo diagramo
dialekto dialekto
dialogi dialogar (netr)
diamanto diamanto
diametro diametro
dianto dianto
diastazo diastazo
diboĉi debochar (netr)
dieto dieto
difekti avariar (tr)
difekti domajar (tr)
difekti lezar (tr)
difekti spoliar (tr)
difekto defekto
diferenci diferar (netr)
diferenci diferenciar (x)
diferencialo diferencialo
diferencigi deferencar (tr)
diferencigi diferenciar (x)
difini definar (tr)
difterio difterio
diftongo diftongo
difuzi difuzar (tr)
digesti digestar (tr)
digna digna
digo digo
digo rivo
dika dika
dika kaj longa grosa
dikti diktar (tr)
dilati dilatar (tr)
dilemo dilemo
dileti diletar (tr)
diligenta diligenta
dilui dilutar (tr)
diluvo diluvio
dimanĉo sabato
dimanĉo sundio
dimensio dimensiono
dinamiko dinamiko
dinamito dinamito
dinamo dinamo
dinastio dinastio
dio deo
dioptrio dioptrio
diplomatio diplomaco
diplomo diplomo
direkte al vers
direkti direktar (tr)
direkti guvernar (tr)
direkti imperar (tr)
direkto direciono
direkto sinso
diri dicar (tr)
disciplini diciplinar (tr)
disciplini reprimandar (tr)
disĉiplo dicipulo
disenterio disenterio
diserti disertar (netr) 
disigi separar (tr)
disipi (p) disipar (tr)
disko disko
diskonti diskontar (tr)
diskreta diskreta
diskursi diskursar (netr)
diskuti diskutar (tr)
dispepsio dispepsio
disponi disponar (tr)
dispozicii dispozar (tr)
dispremi aplastar (tr)
disputi disputar (netr)
disradii emisar (tr)
distili distilar (tr)
distingi dicernar (tr)
distingi distingar (tr)
distri distraktar (tr)
distribui distributar (tr)
distrikto distrikto
disvastigi propagar (tr)
disvolvi developar (tr)
diveni divinar (tr)
diversa diversa
diverskolora bunta
dividendo dividendo
dividi dividar (tr)
divizio diviziono
divorci desmariajar (tr)
divorci divorcar (netr)
do do
docento docento
dogano dogano
dogmo dogmato
doko doko
doktoro doktoro
doktrino doktrino
dokumento dokumento
dolaro dolaro
dolĉa dolca
dolori dolorar (netr)
domini dominacar (tr)
Dominiko Dominika
domo domo
donaci donacar (tr)
donaci prizentar (tr)
doni donar (tr)
dorloti dorlotar (tr)
dormi dormar (netr)
dornarbeto espino
dornarbusto espino
dorno dorno
dorso dorso
doti dotar (tr)
dozo dozo
dragi dragar (tr)
drako drako
dramo dramato
drapiri drapirar (tr)
drapo drapo
drasta drastika
draŝi drashar (tr)
dreliko trelicho
dresi dresar (tr)
dresi entrenar (tr)
drilo drilo
drivi driftar (netr)
drogherbo herboro
drogo drogo
dromedaro dromedaro
dromo treko
dronigi dronar (tr)
du du
dubi dubitar (tr)
dueli duelar (netr)
dueto dueto
duko duko
dulorneto bilorneto
dum dum
dumviva perpetua
dungi employar (tr)
dungi engajar (tr)
duodeno duodenumo
duon- (parenceco) stifa
duoncirklo micirklo
duoninsulo peninsulo
duonjaro semestro 
duonluno miluno
duplikato duplikato
dupo (p) dupo
duŝi dushar (tr)
E
ebena plana
ebena reza
ebla posibla
ebla potenciala
eble forsan
ebonito ebonito
ebono ebeno
ebria ebria
eburo ivoro
eĉ mem
edelvejso edelweiss
edemo edemo
Edeno edeno
edifi edifikar (tr)
edikti ediktar (tr)
edro edro
eduki edukar (tr)
edz(in)igi mariajar (tr)
edzino spozino
edzo spozulo
efekto efekto
efemera efemera
efemero efemero
efiki efikar (netr)
egala egala
egala para
Egiptio Egiptia
egoismo egotismo
egoo ego
egreto egreto*
eĝorompi kontravencar (x)
eĥo eko
ekbrilo cintilo
ekbruligi incendiar (tr)
ekino ekino
ekipi equipar (tr)
ekiri ekirar (netr)
eklezio eklezio
eklipsi eklipsar (tr)
ekmordi snapar (tr)
ekonomiko ekonomiko
ekonomio ekonomio
ekonomo ekonomo
ekscelenco ecelenco
ekscentra ecentrika
ekscesi ecesar (x)
eksciti acendar (tr)
eksciti ecitar (tr)
eksiĝi retretar (netr)
ekskomuniki exkomunikar (tr)
ekskoriaciigi exkoriar (tr)
ekskremento exkremento
ekskursi digresar (netr)
ekskursi exkursar (netr)
ekskuzi exkuzar (su)
ekspansii expansar (x)
ekspansiigi expansar (x)
ekspedi expediar (tr)
ekspedicio expediciono
ekspekti expektar (tr)
eksperimenti experimentar (x)
eksperta experta
ekspertizi expertizar (tr)
eksplicita explicita
eksplodi explozar (netr)
ekspluati explotar (tr)
eksponi expozar (tr)
eksporti exportacar (tr)
ekspozicii expozar (tr)
ekspreso espreso
ekstazi extazar (netr)
ekster exter
eksterlanda exterlanda
ekstermi exterminar (tr)
eksterordinara extraordinara
ekstra extra
ekstrakti extraktar (tr)
ekstrema extrema 
eksudi exudar (x)
eksudigi exudar (x)
ekvacio equaciono
Ekvadoro Equador
ekvatoro equatoro
ekvilibri equilibrar (netr)
ekvivalenta para
ekvizeto equiseto*
ekzakta exakta
ekzalti exaltar (tr)
ekzameni examenar (tr)
ekzantemo exantemo
ekzekucii exekutar (tr)
ekzekuti exekutar (tr)
ekzemo ekzemo
ekzemplero exemplero
ekzemplo exemplo
ekzerci exercar (tr)
ekzili exilar (tr)
ekzisti existar (netr)
ekzorci exorcisar (tr)
ekzotika exotika
el ek
elaĉeta mono ransono
elaĉeti redemtar (tr)
elartikigi luxacar (tr)
elasta elastika
elbari exkluzar (tr)
elbori exkavar (tr)
elĉerpi exhaustar (tr)
eldoni editar (tr)
eldoni emisar (tr)
elefanto elefanto
eleganta eleganta
elegio elegio
elekti elektar (tr)
elekti per definitiva voĉdono
balotar (tr)
elektro elektro
elektrodo elektrodo
elektrolito elektrolito
elektrono elektrono
elementa primara
elemento elemento
elevatoro elevatoro
elfari exekutar (tr)
elfini finisar (tr)
elflui ekfluar (netr)
elfo elfo
eligi exhalar (tr)
elimini eliminar (tr)
elipso elipso
eliri ekirar (netr)
elito elito
elizii elizionar (tr)
elĵeti ejektar (tr)
elkavigi exkavar (tr)
elkonsumi exhaustar (tr)
elmontri estalar (tr)
elokventa eloquenta
elpagi expiacar (tr)
elpendaĵo insigno
elspezi spensar (tr)
elspiri expirar (netr)
elstari saliar (netr)
elŝeliĝi muar (netr)
eltiri extraktar (tr)
eltiri rakar (tr)
eltordi extorsar (tr)
eltrudi extorsar (tr)
eluzitaĵo fripo
emajlo emalio
emancipi emancipar (tr)
emani emanar (netr)
embarasi embarasar (tr)
embargi embargar (tr)
emblemo emblemo
embrio embriono
emerĝi emersar (netr)
emerita emerita
emfazi emfazar (tr)
eminenco eminenco
eminenta eminenta
emisii emisar (tr)
emociiĝi emocar (netr)
empirio empiriko 
emulsii emulsar (tr)
en en
en po
en la ĉeesto de koram
en la tempo de lor
en prezo de po
en unu vico tandeme
en ~n aden
enboteligi enboteligar (tr)
encefalo encefalo
enciklopedio enciklopedio
endemio endemio
endosi indosar (tr)
energio energio
enfaldi trusar (tr)
enflui enfluar (x)
enhavi kontenar (tr)
enigmo enigmato
eniri enirar (x)
enkalkuri egardar (tr)
enketi inquestar (tr)
enkonduka preliminara
enkonduki introduktar (tr)
enkorpigi enkorpigar (tr)
enkuri inkursar (tr)
enlitigi kushar (tr)
enmeti insertar (tr)
ennaskita inata
enorma (p) enorma
enpuŝi insertar (tr)
ensemblo ensemblo
enspezo rento
enspezo revenuo
enspiri aspirar (tr)
enŝipigi embarkar (x)
enŝipiĝi embarkar (x)
ento ento
entrepreni entraprezar (tr)
entute entote
entuziasmi entuziasmar (netr)
enui enoyar (netr)
envii envidiar (tr)
envolvi envelopar (tr)
envolvi envolvar (tr)
envolvi envolvar (tr)
epidemia epidemia
epidemio epidemio
epigono epigono
epigramo epigramo
epika epika
epilepsio epilepsio
epilogo epilogo
episkopo episkopo
epistolo epistolo
epitafo epitafo
epitomo epitomo
epizodo epizodo
epoko epoko
epopea epika
erao ero
erari erorar (netr)
erco erco
erekti erektar (tr)
erinaco herisono
erizipelo erizipelo
ermeno ermino
ermito ermito
erotika erotika
erozii erodar (tr)
erpilo herso
erudiciigi erudar (tr)
erupcii eruptar (netr)
esameno esamo
escepti eceptar (tr)
escepti exkluzar (tr)
esenco esenco
eseo esayo
eskadro eskadro
eskalo eskalero
eskapi eskapar (netr)
eskimo Eskimo
eskorto eskorto
Esperanto Esperanto
esperi esperar (tr)
esplori explorar (tr)
esplori inquestar (tr) 
esprimi expresar (tr)
establi establisar (tr)
establi institucar (tr)
estanta prezenta
estetiko estetiko
esti esar (netr)
esti aroganta prezuntar (netr)
esti dankema al gratitudar (tr)
esti daŭra permanar (netr)
esti dekadenca dekadar (netr)
esti dormema somnolar (netr)
esti ekvivalenta equivalar (tr)
esti en hipnoto hipnotar (netr)
esti frapita tresayar (netr)
esti imanenta imanar (netr)
esti malproksime distar (netr)
esti mense kaduka radotar (netr)
esti narkotata narkotar (netr)
esti necesa oportar (netr)
esti paca/paco pacar (netr)
esti pasaĝero pasajar (netr)
esti permesata darfar (netr)
esti propra inherar (netr)
esti prostracia prostracar (netr)
esti senhava kaj bezonata indijar (tr)
esti skuita tresayar (netr)
esti splena splinar (netr)
esti sub la jurisdikcio (aŭtoritateco) resortisar (netr)
esti ŝparema sparar (x)
esti transpara transparar (netr)
esti travidebla transparar (netr)
esti trudema prezuntar (netr)
esti urĝa urjar (netr)
esti vegetara vejetarar (netr)
estimi estimar (tr)
estingi extingar (x)
estingiĝi extingar (x)
Estonio Estonia
estonta futura
estrado estrado
eŝafodo eshafodo
eta miniona
etaĝo etajo
etato etato
etendi extensar (tr)
eterna eterna
etero etero
etikedo etiketo
etiko etiko
etimologio etimologio
etiologio etiologio
Etiopio Etiopia
etnologio etnologio
evakui evakuar (tr)
Evangelio evangelio
eventi eventar (netr)
eventuala eventuala
eventuala potenciala
evidenta evidenta
eviti eludar (tr)
eviti evitar (tr)
evolui evolucionar (netr)
evoluigi developar (tr)
eŭfonio eufonio
Eŭropo Europa
ezofago ezofago
ezoko lucio
F
fabelo fablo
fabo fabo
fabriki fabrikar (tr)
faceto faceto
facila facila
facilmova ajila
fadeno filo
fago fago
fagopiro saraceno
fajfi siflar (x)
fajli limar (tr)
fajraĵo pirotekno
fajrejo herdo
fajrero cintilo 
fajro fairo
fako fako
faksimilo faksimilo
fakto fakto
faktorio faktorio
faktoro faktoro
fakturo fakturo
fakultato fakultato
fakulto fakultato
falango falango
falĉi falchar (tr)
falĉileto siklo
faldi faldar (tr)
faleti butar (netr)
fali falar (netr)
fali krular (netr)
faligi precipitar (tr)
Falklando Falklandi
falko falkono
falsa falsa
falseto falseto
falsi kontrafaktar (tr)
falva falva
fama notora
familia nomo surnomo
familiara familiara
familio familio
famo famo
famo rumoro
fanatika fanatika
fanfaro fanfaro
fanfaroni fanfaronar (netr)
fantasta fantastika
fantomo fantomo
faraono faraono
farbo farbo
farĉo farso
fari facar (tr)
fari igar (tr)
fariĝi divenar (netr)
faringo faringo
farmacio farmacio
farmakopeo farmakopeo
farmi farmar (tr)
farso farso
farti standar (netr)
faruno farino
fasado fasado
fascini facinar (tr)
fasĉino fashino
fasko fasko
fasoni fasonar (tr)
fasti fastar (netr)
fatalo fato
favo favo
favori favorar (tr)
faŭko fauco
fazano fazano
fazeolo fazeolo
fazo fazo
febla(p) febla
febri febrar (netr)
februaro februaro
feĉo lizo
federi federar (tr)
fekaĵo feko
feki kakar (netr)
fekulo amilo
fekunda fekunda
fekunda fertila
feliĉa felica
felietono folietono
felo felo
felto felto
femala femina
femuro femuro
fendi fendar (tr)
fendi krevisar (x)
fendiĝi krevisar (x)
fenestra fiksilo spanyoleto
fenestro fenestro
fenikoptero flamingo
fenikso fenixo
fenkolo fenikulo
fenolo fenolo
fenomeno fenomeno 
fenstenigi festinar (x)
feo feo
ferdeko ferdeko
ferlado lado
fermenti fermentacar (netr)
fermento fermento
fermi klozar (tr)
fero fero
feroca (p) feroca
fervojo fervoyo
fervori fervorar (netr)
fervori zelar (netr)
festa gala
festeni festinar (x)
festi festar (netr)
festuko festuko
fetiĉo fetisho
feto feto
fetora fetida
feŭdo feudo
fi! fi!
fiakro fiakro
fianĉigi fiancar (tr)
fiasko fiasko
fibro fibro
fidela fidela
fidi fidar (netr)
fiera fiera
figo figo
figuro figuro
Fiĝio Fidji
fikcia fiktiva
fiksa fixa
filamento filamento
filantropo filantropo
filatelo filatelio
fileto fileto
filharmonio filharmonio
filiko filiko
filino filiino
filio filialo
Filipinoj Filipini
filmo filmo
filo filiulo
filologio filologio
filologo filologo
filozofii filozofiar (netr)
filozofio filozofio
filozofo filozofo
filtri filtrar (x)
filtriĝi filtrar (x)
finaĵo (de laĉo) tago
financo financo
fingro fingro
fini finar (x)
fini finisar (tr)
finiĝi expirar (netr)
finiĝi finar (x)
Finnlando Finlando
fino termino
firma ferma
firma harda
firmamento firmamento
firmo firmo
firsto kolmo
fisko fisko
fiŝi peskar (netr)
fiŝo fisho
fiziko fiziko
fiziologio fiziologio
fizionomio fizionomio
fjordo fyordo
flago flago
flagri flagrar (netr)
flamo flamo
flanelo flanelo
flanĝo flanjo
flankengliti ripar (tr)
flanko flanko
flari flarar (tr)
flatema fatua
flati flatar (tr)
flati kurtezar (tr)
flava flava
flegi flegar (tr)
flegma flegmoza 
fleksi flexar (x)
fleksiĝi flexar (x)
fleksii inflexar (tr)
fliki rapecar (tr)
flirti flirtar (netr)
floko floko
florbrasiko florkaulo
floro floro
floso rafto
floti flotacar (netr)
floto floto
flugi flugar (netr)
flugilo alo
flui fluar (netr)
fluida fluida
fluido fluido
fluktui fluktuar (netr)
fluoreski fluorecar (netr)
fluoro fluoro
fluso fluxo
fluto fluto
foiro ferio
fojno feno
fojo foyo
foko marhundo
fokuso foko
fola (p) fola
folio folio
foliumi foliumar (tr)
folkloro folkloro
fomenti fomentar (tr)
fondi fondar (tr)
fonetiko fonetiko
fonografi fonografar (tr)
fontano fonteno
fonto fonto
fontoplumo fontenplumo
for de for
forcepso forcepso
foresta absenta
forgesi obliviar (tr)
forĝi forjar (tr)
forigi efacar (tr)
forigi obliterar (tr)
foriri departar (netr)
foriri livar (tr)
forĵeti abandonar (tr)
forĵeti forjetar (tr)
fork(eg)o forko
forkuri fugar (x)
forlasi abandonar (tr)
forlasi desertar (x)
forlasi forlasar (tr)
forlasi livar (tr)
forlasi omisar (tr)
formato formato
formeti eskartar (tr)
formeti relegar (tr)
formi formacar (tr)
formi taliar (tr)
formiki formikumar (netr)
formiko formiko
formo formo
formolo formalino
Formoso Formoza
formulo formulo
forno forno
forno furnelo
forpermesi konjedar (tr)
forpreni sustraktar (tr)
forta forta
forta harda
forteco vigoro
fortigi rinforcar (tr)
fortika robusta
fortreso fortreso
fortuno fortuno
forumo forumo
fosaĵo foso
fosforeski fosforecar (netr)
fosforo fosfo
fosilo spado
fosto fosto
fot(ograf)i fotografar (tr)
fotokopii fotokopiar (tr)
fragmento fragmento 
frago frago
fraĝila (p) frajila
frakasi abatar (tr)
frakasi frakasar (tr)
frakcio fraciono
frako frako
frakseno fraxino
frambo frambo
framo framo
franca Franca
Francio Francia
franco Franco
franda frianda
franĝo franjo
franko franko
frankolino frankolino
frapeti tapotar (tr)
frapi frapar (tr)
fratino fratino
frato fratulo
fraŭdi fraudar (x)
fraŭla celiba
fraŭlino damzelo
frazo frazo
frekventi frequentar (tr)
fremda stranjera
freneza fola
frenezo frenezio
freŝa fresha
freŝdata recenta
frid(ec)o (p) frigoro
fringo finko
fripona fripona
friponi eskrokar (tr)
friponi frustrar (tr)
friponi subreptar (tr)
fripono raskalo
friti fritar (x)
frivola frivola
frizi frizar (x)
friziĝi frizar (x)
fromaĝo fromajo
fronta faco facio
fronto frontiero
fronto fronto
frosti frostar (netr)
frosti konjelar (x)
frostigi konjelar (x)
froti fricionar (tr)
froti frotar (tr)
frotpurigi skurar (tr)
frua frua
frukto frukto
frumatura prekoca
frunto fronto
ftizo ftizio
fuĝi fugar (x)
fuko fuko
fulgo fuligino
fulm(in)i fulminar (x)
fumi fumar (x)
fundamento fundamento
fundo fundo
fundo kulo
funebri traurar (netr)
funebro funero
funelo funelo
fungo fungo
funkcii funcionar (netr)
fuorto fuorto
furaĝo forejo
furiozi furiar (netr)
furo fureto
furunko furunklo
furzi flatuar (netr)
fusilo fusilo
fuŝi fushar (tr)
futura (p) futura
fuzeo fuzeo
fuzi fuzar (tr)
G
gabaro gabaro
gablo geblo
Gabono Gabon 
gado gado
gagato gagato
gaja gaya
gajni ganar (tr)
galaksio laktovoyo
galanta galanta
galanto niveolo
galerio galerio
galiumo galio
galo bilo
galono galono
galopi galopar (netr)
galvanizi galvanizar (tr)
galvanometro galvanometro
gamaŝo getro
Gambio Gambia
gambo gambo
gamo gamo
Ganao Ghana
ganto ganto
gapi bear (netr)
gapi gapar (netr)
garaĝi garar (tr)
garantii garantiar (tr)
garbo garbo
gardenio gardenio
gardi facionar (netr)
gardi gardar (tr)
gardi rekoliar (tr)
gardostari facionar (netr)
gargari gargarar (tr)
garni garnisar (tr)
garnituro garnituro
garolo jeo
gaso gaso
gasolino gazolino
gastejo albergo
gastiganto hosto
gasto gasto
gastronom(netr)o gastronom(netr)o
gavoto gavoto
gaŭĝi gaujar (tr)
gazelo gazelo
gazo gazo
gazono gazono
geedzigi mariajar (tr)
gejŝo geisho*
geko geko*
gelatino gelatino
gemo gemo
gemo lapido
genealogio genealogio
generacio generaciono
generalo generalo
generatoro generatoro
generi genitar (tr)
genezo genezo
genio genio
genitivo genitivo
genro genero
genro genro
gento gento
genuo genuo
genuoj gremio
geograf(netr)o geograf(netr)o
geolog(netr)o geolog(netr)o
geometr(netr)o geometr(netr)o
geranio geranio
germana Germana
Germanio Germania
germaniumo germanio
germano Germano
gerundio gerundio
gesti gestar (netr)
getao getao*
geto ghetto
giĉeto gicheto
giganta giganta
giganto giganto
gildo gildo
gilotino gilotino
gimnastiki gimnastikar (netr)
gimnazio gimnazio
ginekolog(netr)o ginekolog(netr)o
gingivo jenjivo
ginko gingko* 
gipso gipso
girlando girlando
gisi gisar (tr)
gisto hefo
gitaro gitaro
glaceigi glacar (tr)
glaciaĵo glacio
glaciejo glaciero
glaciigi konjelar (x)
glaciiĝi konjelar (x)
glacio glacio
gladiolo gladiolo
glando glando
glano glano
glaso glaso
glaso kupo
glata glata
glavo espado
glavo glavo
glaŭkomo glaukomo
glazuri glezar (tr)
glicerino glicerino
glicirizo regoliso
glimo mikao
gliptiki gliptar (tr)
gliti glitar (netr)
glitvalvo shibro
globo globo
gloro glorio
glu(aĵ)o gluo
glugli gluglar (netr)
glugli gorgolar (netr)
glui glutinar (x)
gluiĝi glutinar (x)
glukozo glikoso
gluteo (ĉevalo ktp) gropo
gluteo sedo
gluteoj gluteo
gluteoj hancho
gluteoj kulo
gluti glutar (tr)
gobio gobio
golfo bayo
golfo golfo
gondolo gondolo
gonoreo gonoreo
gorĝo guturo
gorĝovojo defileo
gorilo gorilo
gotika gotika
goto Goto
gracila gracila
gracio gracio
graco graco
grado grado
grafika grafika
grafiko grafiko
grafo komto
grajno grano
graki kroasar (netr)
gramatiko gramatiko
graminacoj gramino
gramo gramo
gramofono gramofono
granato grenado
granda granda
grandega enorma
grandega imensa
grandioza grandioza
granito granito
graso graso
grateno gratino
grati gratar (tr)
grati skrachar (tr)
gratifiki gratifikar (tr)
gratuli gratular (tr)
grava grava
graveda gravida
gravi importar (netr)
graviti gravitar (netr)
gravuri grabar (tr)
grefti greftar (tr)
greka Greka
Grekio Grekia
greko Greko
Grenado Grenada 
grenado grenado
grenato granato
grilo grilio
grimaci grimasar (netr)
grimpi klimar (x)
grinci grincar (netr)
grinci krokar (tr)
gripo gripo
griza griza
groco grosdekeduo
Gronlando Grenlando
groso grozelo
groteska groteska
groto groto
grumelo grumelo
grumo grumo
grundi strandar (netr)
grundo sulo
grunti grunar (netr)
gruo gruo
grupo (soldatoj, kc) esquado
grupo grupo
grupo partio
gruzo gravio
gubernio gubernio
gudro gudro
gudro koaltaro
gumo gumo
gustumi gustar (tr)
gustumi savurar (tr)
gutaperko gutaperko
guto guto
Gvajano Guayana
gvardio guardo
Gvatemalo Guatemala
gvati guatar (tr)
gvidi guidar (tr)
gvidrimeno reino
Gvineo Guinea
Gvineo (Nov-G.) (Nova)
Guinea
Ĝ
ĝangalo junglo
ĝardeno gardeno
ĝemelo jemelo
ĝemi jemar (netr)
ĝendarmo jendarmo
ĝenerala perspektivo
(observo) supervido
ĝeni jenar (tr)
ĝenro jenro
ĝentila jentila
ĝentila polita
ĝermo jermo
ĝi lu
ĝi ol
ĝibo gibo
ĝibulo gibiero
ĝibutio Djibuti
ĝino jino
ĝirafo jirafo
ĝiri indosar (tr)
ĝiri jirar (netr)
ĝis til
ĝisveni rajuntar (tr)
ĝoji joyar (netr)
ĝojo plezuro
ĝui juar (tr)
ĝui savurar (tr)
ĝusta korekta
H
ha! ha!
haĉi hachar (tr)
Haitio Haiti
hajli grelar (netr)
haki hakar (tr)
halebardo halbardo
halioto halioto*
halo halo
halogeno halogeno
haloo halono 
haltero haltero
halti haltar (netr)
haluciniĝi halucinar (netr)
halukso haluxo
hamako hamako
hamstro hamstro
handikapi handikapar (tr)
hangaro hangaro
haremo haremo
haringo haringo
harmonii harmoniar (netr)
harmoniko harmoniko
haro (de korpo) pilo
haro (kapa) haro
harpo harpo
harpuno harpuno
hasti hastar (netr)
haŝiŝo hashisho
Havajo Havayi
haveno portuo
havi havar (tr)
havi ferion festar (netr)
havi karion kariar (netr)
havi rankoron rankorar (netr)
havi uzrajton uzufruktar (tr)
havigi obtenar (tr)
haŭli haular (tr)
haŭtmakuleto spoto
haŭtmalpuraĵo kraso
haŭto pelo
hazarda kazuala
hazardo hazardo
he! he!
hebrea Hebrea
hedero hedero
hegemonio hegemonio
heĝo hego
hejma domestika
hejmigita domestika
hejmo hemo
heksagono hexagono
hektaro hektaro
hektografi hektografar (tr)
hektolitro hektolitro
helena Helena
helianto helianto
helianto tornasolo
helico helico
heliko heliko
helikoptero helikoptero
heliometro heliometro
helioskopo helioskopo
heliotropo heliotropo
heliumo helio
helpi helpar (tr)
helpi sokursar (tr)
Helvetio Helvetia
helveto Helveto
hemiplegio hemiplegio
hemisfero hemisfero
hemoglobino hemoglobino
hemoptizo hemoptizio
hemoragio hemoragio
hemoroido hemoroido
hepato hepato
herbario herbario
herbejo prato
herbejvojeto treko
herbo herbo
herbovora herbivora
heredi heredar (tr)
heredigi legacar (tr)
herezo herezio
hermafrodita hermafrodita
hermafrodito hermafrodito
hermetika hermetika
hernio hernio
heroldo heraldo
heroo heroo
herpeto herpeto
heterodoksa heterodoxa
heziti hezitar (netr)
hiacinto hiacinto
hibrida hibrida
hibrido hibrido
hidrargo merkurio 
hidrofobio hidrofobio
hidrogeno hidrogeno
hidroksido hidroxido
hidropso hidropso
hieno hieno
hierarkio hierarkio
hieraŭ hiere
hierogrifo hierogrifo
higieno higieno
hiki hipar (netr)
himeno himeno
himno himno
Hindio India
hinduo Hinduo
hipermetropa hipermetropa
hipermetropa presbita
hipertrofiigi hipertrofiar (tr)
hipokrita hipokrita
hipopotamo hipopotamo
hipoteko hipoteko
hipotezo hipotezo
hirtigi herisar (tr)
hirudo sanguisugo
hirundo hirundo
hisi hisar (tr)
hispana Hispana
Hispanio Hispania
hispano Hispano
histerio histerio
histo tisuo
historio historio
histriko porkespino
hm! hum!
ho! ho!
hobojo hoboyo
hojo hauo
hoko hoko
Holando Holando
holoturio holoturio
homamaso turbo
homo homo
homogena homogena
homologa homologa
homonima homonima
homoseksuala
homeosexuala
Honduraso Honduras
honesta honesta
honorario honorario
honoro honoro
honti shamar (netr)
hordeo hordeo
horizonto horizonto
horloĝo horlojo
horo (de horloĝo) kloko
horo horo
horori hororar (netr)
horoskopo horoskopo
hortensio hortensio
hospico hospico
hospitalo hospitalo
hotelo hotelo
hufo hufo
humana humana
humida humida
humila humila
humoro humoro
humuro humuro
hundo hundo
Hungario Hungaria
hura! hura!
hurdo hurdo
hutono hutono* Ĥ
ĥolero kolero
ĥoro koro
I
iam olim
identa identa
ideo ideo
ideografio ideografio
ideologio ideologio 
idilio idilio
idiomo idiomo
idiota idiota
idiota imbecila
Ido Ido
idolo idolo
igi igar (tr)
ignori ignorar (tr)
igvano iguano
iksodo zeko
iktero iktero
ilekso ilexo
ileo ileono
ili li
ilo utensilo
ilumini iluminar (tr)
ilustri ilustrar (tr)
iluziiĝi iluzionar (netr)
imagaĵo imajo
imagi fantaziar (tr)
imagi imaginar (tr)
imersii imersar (tr)
imiti imitar (tr)
imperativo imperativo
imperio imperio
impertinenta impertinenta
impeto impetuo
implici implikar (tr)
implicita implicita
impliki intrikar (tr)
importi importacar (tr)
imposti impostar (tr)
impoŝto emposto
impotenta impotenta
impresi impresar (tr)
impresi merkar (tr)
impresionista verko
impresiono
improvizi improvizar (tr)
impulsi impulsar (tr)
imputi imputar (tr)
imuna imuna
inaŭguri inaugurar (tr)
incenso incenso
incesti incestar (netr)
incidenta incidenta
inciti incitar (tr)
indekso indexo
indico indico
indiferenta indiferenta
indigni indignar (netr)
indigo indigo
indiĝena indijena
indikativo indikativo
indiki indikar (tr)
indikilo indexo
individuo individuo
induki induktar (tr)
indukti induktar (tr)
indukti inferar (tr)
indulgema klementa
indulgi indulgar (tr)
industrio industrio
inerta inerta
infano infanto
infanterio infantrio
infekti infektar (tr)
inferenci inferar (tr)
infero inferno
infinitivo infinitivo
inflaciigi inflar (tr)
inflamigi inflamar (tr)
influenco influenzo
influi influar (tr)
informi informar (tr)
infre (p) infre
infuzi infuzar (tr)
ingo gaino
ingoto lingoto
ingredienco ingrediento
ingveno inguino
inĝeniero injenioro
inhali inhalar (tr)
inhibicii inhibar (tr)
iniciati iniciar (tr)
injekti injektar (tr) 
injektilo siringo
injektoro siringo
inklini inklinar (x)
inklinigi inklinar (x)
inkludi inkluzar (tr)
inko inko
inkognita inkognita
inokuli inokular (tr)
insekto insekto
insigno insigno
insinui insinuar (tr)
insiste peti suplikar (tr)
insisti insistar (netr)
inspekti inspektar (tr)
inspiri inspirar (tr)
instali instalar (tr)
instigi instigar (tr)
instinkto instinto
instituto instituto
instrui docar (tr)
instrui instruktar (tr)
instrumento instrumento
insularo arkipelago
insulo insulo
insulti insultar (tr)
insulti maldicensar (netr)
integr(aĵ)o integralo
integra integra
inteligenta inteligenta
intenci intencar (tr)
intenco skopo
intensa intensa
inter inter
interdikti interdiktar (tr)
interesi interesar (tr)
interezo interesto
interferi interferar (netr)
interjekcio interjeciono
interkonsenti paktar (netr)
intermiksi inglobar (tr)
intermiti intermitar (netr)
intermonto defileo
interna interna
internacia internaciona
interparoli interparolar (netr)
interpreti interpretar (tr)
interŝanĝi kambiar (tr)
interŝtuparo fluro
intertrakti negociar (tr)
intervalo intervalo
intervjui interviuvar (tr)
intesto intestino
intima intima
intonacii intonar (tr)
intrigi intrigar (netr)
intrigi mashinacar (tr)
intui intuicar (tr)
inundi inundar (tr)
invadi inkursar (tr)
invadi invadar (tr)
inventi inventar (tr)
inversa inversa
investi investar (tr)
inviti invitar (tr)
io ajn irga
iri irar (netr)
iri en grandaj paŝoj pazar (netr)
iridio iridio
irido irido
irigacii irigacar (tr)
iriso iriso
iriti iritar (tr)
Irlando Irlando
ironio ironio
irorio irorio*
islamo islamo
Islando Islando
istmo istmo
Italio Italia
itrio yitro
iu ula
iu ajn irga
izlaelido Izlaelido
Izlaelo Izlaelia
izola solitara
izoli izolar (tr) 
J
ja mem
ja ya
jacinto hiacinto
jado jado
jaguaro jaguaro
jaketo (virina) jaketo
jakto yakto
jam ja
Jamajko Jamaika
januaro januaro
Japanio Japonia
jardo yardo
jaro yaro
jasmeno jasmino
jaŝiro yashiro*
Javo Java
je po
je ye
jen yen
jes yes
Jesuo Jesu
jodli yodlar (x)
jodo iodo
jono iono
Jordanio Jordan
jubilei jubilear (tr)
judo Judo
jufto yufto
jugo yugo
Jugoslavio Yugoslavia
juĝi (laŭleĝe) judiciar (tr)
juĝi judikar (x)
juki pruritar (netr)
julio julio
juna juniora
juna yuna
jungi jungar (tr)
jungilo harneso
junio junio
junko junko
Jupitero Jupitero
jupo jupo
justa yusta
justeco equitato
juvelo juvelo
Ĵ
ĵaluza jaluza
ĵaluzio jelozio
ĵaluzio paralumo
ĵargoni jargonar (netr)
ĵaro jaro
ĵaŭdo jovdio
ĵeleo jeleo
ĵeti jetar (tr)
ĵeti lansar (tr)
ĵokeo jokeo
ĵongli jonglar (netr)
ĵudo judoo
ĵuri jurar (x)
ĵurnalo jurnalo
ĵus jus
ĵusta justa
K
k.c. e.c.
k.t.p. e.c.
kabano kabano
kablo kablo
kabo kabo
kaĉo paplo
kadavro kadavro
kadmio kadmio
kadro kadro
kaduka kaduka
kafeino kafeino
kafo kafeo
kaĝo kajo
kaj e(d)
kajero kayero
kajo kayo
kajo warfo 
kajto kaito
kajutkelnero moso
kajuto kabino
kakao kakao
kaki kakar (netr)
kakofonio kakofonio
kakto kaktuso
kalandri kalandrar (tr)
kalcio kalcio
kalcitri kikar (tr)
kaldrono kaldiero
kaldrono kaldrono
kalejdoskopo kalidoskopo
kalemburo kalemburo
kalendaro kalendario
kaleŝo kalesho
kalibro kalibro
kaligrafi kaligrafar (tr)
kaliko kalico
kalikoto kaliko
kalio kalio
kalkano talono
kalkanumo talono
kalko kalko
kalkuli enumerar (tr)
kalkuli kalkular (tr)
kalkuli kontar (tr)
kalkuluso kalkolo
kalma kalma
kalmaro kalmaro
kalo kalo
kalorio kalorio
kalsono kalsono
kalumnii kalumniar (tr)
kalva kalva
kamarado kamarado
Kamboĝo Kambodja
Kamĉatko Kamchatka
kameleono kameleono
kamelio kamelio
kamelo kamelo
kameno kameno
kameo kameo
kamerao kamero
Kameruno Kamerun
kamforo kamforo
kamiono charioto
kamiono kamiono
kamizolo kamizolo
kamo kamo
kampanji kampaniar (netr)
kamparo ruro
kampi kampar (netr)
kampo feldo
kanabeno kanabino
kanabo kanabo
Kanado Kanada
kanalo kanalo
kanapo kanapeo
kanario kanario
kanbo puerulo
kanceliero kancelero
kancero kancero
kandelo kandelo
kandidato kandidato
kando kandio
kanelo kanelo
kanguruo kanguruo
kanibala kanibala
kanibalo kanibalo
kankro kankro
kano kano
kanono kanono
kanti kantar (tr)
kantino kantino
kanto kansono
kanulo kanulo
kanuo kanoo
kanvaso kanvaso
kanzono kansono
kaoso kaoso
kapabla habila
kapabla kapabla
kapabla kapaca
kapelo kapelo
kapilara kapilara 
kapitalo kapitalo
kapitano kapitano
kapitelo kapitelo
kapitulaci kapitulacar (netr)
kapkuseno kuseno
kapo kapo
kaporalo kaporalo
kapoto kapoto
kapreolo kapreolo
kaprico kaprico
kaprifolio kaprifolio
kaprioli kapriolar (netr)
kapro kapro
kapsiko kapsiko
kapstano kapstano
kapsulo kapsulo
kapti kaptar (tr)
kapti sizar (tr)
kapuĉo kapuco
kara chera
kara kara
karadrio ploviero
karafo karafo
karaktero karaktero
karamelo karamelo
karaso karasino
karato karato
karavano karavano
karbo karbono
karbono karbo
karbunklo karbunklo
karcero karcero
karcinomo karcinomo
kardelo kardelo
kardi kardar (tr)
kardo kardono
karesi karezar (tr)
kariero kariero
karikaturi karikatar (tr)
kariofilo kariofilo
karitato karitato
karmino karmino
karnavalo karnavalo
karno karno
karnokoloro karnaciono
karnomanĝa karnivora
karnomanĝulo karnivoro
karnovora karnivora
karnovorulo karnivoro
karotida karotida
karotido karotido
karoto karoto
karpeo karpo
karpo karpo
kartelo kartelo
kartilago kartilago
karto karto
kartoĉo kartocho
kartoĉo magazino
kartono kartono
kasacii kasacar (tr)
kaserolo kasrolo
kaskado kaskado
kasko kasko
kaso kaso
kasono kasono
kastanjeto kastanyeto
kastelo kastelo
kasto kasto
kastoro kastoro
kastri kastrar (tr)
kaŝi celar (tr)
kaŝmiro kashmiro
kaŝtano kastano
katalogo katalogo
Katalunio Katalunia
katarakto katarakto
kataro kataro
Kataro Qatar
katastrofo katastrofo
katedralo katedralo
kategorio kategorio
kateno kateno
katetero katetero
katjono kationo
kato kato 
katodo katodo
katolika katolika
kava kava
kavalerio kavalrio
kavaliro kavaliero
kaverno kaverno
kaviaro kaviaro
kavo kavo
kaŭcio kauciono
kaŭĉuka kauchuka
kaŭĉuko kauchuko
kaŭri blotisar (netr)
kaŭri squatar (netr)
kaŭzi induktar (tr)
kaŭzo kauzo
kazeino kazeino
kazeo kazeo
kazino kazino
kazo kazo
ke ke
kelka kelka
kelnero garsono
kelo kelero
kemero kamero
kemio kemio
Kenjo Kenia
kerno kerno
kerno stumpo
keroseno keroseno
kesto buxo
kesto etuyo
kesto kesto
kia quala
kiam kande
kie ube
kiel kam
kiel kom
kilo kilio
kilogramo kilogramo
kilolitro kilolitro
kilometro kilometro
kimero kimero
kimono kimono
Kimrio Wals
kinematografi cinematografar (x)
kinino quinino
kinkono quino
kio quo, quon
kiom quanta
kiom da quanta
kion quo,
kiosko kiosko
kiraso kuraso
kirko kirko
kirli quirlar (tr)
kirliĝi vorticar (netr)
kirurgio kirurgio
kisi kisar (tr)
kiu qua (quan, qui, quin)
kiuj qua
kiujn) qua
kiun quan
klabo mazo
klaĉi maldicensar (netr)
klaki klakar (netr)
klaki kliktar (netr)
klami klamar (tr)
klapo klapo
klara klara
klara limpida
klarigi explikar (tr)
klarigilo instruciono
klariono klariono
klarneto klarineto
klasifiki klasifikar (tr)
klasika klasika
klaso klaso
klaviklo klavikulo
klavo klavo
klavokordo klavikordo
klaŭno klauno
klaŭzo klauzo
klepsidro klepsidro
kleriko kleriko
kliento kliento 
klifo klifo
kliko kliko
klimato klimato
klingo lamo
kliniko kliniko
klinko klinko
klistero klistero
klitoro klitorido
kloako kloako
klopodi esforcar (netr)
klopodi luktar (netr)
klorato klorato
kloro kloro
klorofilo klorofilo
kloroformo kloroformo
klostro klostro
kloŝo klosho
klubo klubo
kluĉi embragar (x)
kluki klukar (netr)
kluzo sluzo
kluzpordo shibro
knabino puerino
knedi petrisar (tr)
koaguli koagular (x)
koaguliĝi koagular (x)
koakso koko
koalicii koalisar (netr)
kobajo kobayo
kobalto kobalto
kodekso kodexo
kodo kodexo
koeficiento koeficiento
kofro kofro
koheri koherar (netr)
koincidi koincidar (netr)
koiti koitar (tr)
kojlo kolono
kojno konio
kokaino kokaino
kokao kokao
kokardo kokardo
kokcinelo kocinelo
koketa koketa
kokluŝo koklusho
koko hano
kokono kokono
kokoso kokoso
kolaterala kolaterala
kolbaso sociso
koldkremo koldkremo
kolegio kolegio
kolego kolego
kolego kompano
kolekti (ŝuldmonon) inkasar (tr)
kolekti asemblar (tr)
kolekti glinar (tr)
kolekti kolektar (tr)
koleri iracar (netr)
kolhararo krinaro
koliero koliaro
koliki kolikar (netr)
kolizii kolizionar (netr)
kolo kolo
kolodio kolodiono
koloida koloida
koloido koloido
Kolombio Kolumbia
kolombo kolombo
kolonelo kolonelo
kolonio kolonio
kolono kolono
koloro koloro
kolringo koliaro
kolubro kolubro
kolumno kolumno
kolumo kolumo
kolzo kolzo
kolzo nabeto
komandi komandar (tr)
komato komato
kombi pektar (tr)
kombini kombinar (tr)
komedio komedio
komedono komedono 
komenca prima
komenci komencar (x)
komenciĝi komencar (x)
komenti komentar (tr)
komerci komercar (netr)
kometo kometo
komforto komforto
komico komico
komika komika
komisaro komisario
komisii komisar (tr)
komisio komisiono
komitato komitato
komizo klerko
komizo komizo
komo komo
komodo komodo
kompakta kompakta
kompanio kompanio
kompano (p) kompano
komparativo komparativo
kompari komparar (tr)
kompati kompatar (x)
kompensi expiacar (tr)
kompensi kompensar (tr)
kompenso indemno
kompetenta kompetenta
kompili kompilar (tr)
kompleksa komplexa
kompleksio komplexiono
komplemento komplemento
kompleta kompleta
komplezi komplezar (netr)
kompliki komplikar (tr)
komplimenti komplimentar (tr)
komploti komplotar (tr)
komponi kompozar (tr)
komposti kompostar (tr)
kompreni komprenar (tr)
kompreni per intelekto
intelektar (tr)
kompreso kumpreso
kompromisi kompromisar (tr)
kompromisi transaktar (netr)
komuna komuna
komuniiĝi komuniar (netr)
komuniki komunikar (netr)
komunismo komunismo
komunumo komono
komutilo agulo
koncedi koncesar (tr)
koncedi koncesionar (x)
koncentri koncentrar (tr)
koncepti konceptar (tr)
koncerni koncernar (tr)
koncerti koncertar (netr)
koncesii koncesionar (x)
koncipi konceptar (tr)
konciza konciza
kondamni kondamnar (tr)
kondensi kondensar (tr)
kondensilo kondensatoro
kondiĉi kondicionar (tr)
kondiĉi stipular (tr)
kondimento kondimento
kondol(enc)i kondolar (tr)
kondoro kondoro
konduki duktar (tr)
kondukti konduktar (tr)
konduktoro konduktoro
konduti kondutar (netr)
konekti konektar (tr)
konfekcii konfecionar (tr)
konferenci konferar (netr)
konfesi konfesar (tr)
konfidenci konfidencar (tr)
konfidi konfidar (tr)
konfidi rekursar (netr)
konfirmi afirmar (tr)
konfirmi konfirmar (tr)
konfirmi verifikar (tr)
konfiski konfiskar (tr)
konfiti konfitar (tr)
konflikti konfliktar (netr)
konforma konforma
konfronti konfrontar (tr) 
konfuza konfuza
konfuzi konfundar (tr)
kongesti konjestionar (tr)
konglomerato konglomerato
Kongo Kongo-lando
kongresi kongresar (netr)
koni konocar (tr)
konjako konyako
konjekti konjektar (tr)
konjug(aci)i konjugar (tr)
konjunkcio konjunciono
konjunktivo konjuntivo
konjunkturo konjunturo
konkava konkava
konkeri domtar (tr)
konkeri konquestar (tr)
konkludi konkluzar (tr)
konko konko
konkordi konkordar (netr)
konkreta konkreta
konkubino konkubino
konkurenci konkurencar (tr)
konkuri konkursar (netr)
konkursi konkursar (netr)
konscienco koncienco
konscii konciar (tr)
konsenti asentar (tr)
konsenti konsentar (netr)
konsenti al grantar (tr)
konsenti kontribui suskriptar (x)
konservatorio konservatorio
konservi konservar (tr)
konservi rekoliar (tr)
konservi retenar (tr)
konsideri egardar (tr)
konsideri konsiderar (tr)
konsign(aci)i konsignar (tr)
konsili konsilar (tr)
konsisti (el) konsistar (netr) (ek)
konsisti (en) konsistar (netr) (en)
konskripti konskriptar (tr)
konsoli konsolacar (tr)
konsomeo konsomeo
konsonanto konsonanto
konspiri konspirar (netr)
konstanta konstanta
konstati konstatar (tr)
konsterni konsternar (tr)
konstipi konstipar (tr)
konstitucio konstituciono
konstitui institucar (tr)
konstitui konstitucar (tr)
konstrikti konstriktar (tr)
konstrui konstruktar (tr)
konsulo konsulo
konsulti konsultar (tr)
konsumi konsumar (tr)
konsumi manjar (tr)
kontaĝi kontagiar (tr)
kontakti kontaktar (netr)
kontanta kontanta
kontempli kontemplar (tr)
kontenta kontenta
kontesti kontestar (tr)
kontinento kontinento
kontinua kontinua
kontoro kontoro
kontrabandi kontrabandar (tr)
kontrabaso kontrabaso
kontrakti kontratar (x)
kontrasti kontrastar (netr)
kontraŭ kontre
kontraŭa adversa
kontraŭbatali kombatar (x)
kontraŭetika kontreetika
kontraŭi objecionar (tr)
kontraŭindiko kontreindiko
kontraŭreligia kontrereligia
kontraŭrevolucio
kontrerevoluciono
kontraŭsocia kontresocia
kontribui kontributar (x)
kontroli kontrolar (tr)
konturo konturo
kontuzi kontuzar (tr) 
konuso kono
konveksa konvexa
konvencii konvencionar (netr)
konveni konvenar (netr)
konvento konvento
konverĝi konvergar (netr)
konvers(aci)i konversar (netr)
konverti konvertar (tr)
konvinki konvinkar (tr)
konvoji konvoyar (tr)
konvolvulo konvolvulo
konvulsii konvulsar (netr)
kooperi kooperar (netr)
koordini koordinar (tr)
kopii kopiar (tr)
kopii per ŝablono punsar (tr)
kopso kopso
kopulacii kopulacar (netr)
koralo koralio
korano korano
korbo korbo
kordo kordo
kordo kordono
kordono kordono
Koreio Korea
korekta korekta
korekti emendar (tr)
korespondi korespondar (netr)
koridoro koridoro
korko korko
kormorano kormorano
korneo korneo
kornico kornico
korniko korniko
korno korno
koro kordio
korodi korodar (tr)
korpo korpo
korporaciigi enkorpigar (tr)
korporacio korporaciono
korpuso korpo
korsaro korsaro
korseto korseto
korso korso
kortiko kortico
korto korto
kortobirdo pultro
korupti koruptar (tr)
korupti subornar (netr)
koruso koro
korvo korvo
kosmetiko kosmetiko
kosmo kosmo
kosmopolita kosmopolita
kosmopolito kosmopolito
Kosta-Riko Kostarika
kosti kustar (tr)
kostumo kostumo
kotleto kotleto
koto fango
kotono kotono
koturno qualio
koverto kuverto
kovi kovar (tr)
kovri indutar (tr)
kovri kovrar (tr)
krabo krabo
krabro horniso
krado greto
krado treliso
kradrosti grilar (tr)
krajono krayono
krak! krak!
kraketadi krepitar (netr)
kraki krakar (netr)
kramfo krampo
krampo krampono
krampo parentezo
kranio kranio
krano robineto
kratago kratego
kratero kratero
kravato kravato
kredi kredar (tr)
krediti kreditar (tr)
krei krear (tr) 
kremacii kremacar (tr)
kremo kremo
krenelo krenelo
krepiti krepitar (netr)
krepo krepo
krepusko krepuskulo
krescento krecento
kreski kreskar (netr)
kreso kreso
krespo krespo
kresto kresto
krestomatio krestomatio
kreto kreto
krevi krevar (x)
krevigi krevar (x)
kribrilo kriblo
kribrilo sivo
kriegaĉi klamar (tr)
krii (infano) vajisar (netr)
krii kriar (netr)
kriketo kriketo
krimi kriminar (netr)
kripla kripla
kripo kripo
kriptografii kriptografar (tr)
krisolo kruzelo
krispa krispa
kristalino kristalino
kristalo kristalo
Kristo Kristo
kriterio kriterio
kritiki kritikar (tr)
krizalido krizalido
krizantemo krizantemo
krizo krizo
Kroatio Kroatia
kroĉeti krochar (tr)
kroĉi akrochar (tr)
kroketo kroketo
krokodilo krokodilo
kromo kromo
kromosomo kromosomo
kronika kronika
kroniko kroniko
krono krono
kronologio kronologio
kropo kropo
krozi krozar (netr)
kruce dissolvi klinar (x)
kruci krucumar (tr)
kruco kruco
kruĉo krucho
kruda grosiera
kruda kruda
kruda ruda
krudraboti esbosar (tr)
kruela kruela
kruelega feroca
krupo krupo
kruro kruro
krusto krusto
kruta eskarpa
ksenono xenono
ksilofono xilofono
ksilografii xilografar (x)
kstersupoza neexpektata
kubigi kubigar (tr)
Kubo Kuba
kubo kubo
kubuto kudo
kudri sutar (tr)
kudrilo agulo
kuglo kuglo
kuiri koquar (tr)
kuko kuko
kukolo kukulo
kukumo kukombro
kukurbo kukurbito
kulero kuliero
kulmini kulminar (netr)
kulo kulco
kulpi kulpar (netr)
kulti kultar (tr)
kultivi kultivar (tr)
kulturi kultivar (tr)
kulturo kulturo 
kun kun
kunigi juntar (tr)
kunigi konektar (tr)
kuniklo kuniklo
kunlernanto kunlernanto
kunludanto partenero
kunmeti kompozar (tr)
kunordigi koordinar (tr)
kunpremi kompresar (tr)
kunrilati korelatar (netr)
kunteksto kuntexto
kunulo kompano
kunveni kunvenar (netr)
kunvenigi asemblar (tr)
kupli kuplar (tr)
kupono kupono
kupra kupra
kupro kupro
kuracao kuracao
kuraci kuracar (tr)
kuracisto mediko
kuraĝi kurajar (netr)
kuratoreco kurato
kurba kurva
kurento korento
kuri kurar (netr)
kuriero kuriero
kurioza kurioza
kursiva kursiva
kurso kurso
kurta (p) kurta
kurtaĝi kurtajar (netr)
kurteno kurnteno
kurzo kurso
kuseneto pado
kuseno kuseno
kuŝi jacar (netr)
kuŝigi kushar (tr)
kutimi kustumar (netr)
Kuvajto Kuweit
kuvo kuvo
kuzino kuzino
kuzo kuzulo
kvadrata (mat.) quadrika
kvadrata quadrata
kvadrato quadrato
kvadro* quadro
kvak! quak!
kvakero quakero
kvalif(ik)i qualifikar (tr)
kvankam quankam
kvar quar
kvaranteno quaranteno
kvarco quarco
kvartalo quartero
kvarteto quarteto
kvazaŭ quaze,
kveri rukular (netr)
kverko querko
kvesti questar (tr)
kvieta quieta
kvin kin
kvintesenco quintesenco
kvinteto quinteto
kvita quita
kvitigi satisfacar (tr)
kvociento quociento
kvoto koto
kvoto quoto
L
la la
la le (pl.)
labirinto labirinto
laboratorio laboratorio
labori laborar (netr)
lacerto lacerto
lacigi fatigar (tr)
laĉo laco
lada skatolo bidono
lafo lavao
lago lago
laguno laguno
laika laika
lakeo lakeo 
lako lako
lakona lakonika
laksi diarear (netr)
lakto lakto
laktovojo laktovoyo
laktuko latugo
lamao lamao
lambastono grucho
lameno lamo
lamenti lamentar (netr)
lami klaudikar (netr)
laminario laminario*
laminati laminar (tr)
lampiro lampiro
lampo lampo
lampoŝirmilo paralumo
lanco lanco
lanĉi lansar (tr)
landkarto mapo
landlimo frontiero
lando lando
lango lango
langomanĝi lapar (tr)
langusto langusto
lano lano
lanterno lanterno
lanugo lanugo
lapo bardano
lardo lardo
larĝa larja
lariko larico
laringo laringo
larmo lakrimo
larvo larvo
lasciva laciva
lasi lasar (tr)
lasta lasta
latenta latenta
latero latero
latina Latina
latino Latino
latiso treliso
latitudo latitudo
latrino latrino
latuno latuno
lavangi avalanchar (netr)
lavendo lavendo
lavi lavar (tr)
lavi per tualetakvo locionar (tr)
lavurso ratono
laŭ segun
laŭbo laubo
laŭdi laudar (tr)
laŭlonge de alonge
laŭro lauro
laŭta lauta
lazo lazo
lazuro azuro
lcero plago
leciono leciono
ledo ledro
legendo legendo
legio legiono
legitima legitima
legomo legumo
leĝera (p) lejera
leĝo lego
lekanto margrito
leki lekar (tr)
leksikono lexiko
lektoro lektoro
lektrinki lapar (tr)
lemingo lemingo
lenso lenso
lento lenso
lentugo lentigino
Leone Siera-Leono Sierra
leono leono
leontodo leondento
leopardo leopardo
leporo leporo
lepro lepro
lernejo skolo
lerni lernar (tr)
lerta habila 
lesivi lesivar (tr)
Lesoto Lesoto
letero letro
levi elevar (tr)
levi levar (tr)
levilo levero
leŭkocito leukocito
leŭtenanto lietnanto
lezi lezar (tr)
li il(u)
li lu
Libano Libano
libelo libelulo
libera libera
liberigi remisar (tr)
Liberio Liberia
libertempi vakancar (netr)
Libio Libia
libro libro
licenci licencar (tr)
liceo liceo
lieno spleno
lifto elevatoro
ligi ligar (tr)
ligi per boparenco aliancar (tr)
ligno ligno
Liĥtenŝtejno Lichtenstein
likeno likeno
liki likar (netr)
likva liquida
likvidi liquidacar (tr)
likvoro liquoro
lilako lilaco
lilio lilio
limako limako
limando limando
limfo limfo
limo limito
limonado limonado
limono limono
linĉi linchar (tr)
lingvistiko linguistiko
lingvo linguo
liniilo linealo
linio lineo
linko linco
lino lino
lintolo linjo
lipo labio
lirika lirika
liro liro
listo listo
literaturo literaturo
literi espelar (tr)
litero litero
lito lito
litografi litografar (tr)
litro litro
liuto liuto
liveri livrar (tr)
livida livida
locii locionar (tr)
logaritmo logaritmo
logi lurar (tr)
logiko logiko
loĝi habitar (x)
loĝi lojar (netr)
loĝio lojio
lojala loyala
lojto lotao
loko loko
loko plaso
lokomotivo lokomotivo
lokusto lokusto
loligo kalmaro
lolo lolio
lombardaĵo gajo
lombardejo lombardo
longa longa
longitudo longitudo
lorno lorno
loti lotriar (tr)
lotuso lotuso
lubriki lubrifikar (tr)
lucida lucida 
ludi (muzikon) plear (tr)
ludi ludar (netr)
lugro lugro
lui fretar (tr)
lui lokacar (tr)
luigi lugar (tr)
luko luko
Luksemburgo Luxemburgia
lukso luxo
lukti luktar (netr)
luli bersar (tr)
luli lular (tr)
lumbago lumbago
lumbalgio lumbago
lumbildo transparento
lumbo lumbo
lumbriko lombriko
lumi lumar (netr)
lumigi acendar (tr)
lumturo faro
lunarko krecento
lunatika lunatika
lunatiko lunatiko
lundo lundio
luno luno
lupeo lupo
lupo volfo
lupolo lupulo
lustro lustro
luti soldar (tr)
lutro lutro
M
maceri macerar (x)
maceriĝi macerar (x)
macutakeo macutako*
maĉi mastikar (tr)
Madagaskaro Madagaskar
Madono madono
magazeno magazino
magii magiar (netr)
magnetizi magnetizar (tr)
magneto magneto
magnezio magnezo
magnezo magnezio
magra (p) magra
mahagono mahagono
maizo maizo
majesto majesto
majfloro maifloro
majo mayo
majonezo mayonezo
majorano majorano
majoritato majoritato
majoro mayoro
majstro maestro
majusklo mayuskulo
maĵora majora
makadamo makadamo
makaronio makaronio
Makedonio Macedonia
maksimume admaxime
makulo makulo
makzelo maxilo
malabunda skarsa
malagrabla desagreabla
malajo Malayo
Malajzio Malaysia
malakra matida
malalta basa
malaltigi abasar (tr)
malaltiĝi decensar (x)
malami odiar (tr)
malamiko enemiko
malantaŝe retro
malantaŭ (spaco) dop
malantaŭen retro
malaperi desaparar (netr)
malario malario
malavantaĝo desavantajo
malbela leda
malbeni imprekar (netr)
malbeni maledikar (tr)
malbona inferiora
malbona mala 
malbrila matida
malĉasto luxurio
maldekstra sinistra
maldelikata grosiera
maldelikata ruda
maldika dina
maldika kaj longa tenua
maldiligenta indolenta
maldormi vigilar (netr)
malebla neposibla
maleolo maleolo
malesperi desesperar (netr)
malestimi konsputar (tr)
malfacila desfacila
malfekunda arida
malfeliĉa desfelica
malfeliĉo desfortuno
malfermi apertar (tr)
malforta debila
malforta febla
malfortigi amortisar (tr)
malfrua tarda
malgaja trista
malglata aspera
malglata grosiera
malgracia plumpa
malgranda mikra
malgrasa magra
malgrava meskina
malgraŭ malgre
malĝentila nepolita
malĝoja trista
malĝojigi dezolar (tr)
malhavi karear (tr)
malhelpi deshelpar (tr)
malhelpi impedar (tr)
malhelpi inkombrar (tr)
malhonesta deshonesta
malica maligna
malico malico
maligna maligna
maljuna olda
maljusta neyusta
malkara chipa
malkaŝa kandida
malkaŝi revelar (tr)
malklarigi trublar (tr)
malkonciza prolixa
malkonfesi renegar (tr)
malkonfuzi dicernar (tr)
malkontentigi deskontentigar (tr)
malkovri deskovrar (tr)
malkovri expozar (tr)
malkvieta desquieta
mallarĝa streta
mallaŭdi blamar (tr)
mallaŭta deslauta
mallonga kurta
mallongigi abreviar (tr)
mallongigi kontraktar (tr)
mallumo tenebro
malmiksi desmixar (tr)
malmola harda
malmulta poka
malneta desneta
malneto klado
malnobla leda
malnova anciena
malnovmoda obsoleta
malofta rara
malokupiĝi ociar (netr)
malordigi trublar (tr)
malpacienca nepacienta
malpeza lejera
malpezigi alejar (tr)
malplej minim(e)
malplena vakua
malplenigi exhaustar (tr)
malpli min(e)
malpliigi diminutar (x)
malpliiĝi diminutar (x)
malplimulto minoritato
malprofiti detrimentar (tr)
malpura despura
malpura nepura 
malpura sordida
malpurigi kontaminar (tr)
malpurigi polutar (tr)
malrapida lenta
malrekta nedireta
malriĉa povra
malsaĝa dessaja
malsana malada
malsano morbo
malsatego famino
malsati hungrar (netr)
malsekigi arozar (tr)
malsovaĝigi amansar (tr)
malsprita matida
malstreĉita laxa
malstrikta ampla
malsukcesi faliar (x)
malsukceso nesuceso
malsupera inferiora
malsupre infre
malsupreniri de decensar (x)
malŝarĝi descharjar (tr)
malŝpari disipar (tr)
Malto Malta
malto malto
maltrankvila netranquila
malutila nociva
malutili detrimentar (tr)
malvarm(ec)o frigoro
malvarma kolda
malvarmigi desvarmigar (tr)
malvigliĝi langorar (netr)
malvirto vicio
malvo malvo
mambesto mamifero
mamo mamo
mampinto mamilo
mamulo mamifero
mamuŝo mamushio*
mamuto mamuto
mandarino mandarino
mandato mandato
mandiblo mandibulo
mandolino mandolino
maneĝi entrenar (tr)
maneĝo manejo
manekeno manekino
mangano mangano
manglo manglo
mango mango
manĝeti restorar (su)
manĝi manjar (tr)
manĝi repastar (netr)
maniero maniero
manifesti manifestar (tr)
maniko maniko
manio manio
manipuli manipular (tr)
mankateno manoto
manki mankar (netr)
mano manuo
manometro manometro
manovri manovrar (x)
manplato palmo
mantelo mantelo
mantelo peliso
manto manto*
manufakturo manufakturo
manumo mansheto
manuskripto manuskripto
mapo mapo
marbordo litoro
marbordo plajo
marĉandi marchandar (tr)
marĉo marsho
mardo mardio
margarino margarino
marĝeno marjino
marini marinar (tr)
marioneto marioneto
markezo marquizo
marki merkar (tr)
markizo markezo
marko (mono) marko
marko marko 
markoti markotar (tr)
marlaktuko marlatugo
marleono marleono
marlutro marlutro
marmelado marmelado
marmoro marmoro
marmoto marmoto
maro maro
Maro Morta Maro Mortinta
Maro Nigra Maro Nigra
Maro Ruĝa Maro Reda
marodi marodar (netr)
Maroko Maroko
marono marono
Marso Marso
marŝalo marshalo
marŝi marchar (netr)
martelo martelo
marteso martro
martiro martiro
marto marto
marurso marurso
masaĝi masajar (tr)
masakri masakrar (tr)
masiva masiva
maski maskar (tr)
maskla maskula
maskovesti travestiar (tr)
maso maso
masoni masonar (tr)
masto masto
mastodonto mastodonto
mastro mastro
mastrumado menajo
masturbi onaniar (netr)
maŝino mashino
maŝo masho
matadoro matadoro
matematiko matematiko
matenmanĝi dejunar (netr)
mateno matino
materialo materio
materio materiajo
mato mato
matraco matraco
matrico matrico
matura adulta
matura matura
Maŭricio Maurico
Maŭritanio Mauritania
mazurko mazurko
meblo moblo
meĉo mecho
medalo medalio
mediacii intercesar (netr)
mediacii mediacar (tr)
mediana mediana
mediano mediano
medicino medicino
medikamento medikamento
medio medio
Mediteraneo Mediteranea
mediti meditar (x)
mediti rekolecar (netr)
medolo medulo
meduzo meduzo
megafono megafono
mejlo milio
mekaniko mekaniko
mekanismo mekanismo
Meksiko Mexikia
melankolio melankolio
meleagro dindo
melebena aspera
melki melkar (tr)
melo daxo
melodio melodio
melodramo melodramo
melolonto melolonto
melono melono
mem ipsa
membrano membrano
membro membro
memfiera superba
meminstruito autodidakto
memkritiki rekolecar (netr) 
memorando memorando
memori memorar (tr)
memriproĉi remorsar (netr)
mencii mencionar (tr)
mencii referar (x)
mendi komendar (tr)
meningo meningo
menso mento
mensogi mentiar (netr)
menstrui menstruar (netr)
mento minto
mentono mentono
menueto menueto
menuo menuo
menuzi* menuzar (netr)
mercera komerco mercero
meretriko meretriko*
mergi imersar (tr)
mergi submersar (tr)
meridiano meridiano
meriti meritar (tr)
merkato merkato
merkredo merkurdio
Merkuro Merkuro
mesaĝo mesajo
Mesio mesio
meso meso
mespilo mispelo
mestiza mestica
mestizo mestico
metabolo metabolio
metafiziko metafiziko
metaforo metaforo
metalo metalo
metalplato tolo
metalurgio metalurgio
metamorfozi metamorfosar (tr)
metano metano
meteoro meteoro
meteorologio meteorologio
meti pozar (tr)
meti fajron al acendar (tr)
meti kaptilon insidiar (tr)
metio mestiero
metodo metodo
metro metro
metropolo metropolo
mevo muevo
meza meza
mezuri mezurar (tr)
mi me
miaŭi miaular (netr)
mielĉelaro vabo
mielo mielo
mieno mieno
migdalo mandelo
migri migrar (netr)
mikrobo mikrobo
mikrofono mikrofono
mikrono mikrono
mikroskopo mikroskopo
miksi mixar (tr)
mil mil
miliardo miliardo
miligramo miligramo
mililitro mililitro
milimetro milimetro
milio milyeto
miliono miliono
milit(ar)ismo militarismo
militi militar (netr)
milvo milano
mimeografi mimeografar* (tr)
mimi mimar (tr)
mimozo mimoso
minaci minacar (tr)
mineralo mineralo
mini minar (tr)
miniaturo miniaturo
minimume adminime
ministerio ministerio
ministro ministro
minora minora
minoritato minoritato
minus minus 
minusklo minuskulo
minuto minuto
miopa miopa
miozoto miozoto
miraĝo mirajo
miraklo miraklo
mirigi astonar (tr)
mirinda splendida
mirindaĵo marvelo
misio misiono
miskompreni miskomprenar (tr)
mistero misterio
mistif(ik)i mistifikar (tr)
misuzi misuzar (tr)
mito mito
mitologio mitologio
mizeri mizerar (netr)
mjelo myelo
mobilizi mobilizar (tr)
moda chika
modelo modelo
moderigi alejar (tr)
moderigi moderar (tr)
moderigi temperar (tr)
moderna moderna
modesta modesta
modifi modifikar (tr)
modli esbosar (tr)
modli modlar (tr)
modo modo
moduli modulacar (tr)
mohajro mohero
moki mokar (tr)
mokso moxo*
mola mola
molara molara
molekulo molekulo
moleo molio
molesti molestar (tr)
molibdeno molibdo
moligi deshardigar (tr)
molusko molusko
momento instanto
momentumo momento
Monako Monako
monako monako
monarkio manarkio
monato monato
mondo mondo
monero moneto
Mongolio Mongolia
monitoro monitoro
mono pekunio
monografio monografio
monogramo monogramo
monokroma monokroma
monologo monologo
monopolo monopolo
monstro monstro
monteto kolino
monto monto
Monto Blanka Monto Blanka
montri montrar (tr)
monumento monumento
mopso mopso
morbilo morbilo
morbo (p) morbo
mordeti rodar (tr)
mordi mordar (tr)
morfino morfino
morgaŭ morge
moroj mori
mortero mortero
morti mortar (netr)
mortigi ocidar (tr)
moruo moruo
moruso moruso
moskito moskito
mosko mosko
mosto mosto
moŝto sinioro
motivo motivo
moto moto
motoro motoro
movi movar (x) 
moviĝadi friskar (netr)
moviĝi movar (x)
movo stroko
mozaiko mozaiko
Mozambiko Mozambik
mueli grindar (tr)
mueli muelar (tr)
muĝi grondar (netr)
muĝi mujar (netr)
muko muko
mulato mulato
muldi muldar (tr)
mulo mulo
multa multa
multekosta chera
multipliki multiplikar (tr)
multjara perena
mumeo mumeo*
mumio mumio
mungi mungar
mungoto mangusto
municipo municipo
munti muntar (tr)
murmuri murmurar (netr)
muro muro
muskato muskato
musko musko
muskolo muskulo
muslino muslino
muso muso
musono musono
mustardo mustardo
mustelo vizelo
muŝo musho
muta muta
mutuala mutuala
muzelo muzelo
muzeo muzeo
muziki muzikar (netr)
muziko muziko
N
na non
nabo nabo
nacio naciono
nadlo agulo
naftalino naftalino
nafto nafto
naĝi natar (netr)
naĝilo floso
naiva naiva
najbara vicina
najlo klovo
najtingalo naktigalo
Namibio Namibia
nano nano
napo napo
narciso narciso
naski parturar (tr)
naskiĝi naskar (netr)
natrio natro
natura malfeliĉo dizastro
naturo naturo
navigi navigar (x)
navo navo
Naŭruo Nauru
naŭziĝi nauzear (netr)
nazo nazo
nazpurigi mungar (su)
ne ne
ne no
neaktiveco neago
neatendita neexpektata
nebuli nebular (netr)
necerta necerta
necesa necesa
necesejo latrino
necesi importar (netr)
necesi mustar (netr)
Nederlando Nederlando
nedirebla nedicebla
nedubebla nedubebla
neebla neposibla 
neevitebla neevitebla
nefacila nefacila
nefrito nefrito
negativa negativa
negativo negativo
negi (p) negar (tr)
neglekti neglijar (tr)
negliĝo neglijeo
negoci negociar (tr)
negra negra
negro negro
neĝi nivar (netr)
nei negar (tr)
nei renegar (tr)
nek... nek... nek... nek...
nekomprenebla
nekomprenebla
nekontenta nekontenta
nekredebla nekredebla
nekrologo nekrologo
nekrozo nekroso
nemezurebla imensa
nemoveblaĵo imoblo
nenia nulo,
nenio nulo
nenio nihilo
neniu nulo
nenormala nenormala
neologismo neologismo
neono neono
neoportuna neoportuna
neordinara neordinara
neorganika neorganika
Nepalo Nepal
neperfekta neperfekta
nepino nepoto
neplenaĝa minora
nepo nepoto
nepotismo nepotismo
nepra infalibla
Neptuno Neptuno
nerekta mediata
nerekta nedireta
neresanigebla nesanigebla
nervo nervo
nervuro nervaturo
nesto nesto
neŝanĝebla nechanjebla
neta neta
netolerebla netoleranta
netraktebla plumpa
netransitiva netransitiva
nevalida invalida
nevidebla nevidebla
nevino nevino
nevo nevulo
neŭralgio nevralgio
neŭrastenio nevrastenio
neŭrozo nevroso
neŭtra neutra
neŭtrala neutra
ni ni
Nigerio Nigeria
Nigero Nijer
nigra nigra
Nikaragvo Nikaragua
nikelo nikelo
nikotino nikotino
niktalopa niktalopa
niktereŭto niktereuto*
nimbo halono
nimbo nimbo
nimfeo nenufaro
nimfo nimfo
nito riveto
nitrogeno nitro
nivelo nivelo
nizo sparviero
nobela nobela
nobla nobla
noci (P) nocar (tr)
nocio nociono
noĉo nocho
nodo nodo
nokti noktar (netr)
noktuo noktuo 
nokturno nokturno
nomado nomado
nombri enumerar (tr)
nombro nombro
nomenklaturo nomenklaturo
nomi nomar (tr)
nomi nominar (tr)
nominativo nominativo
nordo nordo
normo normo
Norvegio Norvegia
nostalgio nostalgio
notario notario
noti notar (tr)
notico notico
notora notora
Nov-Zelando Nov-Zelando
nova nova
nova recenta
novelo novelo
novembro novembro
novico novico
nu nu
nu or
nuanco nuanco
nubo nubo
nuda nuda
nudelo nudli
nugato nugato
nukleo nukleo
nuko nuko
nukso nuco
nuligi efacar (tr)
nuligi obliterar (tr)
nuligi revokar (tr)
nuligi ristornar (tr)
nulo zero
numeratoro numeratoro
numero numero
nun nun
nur nur
nutri nutrar (tr)
O
oazo oaziso
obei obediar (tr)
obeza (p) obeza
objekto objekto
objekto skopo
oblato oblato
oblato obleo
obligacio obligaciono
oblikva obliqua
oblonga oblonga
obscena obcena
obsedi obsedar (tr)
observi observar (tr)
obsevatorio observatorio
obskura obskura
obstaklo obstaklo
obstini obstinar (netr)
obstrukci impedar (tr)
obstrukci inkombrar (tr)
obstrukci obstruktar (tr)
obstrukci kreskon stuntar (tr)
obteni obtenar (tr)
obtuza obtuza
obuso obuso
Oceanio Oceania
oceano oceano
odori odorar (netr)
ofendi ofensar (tr)
oferi konsakrar (tr)
oferi ofrar (tr)
oferi sakrifikar (x)
ofertorio ofertorio
oficejo kontoro
ofici oficiar (netr)
oficiro oficiro
oficisto klerko
ofico ofico
ofta frequa
ofte ofte
ogro ogro
ok ok 
okaza incidenta
okaza kazuala
okaze de lor
okazi eventar (netr)
okazo okaziono
okcidento westo
okro okro
oksido oxido
oksigeno oxigeno
oktavo oktavo
oktobro oktobro
okulario okulalo
okulo okulo
okulta okulta
okulumi oglar (tr)
okulvitro binoklo
okupi okupar (tr)
okzalo oxalo
ol kam
olda (p) olda
oleo oleo
olimpiado olimpiado
olivo olivo
omaĝi homajar (tr)
Omano Oman
omaro homardo
ombrelo parapluvo
ombro ombro
omleto omleto
omnibuso omnibuso
ondeto rugo
ondo ondo
oni on
onidiro rumoro
onklino onklino
onklo onklulo
onomatopeo onomatopeo
opaka opaka
opalo opalo
operacii operacar (tr)
opero opero
opiaĵo opiato
opinii opinionar (tr)
opinii reputar (tr)
opio opiumo
oponi opozar (tr)
oportuna komoda
oportuna oportuna
opresi (p) opresar (tr)
optiko optiko
optimismo optimismo
orakolo oraklo
orangutango orangutano
oranĝo oranjo
oratoro oratoro
orbito orbito
ord(ig)i ordinar (tr)
ordigi ajustar (tr)
ordinara ordinara
ordoni imperar (tr)
orelo orelo
orfo orfano
organika organika
organismo organismo
organo organo
orgeno orgeno
orgio orgio
oriento esto
Oriento oriento
origino origino
orkestro orkestro
orkideo orkideo
orli orlar (tr)
ornam(aĵ)o ornamento
ornami ornar (tr)
ornitologio ornitologio
oro oro
orta orta
ortilo squadro
ortodoksa ortodoxa
ortografio ortografio
ortopedio ortopedio
oscedi bear (netr)
oscedi ocitar (netr)
oscili ocilar (netr)
osmozo osmoso 
ostenti (p) ostentar (x)
osto osto
ostro ostro
ovala ovala
ovalo ovalo
ovario ovario
ovo ovo
ovolo ovulo
ozono ozono
P
pacienca pacienta
Pacifiko Pacifiko
pacigi konciliar (tr)
paĉinko pachinko*
pafi pafar (tr)
pagana pagana
pagano pagano
pagi pagar (tr)
pagodo pagodo
paĝio pajo
paĝo pagino
pajlo palio
pakaĵo bagajo
pakaĵo pako
pakboto paketboto
Pakistano Pakistan
pala pala
palaco palaco
paladio paladio
palato palato
Palestino Palestina
palisandro palisandro
palisaro fenco
paliso paliso
palmo palmo
palpebro palpebro
palpi palpar (tr)
palpi tastar (netr)
palpit(aci)i palpitar (netr)
palto paltoto
palumbo palumbo
pamfleto pamfleto
panaceo panaceo
Panamo Panama
panei panear (netr)
panelo panelo
panika panika
paniklo panikulo
paniko paniko
pankreato pankreato
pano pano
panoramo panoramo
pansi pansar (tr)
pantalono bracho
pantalono pantalono
pantero pantero
pantoflo pantoflo
pantografo pantografo
pantomimo pantomimo
papago papagayo
papavo papavero
papero papero
papilio papiliono
papilo papilo
papiruso papiro
papo papo
papriko papriko
Papuo-Novgvineo PapuaNovguinea
parabolo parabolo
parade elmeti ostentar (x)
paradi paradar (netr)
paradizo paradizo
paradokso paradoxo
parafino parafino
parafrazi parafrazar (tr)
paragrafo paragrafo
Paragvajo Paraguay
paralakso paralaxo
paralela paralela
paralizi paralizar (tr)
paraliziĝi torporar (netr)
parametro parametro
paraŝuto parafalo 
parazita parazita
parazito parazito
parcelo parcelo
pardonebla veniala
pardoni pardonar (tr)
parenca parenta
parentezo parentezo
parfumo parfumo
pargeto parqueto
pario parieto
parki parkar* (tr)
parko parko
parlamento parlamento
parodii parodiar (tr)
paroli parolar (tr)
parotido parotido
parte duobligi klinar (x)
parte duobliĝi klinar (x)
partero partero
participo participo
partikulo partikulo
partio partio
partio partiso
partizano partizano
partnero partenero
parto parto
partopreni partoprenar (tr)
pasero pasero
pasi pasar (netr)
pasigi pasar (netr)
pasio pasiono
pasiva pasiva
pasko pasko
pasporto pasporto
pasteŭrizi pasteurisar (tr)
pasto pasto
pastro pastoro
paŝi pazar (netr)
paŝtejo prato
paŝtelo pastelo
paŝti pasturar (x)
paŝtiĝi pasturar (x)
patelo patelo
patento patento
patini sketar (netr)
pato padelo
patogena patogena
patologio patologio
patoso patoso
patrici estampar (tr)
patrino matro
patrino patrino
patrio patrio
patrioto patrioto
patro patrulo
patrolando patrio
patroli patroliar (netr)
patrono patrono
paviano babuino
paviliono paviliono
pavimo pavo
pavo pavono
paŭsi trasar (tr)
paŭti budar (netr)
paŭzi etapar (netr)
paŭzi pauzar (netr)
peco (ligno, metalo) spano
peco peco
peĉo pecho
pedagog(netr)o pedagog(netr)o
pedanto pedanto
pediko lauso
pego pego
pejorativa pejorativa
pejorativo pejorativo
pejzaĝo peizajo
peki pekar (netr)
pelikano pelikano
pelto furo
peltoĉapo shapko
pelveto bolo
pelvo (anat.) pelvo
pendi pendar (x)
pendigi pendar (x)
pendigi suspendar (tr)
pendolo pendulo 
pendseruro padloko
penetriĝi penetrar (netr)
peni penar (netr)
peniko pinselo
peniso peniso
penseo panseo
pensi pensar (x)
pensii pensionar (tr)
pensioni pensionar (tr)
penti repentar (x)
pentri piktar (tr)
peonio peonio
pepi gorgear (netr)
pepi pipiar (netr)
pepsino pepsino
peptono peptono
per per
pera mediata
percepti perceptar (tr)
perdeti egarar (tr)
perdi perdar (tr)
perdriko perdriko
perei perisar (netr)
perfekta perfekta
perfekto (gram.) perfekto
perfida perfida
perfidi trahizar (tr)
perfori perforar (tr)
perforti violentar (tr)
perforto impetuo
peri mediacar (tr)
periferio periferio
periodo periodo
peritoneito peritonito
peritoneo peritoneo
perkuti perkutar (tr)
perkuti tapotar (tr)
perlamota perlomatra
perlamoto perlomatro
perlo perlo
permesi admisar (tr)
permesi permisar (tr)
permuti permutar (tr)
perono perono
perpendikla perpendikla
perpleksa perplexa
persekuti persekutar (tr)
persekuti persequar (tr)
persiko persiko
persimono persimono*
Persio Persia
persisti perseverar (netr)
persisti persistar (netr)
persono persono
perspektiva perspektiva
perspektivo perspektivo
persvadi persuadar (tr)
perturbi perturbar (tr)
peruko peruko
Peruo Peru
pesaro pesario
pesi ponderar (tr)
pesilo balanco
pesimismo pesimismo
pesimisto pesimisto
pesto pesto
petalo petalo
petegi solicitar (tr)
petegi suplikar (tr)
peti pregar (tr)
peticii peticionar (netr)
petoli friskar (netr)
petoli gambolar (netr)
petoli petular (netr)
petrolo petrolo
petromizo lampredo
petroselo petroselo
peza grava
pezi pezar (netr)
pezocentro baricentro
pia pia
piano piano
piedbati kikar (tr)
piedingo estribo
piedo pedo
piedpremi fular (tr) 
piedsigno traco
pigmento pigmento
pigmeo pigmeo
pigo pigo
pikedo piketo
piki pikar (tr)
piki priklar (x)
piki stekar (tr)
pikiĝi priklar (x)
piklo piklo
pikniki piknikar (netr)
pilgrimi pilgrimar (netr)
pilko balono
pilko bulo
pilo pilio
pilolo pilulo
piloro piloro
piloti pilotar (tr)
pinaklo flecho
pinĉi pinchar (tr)
pinĉilo pinco
pinglo pinglo
pingveno pinguino
pino pino
pinto pinto
pioĉo pikono
pioĉo piocho
pioniro pioniro
pipeto pipeto
pipo pipo
pipro pipro
piramido piramido
pirato pirato
Pireneoj Pirenei
piro piro
pirogo pirogo
piroteknikaĵo pirotekno
pisti pistar (tr)
pistolo pistolo
piŝto pistono
pitoreska pitoreska
pizo pizo
placento placento
placo placo
plaĉi plezar (x)
plad(et)o plado
plado disho
plafono plafono
plagiati plajiar (x)
plago plago
plaĝo plajo
plaki plakizar (tr)
plako plako
plando plando
plandumo suolo
planedo planeto
plantago plantago
planti plantacar (tr)
planto planto
plasmo plasmo
plastika plastika
plastro plastro
plata plana
plata plata
platano platano
plateno platino
platformo platformo
plato plako
plaŭdi plaudar (x)
plaŭdiĝi plaudar (x)
pledi pledar (netr)
plej maxim(e)
plejsupera superlativa
plekogloso ayuo*
plektaĵo de jako frogo
plekti plektar (tr)
plena plena
plenaĝa majora
plenaĝulino muliero
plendi plendar (netr)
plenumi exekutar (tr)
pleto pleto
pleŭrito plevrito
pleŭro plevro
pleŭronekto pleuronekto
plezurigi delektar (tr) 
plezurigi kurtezar (tr)
plezuro plezuro
pli plu
pliaĝa seniora
pliaĝulo senioro
plie plus(e)
pliigi augmentar (x)
pliiĝi augmentar (x)
plilongigi prolongar (tr)
plimulto majoritato
plisi plisar (tr)
plori plorar (netr)
ploto gardio
plotono pelotono
plugi plugar (tr)
plugpioĉo hauo
plumbo plombo
plumo plumo
plumpa (p) plumpa
plumtufo penacho
plunĝi plunjar (netr)
pluraj plura
plus plus(e)
pluvi pluvar (netr)
pneŭmonio pulmonito
podagro goto
podagro podagro
poemo poemo
poeto poeto
poezio poezio
pogranda engrosa
pojnumo ponyeto
pokalo gobleto
pokalo kupo
polara polara
polarimetro polarimetro
polaro polaro
polekso polexo
polemiki polemikar (netr)
polico polico
poligamia poligama
poliglota poliglota
poligono poligono
poligrafo* poligrafo
polipo polipo
politiko politiko
polki polkar (netr)
Pollando Polonia
polmo palmo
polo Polono
polonezo polonezo
polpo polpo
poluri polisar (tr)
poluso polo
polvo polvo
pomado pomado
pomo pomo
pompo pompo
ponardo poniardo
poneo poneo
ponto ponto
poplino poplino
poplo poplo
popolnombro populo
popolo populo
populara populara
por po
por por
porcelana porcelana
porcelanaĵo porcelana
porciigi repartisar (tr)
porcio loto
porcio porciono
pordo pordo
pordofermilo falco
poreo porelo
porkgraso saimo
porko porko
pornografa pornografa
pornografio pornografio
portalo portalo
porti portar (tr)
portiko portiko
Porto-Riko Porto-Riko
portreto portreto
Portugalio Portugal 
posedi posedar (tr)
post (tempo) pos
post dop
postaĵo sedo
poste retro
posten retro
posteno posteno
postmorgaŭ posmorge
postrikolti glinar (tr)
postuli postular (tr)
poŝo posho
poŝto posto
potenca potenta
potenco (mat.) potenco
poto poto
povi darfar (netr)
povi povar (x)
povra (p) povra
pozi posturar (netr)
pozicio (mil.) poziciono
pozitiva pozitiva
praavino preavino
praavo preavulo
pragmato pragmato
praktiki praktikar (tr)
praloĝanta aborijena
praloĝanto aborijeno
pramo paromo
prapatroj ancestro
prava korekta
pravigi justifikar (tr)
precedento precedento
precipa precipua
precipe precipua
precipiti precipitar (tr)
predikato predikato
prediki predikar (tr)
prefaco prefaco
prefekto prefekto
preferi fantaziar (tr)
preferi preferar (tr)
prefikso prefixo
preĝi pregar (tr)
preludi preludar (netr)
premi presar (tr)
premio premio
premiso premiso
preni prenar (tr)
preni sizar (tr)
preni manŝon repastar (netr)
preni sur sin asumar (tr)
prepara preliminara
prepari preparar (x)
prepozicio prepoziciono
presi imprimar (tr)
preskaŭ preske
preskribi preskriptar (tr)
preskriptigi preskritar (tr)
prestiĝo prestijo
preta pronta
preteksti pretextar (tr)
preter preter
preterito preterito
preterpasi preterpasar (tr)
preventi preventar (tr)
prezenca prezenta
prezenti introduktar (tr)
prezenti prizentar (tr)
prezervi prezervar (tr)
prezidi prezidar (x)
prezo preco
pri pri
priciza preciza
prijuĝi adjudikar (tr)
prijuĝi kritikar (tr)
priĵuri vovar (x)
primadono primadono
primara primara
primitiva primitiva
primolo primulo
princino princino
principo principo
princo princulo
printempo printempo
priskribi deskriptar (tr)
prismo prismato 
pritrakti negociar (tr)
privata privata
privilegio privilejo
pro pro
probabla probabla
problemo problemo
procedi procedar (netr)
procento procento
procesi procesar (netr)
procesii procesionar (netr)
prociono ratono
proda proda
prodigi prodigar (tr)
produkti produktar (tr)
profana profana
profani profanacar (tr)
profesii profesar (tr)
profesio profesiono
profesoro profesoro
profeto profeto
profilo profilo
profiti profitar (tr)
profunda profunda
prognozi prognozar (tr)
programo programo
progresi progresar (netr)
progresio progresiono
prohibicii interdiktar (tr)
projekcii projektar (tr)
projekciilo projektoro
projekti projetar (tr)
proklami proklamar (tr)
prokrasti ajornar (tr)
prokrasto fristo
proksima al surfaco reza
proksime de proxim
proksimiĝi al acesar (tr)
prolet(ari)o proletario
prologo prologo
promeni promenar (netr)
promesi promisar (tr)
promocii promocar (tr)
promontoro promontorio
pronomo pronomo
prononci pronuncar (tr)
propagandi propagandar (tr)
propagi propagar (tr)
propeti intercesar (netr)
proponi propozar (tr)
proporcio proporciono
propra propra
proprieti proprietar (tr)
prospekto prospekto
prosperi prosperar (netr)
prostato prostato
prostitui prostitucar (tr)
proteino proteino
protekti protektar (tr)
protestanta protestanta
protestanto protestanto
protesti protestar (netr)
protesti remonstrar (netr)
protezo protezo
protokolo protokolo
protoplasmo protoplasmo
proverbo proverbo
provi probar (tr)
provinco provinco
provizi furnisar (tr)
provizi provizar (tr)
provizora provizora
provkudri imbastar (tr)
provoki provokar (tr)
provtubo epruveto
prozo prozo
pruda pruda
prudenta prudenta
prujni pruinar (netr)
prujno pruino
pruno pruno
pruntedoni prestar (tr)
pruntepreni pruntar (tr)
pruo pruo
Prusio Prusia
pruvi pruvar (tr)
pruvi verifikar (tr) 
psalmo psalmo
pseŭdo- pseudopseŭdonoma
pseudonima
pseŭdonomo pseudonimo
psikiatrio psikiatrio
psiko psiko
psikolog(netr)o psikolog(netr)o
pubera pubera
publika publika
publikigi enuncar (tr)
pubosto pubio
pudelo pudelo
pudori pudorar (netr)
pudro pudro
puftabureto pufo
pugno pugno
pugo hancho
pulio pulio
pulmo pulmono
pulo pulco
pulpo paplo
pulpo pulpo
pulsi pulsar (x)
pulvo pulvero
pulvoro pulvero
pumiko pumico
pumo pumao
pumpi pumpar (tr)
punĉo puncho
puni punisar (tr)
punkcii puncionar (tr)
punkto punto
puno amendo
punto dentelo
pupilo pupilo
pupitro pupitro
pupo pupeo
pura pura
purigi purgar (tr)
puritano puritano
purpura purpura
purpuro purpuro
puso puso
pustulo pustulo
puŝi pulsar (x)
puŝi malsupren depresar (tr)
puto puteo
putri putrar (netr) R
rabarbo rubarbo
rabati rabatar (tr)
rabi raptar (tr)
rabi spoliar (tr)
rabio rabio
rabotilo raboto
racio raciono
radiatoro radiatoro
radii iradiar (tr)
radii radiar (x)
radiko radiko
radio radio
radioaktiva radioaktiva
radiografii radiografar (tr)
radioskopii radioskopar (tr)
radiotelefoni radiotelefonar (tr)
radiumo radiumo
radiuso radio
radiuso radiuso
rado roto
radrondo felgo
rafano rafano
rafini rafinar (tr)
rajdi kavalkar (tr)
rajo rayo
rajto yuro
rakedo raketo
raketo fuzeo
raki* rakar (tr)
rakonti naracar (tr)
rakonti rakontar (tr)
rampi reptar (tr)
ranca ranca
rangifero rentiro 
rango rango
rano rano
rapida rapida
rapo nabeto
rapo rapo
raporti raportar
rapsodio rapsodio
rara rara
raso raso
raspi raspar (tr)
rasti rastar (tr)
ratif(ik)i ratifikar (tr)
rato rato
ravi ravisar (tr)
ravino ravino
raŭka rauka
raŭpo raupo
razi razar (tr)
reakcii reaktar (netr)
reakiri rekuperar (tr)
reala reala
rearmi riarmizar (netr)
rebonigi remediar (tr)
rebuso rebuso
recenta (p) recenta
recenzi recensar (tr)
recepto recepto
recidivi recidivar (netr)
reciproka reciproka
reciti recitar (tr)
redakti redaktar (tr)
redingoto redingoto
redukti reduktar (x)
reedz(in)igi rimariajar (tr)
refaldi trusar (tr)
referenci referar (x)
refleksa reflexa
reflekso reflexo
reflekti reflektar (tr)
reflektilo reflektoro
reflektoro reflektoro
reformi reformar (tr)
refrakti refraktar (tr)
refreno refreno
refreŝigi rifreshigar (tr)
regali festinar (x)
regali regalar (tr)
regaliĝi festinar (x)
regatto regato
regeneri regenerar (tr)
regento regento
regi guvernar (tr)
regi imperar (tr)
regi regnar (x)
regimento regimento
regio regio
regiono regiono
registro registro
regresi regresar (netr)
regul(ig)i regular (tr)
reguligi adjustigar (tr)
reguligi ajustar (tr)
reĝi regnar (x)
reĝimo rejimo
reĝino rejino
reĝo rejulo
rehabilit(aci)i rehabilitar (tr)
rehabilitacii habilitar (tr)
reklamacii reklamacar (tr)
reklami reklamar (x)
rekomendi rekomendar (tr)
rekompenci rekompensar (tr)
rekompenci revanchar (netr)
rekordo rekordo
rekruti rekrutar (tr)
rekta direta
rekta rekta
rektangulo rektangulo
rektif(ik)i rektifikar (tr)
rektilo linealo
rektoro rektoro
rektumo rektumo
rekviz(ici)i requizitar (tr)
relajso relayo
relegacii relegar (tr)
reliefo reliefo 
religio religio
relikvo reliquio
relo relo
remaĉi ruminar (x)
remaĉuloj ruminanto
remburaĵo pado
remburaĵo polstero
remburi burizar (tr)
rememori rimemorar (tr)
remi remar (x)
remizo hangaro
remkonkurso regato
rendevuo rendevuo
Renesanco renesanco
renkonti renkontrar (tr)
reno reno
renovigi rinovigar (tr)
rento rento
renversi renversar (x)
renversi subversar (tr)
repagi rimborsar (tr)
repeli repulsar (tr)
repertuaro repertorio
repliki replikar (x)
repreni retraktar (tr)
reprezalii reprezalar (netr)
reprezalii revanchar (netr)
reprezenti reprezentar (tr)
reprodukti propagar (tr)
reprodukti riproduktar (tr)
reptilioj reptero
Republiko Dominika
Respubliko Dominga
resalti rikochar (netr)
resanigi risanigar (tr)
resaniĝi konvalecar (netr)
reskripto reskripto
resonanci resonar (netr)
respekti respektar (tr)
respekti veneracar (tr)
respektiva rispektiva
respondeci responsar (netr)
respondi respondar (x)
responsi responsar (netr)
respubliko republiko
restaĵo reliquio
restaŭri restaurar (tr)
resti restar (netr)
resti senlabora chomar (x)
restitui restitucar (tr)
restrikti restriktar (tr)
resumi rekapitular (tr)
resumi rezumar (tr)
reteni enternar (tr)
reteni retenar (tr)
retino retino
reto reto
retoriko retoriko
retorto retorto
retroflui refluxar (netr)
retroiri retretar (netr)
retroiri retroirar (netr)
retuŝi retushar (tr)
revelacii revelar (tr)
revenĝi reprezalar (netr)
revenĝi revanchar (netr)
reverso reverso
revi revar (tr)
revidi rividar (tr)
reviviĝi rezurektar (netr)
revizii revizar (tr)
revoki revokar (tr)
revoluciigi revolucionar (tr)
revolvero revolvero
revui revuar (tr)
reŭmatismo reumatismo
rezedo rezedo
rezervi rezervar (tr)
rezidento rezidento
rezidi rezidar (netr)
reziduo reziduo
rezigni demisionar (netr)
rezigni renuncar (tr)
rezigni rezignar (x)
rezino rezino
rezisti rezistar (tr) 
rezoni rezonar (netr)
rezulti rezultar (netr)
ribela rebela
ribeleti sediciar (netr)
ribeli revoltar (netr)
ribo ribo
ricevi recevar (tr)
ricino ricino
riĉa richa
ridi ridar (netr)
rifo rifo
rifuĝi refujar (netr)
rifuzi refuzar (tr)
rigardi regardar (tr)
rigardi reputar (tr)
rigida rigida
rigil(ar)o rigo
riglilo riglo
rigoro rigoro
rikolti koliar (tr)
rikolti rekoltar (tr)
rilati referar (x)
rilati relatar (x)
rimarki remarkar (tr)
rimedo moyeno
rimeno gurto
rimeno rimeno
rimo rimo
rimorsi remorsar (netr)
ringo ringo
rinocero rinocero
ripari remediar (tr)
ripari reparar (tr)
ripeti iterar (tr)
ripeti rekapitular (tr)
ripeti repetar (tr)
ripo kosto
ripozi etapar (netr)
ripozi repozar (netr)
riproĉi blamar (tr)
riproĉi reprochar (tr)
riski riskar (tr)
risorto resorto
risortoreto trampolino
ritmo ritmo
rivala rivala
rivalo rivalo
riveli revelar (tr)
riverego fluvio
riverenci reverencar (netr)
rivero rivero
Eburbordo Ivora Rivo
Rivo Ora Bordo Ora
rizo rizo
rizopogono rizopogono*
robo robo
rodi rodar (tr)
rododendro rododendro
roko roko
rokoka rokoka
rokoko rokoko
rolo rolo
romano romano
romantika romantika
rombo rombo
rompi ruptar (tr)
rompi violacar (tr)
rompiĝema frajila
ronda ronda
rondiro cirkuito
rondiro turo
ronki ronkar (netr)
roso roso
rostbefo rosbifo
rosti rostar (x)
rostopinglo spiso
rostro rostro
rotacii rotacar (netr)
rotango rotano
rozario rozario
rozmalvo malvarozo
rozo rozo
rubando rubando
rubekolo redpektoro
rubeno rubino
rubio rubio 
rubo eskombro
ruboleo unto
rubriko rubriko
rubusujo rovo
ruĝa reda
ruĝebruna rufa
ruinigi devastar (tr)
ruinigi ruinar (tr)
ruiniĝi krular (netr)
rukti ruktar (netr)
rukuli rukular (netr)
ruleto ruleto
ruli rular (x)
ruliĝi rular (x)
rulsoni rotolar (netr)
Rumanio Rumania
rumini ruminar (x)
ruminuloj ruminanto
rumo rumo
ruro ruro
rusa Rusa
Rusio Rusia
ruso Ruso
rustika rustika
rusto rusto
rutino rutino
ruzi ruzar (netr)
Ruando Rwanda S
sabato sabato
sabato saturdio
sablo sablo
sabloŝtono greso
sabro sabro
sacerdoto sacerdoto
safiro safiro
safrano safrano
sagaca sagaca
sago flecho
saĝa saja
Saharo Sahara
sakarino sakarino
sakeo sakeo*
sako sako
sakramento sakramento
sakrilegii sakrilejar (netr)
sakro sakrumo
saksofono saxofono
sakuro sakuro*
salajri salariar (tr)
salamandro salamandro
salato salado
saldi saldar (tr)
saliko oziero
saliko saliko
salivo salivo
salmo salmono
salo salo
salono salono
salpetro salpetro
saltetadi gambolar (netr)
salti saltar (netr)
salti springar (netr)
salti voltijar (netr)
saltoreto trampolino
salubra salubra
saluti salutar (tr)
Salvadoro Salvador
salvio salvio
sama sama
sammomenta simultana
Samoo Samoa
samseksa homeosexuala
San-Marino San-Marino
sana sana
sanatorio sanatorio
sandalo sandalo
sandviĉo sandwicho
sango sango
sankcii sancionar (tr)
sankta sakra
sankta santa
sanktejo santuario
sanktolei uncionar (tr) 
sanskrita sanskrita
santalo santalo
sapo sapono
sardino sardino
sarkasmo sarkasmo
sarki sarklar (tr)
sarkomo sarkomo
satano Satano
sate sat(e)
satelito satelito
sateno satino
satigi minimume saciar (tr)
satiro satiro
saturi saturar (tr)
Saturno Saturno
savano savano
savi salvar (tr)
savojbrasiko sabeliko
saŭco sauco
sceno ceno
scienco cienco
scii savar (tr)
sciuro skurelo
se se
sebo sebo
sed ma
sed or
segi segar (tr)
segmento segmento
seĝo stulo
seka sika
sekalo sekalo
sekci sekar (tr)
sekojo sequoyo
sekrecii sekrecar (tr)
sekreta arkana
sekreta sekreta
sekretario sekretario
sekskuniĝi kun koitar (tr)
sekso sexuo
sekto sekto
sekulara sekulara
sekundara sekundara
sekundi sekondar (tr)
sekundo sekundo
sekura sekura
sekvanto epigono
sekvi konsequar (netr)
sekvi sequar (tr)
sekvi sucedar (x)
selakto selakto
selekti selektar (tr)
seleno selenio
selo selo
semajno semano
semestro semestro
semi semar (tr)
seminario seminario
semo semino
sen sen
senakva arida
senatenta neatencoza
senatenta sensorga
senato senato
senco senco
senĉesa sencesa
sendependeco nedependo
sendi sendar (tr)
sendormeco nedormado
senduba senduba
Senegalo Senegal
senerara infalibla
senerara neeroriva
senesperigi deceptar (tr)
senigi privacar (tr)
senkonsciigi aturdar (tr)
senkulpa inocenta
senkulpa senkulpa
senmorta nemortiva
senmova stacionara
senpaga gratuita
senpolvigi senpolvigar (tr)
senprokrasta sumaria
sensacio sensaciono
sensenca sensenca
sensentigi aturdar (tr) 
senso senso
sensuala sensuala
sent(iment)o sentimento
sentenco sentenco
senti sentar (tr)
sentinelo sentinelo
senutila neutila
senzorga sensorga
sep sep
separi separar (tr)
sepio sepio
sepsa septa
septembro septembro
septeto septeto
sepulti sepultar (tr)
serafo serafo
serĉi serchar (tr)
serena serena
serenado serenado
serĝento serjento
serĝo serjo
serio progresiono
serio serio
serioza serioza
sero sero
serpento serpento
serpo serpo
serumo serumo
seruro seruro
servi servar (x)
servico servico
ses sis
sesangulo hexagono
sesteto sexteto
sesto sexto
severa severa
sezamo sezamo
sezono sezono
sfero sfero
sfinkso sfinxo
sfinktero sfintero
si su
Siamo Siam
Siberio Siberia
sibli sisar (netr)
Sicilio Sicilia
sidi (birdo) perchar (netr)
sidi sidar (netr)
sieĝi siejar (tr)
sifiliso sifiliso
sifono sifono
sigeli siglar (tr)
signali signalar (tr)
signaturi signatar (tr)
signifi signifikar (tr)
signo signo
silabo silabo
silenti (pri) tacar (x)
silenti silencar (netr)
silicio siliko
silico silico
silko silko
silogismo silogismo
silueto silueto
siluro siluro
simbolo simbolo
simetria simetra
simfonio simfonio
simila simila
simio simio
simpatii simpatiar (tr)
simpla simpla
simptomo simptomo
simuli simular (tr)
simultana simultana
sin turni al rekursar (netr)
sinapo sinapo
sincera sincera
sindeteni kontinencar (netr)
sindikato sindikato
Singapuro Singapore
singardema cirkonspekta
singulara singulara
singulti hipar (netr)
singulti singlutar (netr)
sinistra (p) sinistra 
sinjorino damo
sinjorino siorino
sinjoro siorulo
sinki sinkar (x)
sinkigi sinkar (x)
sinkopi sinkopar (netr)
sinkrona sinkrona
sino sino
sinonima sinonima
sintakso sintaxo
sintezo sintezo
sinuo sinuo
sireno sireno
Sirio Siria
siropo siropo
sismo sismo
sismometro sismometro
sistemo sistemo
sitelo sitelo
situigi situar (tr)
skabelo skabelo
skabio skabio
skafaldo eshafodo
skalo skalo
skandali skandalar (tr)
skandi skandar (tr)
Skandinavio Skandinavia
skani skandar (tr)
skapolo skapulo
skarabo skarabeo
skarlata skarlata
skarlatino skarlatino
skarlato skarlato
skarpo sharpo
skatolo buxo
skatolo etuyo
skeleto skeleto
skemo skemo
skeptika skeptika
skermi skermar (netr)
sketi sketar (netr)
skio skio
skismo skismo
skisto skisto
skizi skisar (tr)
skizo klado
sklavo sklavo
skolastika skolastika
skolastikulo skolastiko
skolo skolo
skolopendro skolopendro
skolopo bekaso
skombro makrelo
skorbuto skorbuto
skorpio skorpiono
Skotlando Skotia
skrapi skrapar (tr)
skreno skreno
skribcilindro plateno
skribi skribar (tr)
skribi sube subskribar (x)
skroto skroto
skrupulo skrupulo
skui sukusar (tr)
skulavi rinsar (tr)
skulpti skultar (tr)
skurĝi flogar (tr)
skvamo squamo
slango slango
smeraldo smeraldo
snufi sniflar (x)
sobra sobra
socio socio
sodo sodo
sodomii sodomiar (netr)
sofismo sofismo
sofo kanapeo
sofo sofao
soifi durstar (netr)
soifi hungrar (netr)
soj(saŭc)o soyo
sojlo solio
soklo piedestalo
soklo soklo
sola singulara
sola sola 
sola solitara
soldato soldato
soldi soldar (tr)
solena solena
soleo soleo
solida solida
solidara solidara
solstico solstico
solventa solventa
solvi solvar (tr)
Somalio Somali-lando
somero somero
sonato sonato
sondi sondar (tr)
soneto soneto
sonĝi sonjar (netr)
soni sonar (netr)
sonora sonora
sonorilo klosho
sonorilo sonalio
sopirĝemi sospirar (netr)
sopiri sospirar (netr)
soprano soprano
sorbeto sorbeto
sordida (p) sordida
sorĝi sorcar (netr)
sortimenti asortar (tr)
sovaĝa grosiera
sovaĝa sovaja
Sovetio Sovetia
spaco spaco
spaliro espalero
spanielo spanielo
sparko cintilo
spasmo spasmo
spasmoplori singlutar (netr)
speciala partikulara
specif(ik)a specifika
specimeno specimeno
specio speco
speco sorto
speco speco
spegulo spegulo
spektaklo spektaklo
spekti spektar (tr)
spektindaĵo spektaklo
spektro spektro
spektroskopo spektroskopo
spekul(aci)i spekular (netr)
spermo spermo
sperti experiencar (tr)
spico spico
spiko spiko
spili tapar (tr)
spinaco spinato
spindelo spindelo
spino spino
spioni spionar (tr)
spirala helicoida
spiralo helico
spiralo spiralo
spirblovi snortar (netr)
spiri respirar (x)
spirito spirito
splinto lasho
splisi splisar (tr)
splito splito
spongo sponjo
spontan(e)a spontana
sporada sporadika
sporo sporo
sporto sporto
sprito esprito
sprono sporno
sproso sproso
spuli spular (tr)
spuro traco
sputi sputar (tr)
Sri-Lanko Sri-Lanka
stabila stabila
stablo tresto
stabo stabo
stacidomo staciono
stacio staciono
stadiono stadio
stadiumo stadio 
stagni stagnar (netr)
stajo vanto
stalo stablo
stampi stampar (tr)
standardo banero
standardo standardo
stango stango
stano stano
staplo staplo
stari stacar (netr)
starigi erektar (tr)
starti departar (netr)
starti startar (x)
startigi startar (x)
stati standar (netr)
statiko statiko
statistiko statistiko
statuo statuo
staturo staturo
statuto statuto
stebi stebar (tr)
steleo steleo
stelo stelo
sten(ograf)i stenografar (tr)
sterila sterila
sterko dungo
sterko sterko
sterkulio sterkulio*
sterni sternar (tr)
sternumo sternumo
stertori stertorar (netr)
stetoskopo stetoskopo
stifto splinto
stifto stifto
stilo stilo
stilzo stelto
stimuli stimular (tr)
stipendio stipendio
stipo stipo
stoika stoika
stoko stoko
stomako stomako
stompi estompar (tr)
stovo stuvo
straba straba
stranga stranja
strangoli strangular (tr)
strategio strategio
strato strado
stratumo strato
streĉi tensar (tr)
streko streko
streta (p) streta
stridi stridar (netr)
striglilo striglo
strigo huo
strigo strigo
striki strikar (netr)
strikta strikta
striktaĵo malyoto
strio strio
strukturo strukturo
strumo strumo
struto strucho
studento studento
studi studiar (x)
stufi stufar (tr)
stuko gipso
stuko stuko
stulta stulta
stulta stupida
stumbli butar (netr)
stumbligi gambitar (tr)
stumpo stumpo
stupo stupo
sturno sturno
sub sub
suba juniora
subakva rifo brizanto
subigi amansar (tr)
subigi domtar (tr)
subigi submisar (tr)
subigi subordinar (tr)
subita subita
subjekto subjekto
subjunktivo subjuntivo 
subjupo subjupo
sublima sublima
sublimi sublimar (tr)
submara submara
subpremegi opresar (tr)
subpremi aplastar (tr)
subpremi depresar (tr)
subpremi represar (tr)
subpremi supresar (tr)
subskribi signatar (tr)
subskribi subskribar (x)
substanco substanco
substantivo substantivo
substitui substitucar (tr)
substreki substrekizar (netr)
subŝtofo futero
subtegmento atiko
subtegmento granario
subteni entratenar (tr)
subteni mantenar (tr)
subteni sekondar (tr)
subteni suntenar (tr)
subteni suportar (tr)
subteni sustenar (tr)
subtera subtera
subteretaĝo basamento
subteretaĝo subteretajo
subtila subtila
subtrahi sustracionar (tr)
suburbo preurbo
suburbo suburbo
subvencii subsidiar (tr)
subvencii subvencionar (tr)
subvesto subvesto
suĉi sugar (tr)
suĉigi alaktar (tr)
Sudano Sudan
sudo sudo
suferi subisar (tr)
suferi sufrar (x)
suferi tetanon tetanar (netr)
suferigi tribular (tr)
sufero ditreso
sufiĉa ampla
sufiĉe sat(e)
sufiĉi suficar (netr)
sufikso sufixo
sufoki sufokar (x)
sufokiĝi sufokar (x)
sugesti sugestar (tr)
sugestii sugestar (tr)
sukceno sucino
sukcesi sucesar (netr)
sukero sukro
suko sapto
suko suko
sulfato sulfato
sulfuro sulfo
sulketo rugo
sulkigi frunsar (tr)
sulko sulko
sumo sumo
sumoo sumoo*
sunfloro tornasolo
suno suno
sunombrelo parasuno
super super
super(-jaro) bisextila
supera superiora
superflua superflua
superflui superfluar (netr)
superi ecelar (netr)
superi preponderar (netr)
superlativo superlativa
supersatigi gavar (tr)
superstiĉo superstico
superŝarĝi supercharjar (tr)
suplemento suplemento
supo supo
supozi supozar (tr)
supraĵo averso
supre supre
supreniri acensar (x)
supro kolmo
supro kresto
supro somito 
sur an
sur sur
surda surda
surfaco surfaco
Surinamo Surinam
surmeti metar (tr)
suro suro
surogato surogato
surprizi astonar (tr)
surprizi surprizar (tr)
surpriziĝi tresayar (netr)
surrigardi surveyar (tr)
surtuto surtuto
suspekti suspektar (tr)
suspendo fristo
suspensi suspensar (tr)
suspiri (p) sospirar (netr)
susuri susurar (x)
susurigi susurar (x)
sutro sutro*
suverena suverena
suvereno suvereno
Svazilando Swazilando
Svedio Suedia
svedo Suedo
sveni esvanar (netr)
Svislando Suisia Ŝ
ŝablono shablono
ŝafido agnelo
ŝafo mutono
ŝafto shafto
ŝajni semblar (netr)
ŝajnigi fingar (tr)
ŝakalo shakalo
ŝakisto shako
ŝakludanto shako
ŝalo shalo
ŝaloto shaloto
ŝalti acendar (tr)
ŝalupo batelo
ŝalupo shalupo
ŝampui shampunar (tr)
ŝanceliĝi balotear (netr)
ŝanceliĝi shancelar (netr)
ŝanceliĝi vacilar (netr)
ŝanco chanco
ŝanĝi alterar (tr)
ŝanĝi chanjar (x)
ŝanĝiĝi chanjar (x)
ŝarĝaŭto charioto
ŝarĝi charjar (tr)
ŝarĝi kargar (tr)
ŝarko sharko
ŝati afecionar (tr)
ŝati fantaziar (tr)
ŝaŭme salivi bavar (netr)
ŝaŭmo spumo
ŝelko bretelo
ŝelo shelo
ŝelo skalio
ŝerci jokar (x)
ŝi el(u)
ŝi lu
ŝiama perpetua
ŝika chika
ŝildblazono skudo
ŝildo shildo
ŝimi moldar (netr)
ŝinko shinko
ŝintoo shinto*
ŝipo navo
ŝipperei naufrajar (netr)
ŝiri lacerar (tr)
ŝirmi shirmar (tr)
ŝlimo fango
ŝlimo slamo
ŝlosilo klefo
ŝminki grimar (tr)
ŝmiri indutar (tr)
ŝnura funikulara
ŝoĉuo shochuo*
ŝoki shokar (x)
ŝokiĝi shokar (x) 
ŝorbeto sorbeto
ŝoseo choseo
ŝoso sproso
ŝovelilo shovelo
ŝovi shovar (tr)
ŝovi stekar (tr)
ŝovi rapidumlevilon
(dentoradon) ingranar (x)
ŝovinismo shovinismo
ŝovpordo kulispordo
ŝpari sparar (x)
ŝparloki kolokar (tr)
ŝpato spado
ŝpinspindelo ruko
ŝpruci spricar (netr)
ŝranko armoro
ŝraŭbi klemar (tr)
ŝraŭbi viar (x)
ŝraŭbo skrubo
ŝtalo stalo
ŝtato stato
ŝteli furtar (tr)
ŝtipo lenio
ŝtofo stofo
ŝtono (materio) petro
ŝtono stono
ŝtopi klozar (tr)
ŝtopi stopar (tr)
ŝtormi tempestar (netr)
ŝtormo sturmo
ŝtrumpo kalzo
ŝtrumpzono gartero
ŝtuparo eskalero
ŝuldi debar (x)
ŝultro shultro
ŝunto shunto
ŝuo shuo
ŝutro shutro
ŝveli bufar (netr)
ŝveligi inflar (tr)
ŝvito sudoro
T
t. ekvilibrigi equilibrar (netr)
t. likigi likar (netr)
t. penetri penetrar (netr)
t. variiĝi variar (netr)
tabako tabako
tabano tabano
tabelo tabelo
tabio tabio*
tablo tablo
tabulo planko
tabulo tabulo
tabuo tabuo
tabureto tabureto
tafto tafto
tagmanĝi dinear (netr)
tago ( horoj) dio
tago (kontraŭ nokto) jorno
tajdo mareo
Tajlando Tailando
tajlori taliar (tr)
tajloro talioro
Tajvano Taiwan
takimetro takimetro
taksi evaluar (tr)
taksi taxar (tr)
taksimetro taximetro
taksuso taxuso
taktiko taktiko
takto takto
talento talento
talio tayo
talismano talismano
talko talko
talpo talpo
taluso taluso
tamburino tamburino
tamburo tamburo
tamen tamen
tampono tampono
tandeme tandeme 
tani (specialmetode) mejisar (tr)
tanilo tano
tanino tanino
tanko tanko
Tanzanio Tanzania
tapeto tapeto
tapiro tapiro
tapiŝo tapiso
tarda (p) tarda
tarifo tarifo
taro taro
tart(a)ro tartaro
tasko tasko
Tasmanio Tasmania
taso taso
tatamio tatamio*
tatui tatuar (netr)
taverno taverno
tavolo strato
taŭga apta
taŭgi fitar (netr)
taŭro tauro
teatro teatro
tedi tedar (tr)
tegi tegar (tr)
tegmento tekto
tegolo tegulo
tegumento tegumento
tekniko tekniko
teknologio teknologio
teksi texar (tr)
teksto texto
telefoni telefonar (tr)
telegrafi telegrafar (tr)
telegramo telegramo
telepatio telepatio
telero disho
teleskopo teleskopo
televido televiziono
temerara temerara
temo temato
temo temo
temperamento
temperamento
temperaturo temperaturo
tempesti tempestar (netr)
tempio temporo
templo templo
tempo tempo
tenajlo tenalio
tenaro tenaro
tendenci tendencar (netr)
tendeno tendino
tendo tendo
tendro tendro
tenebro tenebro
tenera tenera
teni retenar (tr)
teni tenar (tr)
tenilo mancho
tenio tenio
teniso teniso
tenoristo tenoro
tenoro tenoro
tenti tentar (tr)
teo teo
teologio teologio
teoremo teoremo
teorio teorio
tepida tepida
terakoto terakoto
terapio terapio
teraso teraso
terceto terceto
terebintarbo terebinto
terebinto terpentino
tereno tereno
teriako teriako
teritorio teritorio
termino termino
termito termito
termometro termometro
terni sternutar (netr)
tero tero
terpomo terpomo 
tertremo sismo
teruriĝi terorar (netr)
testamenti testamentar (netr)
testiko testikulo
testudo tortugo
tezo tezo
tia tala
tiam lore
Tibeto Tibet
tibio tibio
tie ibe
tie ĉi hike
tiel tam
tiel tanta
tiel�ckiel�c tam�c kam�c
tifo tifo
tifojdo tifoido
tifono tifono
tigo stipo
tigro tigro
tikli titilar (tr)
tiko kutio
tiktaki tiktakar (netr)
tilio tilio
timema timida
timi pavorar (netr)
timi timar (tr)
timiano timiano
timida (p) timida
timono timono
timpano timpano
timtremi fremisar (netr)
timuso timuso
tindro tindro
tineo tineo
tinko tencho
tinkturi tintar (tr)
tino tino
tinti tinklar (netr)
tinuso atuno
tio lo
tio ĉi co
tipo tipo
tirano tirano
tiri tirar (tr)
tirojda tiroida
tirojdo tiroido
titanio titano
titano titano
titolo titulo
titri titrar (tr)
tiu ita
tiu ta
tiu ĉi ca
tiuj ita
tiuj ta
Tobago Trinidado kaj
Tobago Trinidad
toksa toxika
toksi intoxikar (tr)
toksino toxino
toleri subisar (tr)
toleri suportar (tr)
toleri tolerar (tr)
tolo telo
tomato tomato
tombo tombo
tombolo tombolo
tondi rekortar (tr)
tondi tondar (tr)
tondilo cizo
tondri tondrar (netr)
Tongo Tonga
tonika tonika
tono tono
tonsilo tonsilo
tonsuro tonsuro
topo topo
topografio topografio
torako torako
torĉo torcho
tordi tordar (tr)
torento torento
torfo torfo
torio torio
torni tornar (tr) 
torpedo torpedo
torporiĝi torporar (netr)
torso torso
torto torto
tosti tostar (netr)
tra tra
trabo trabo
tradicii tradicionar (tr)
traduki tradukar (tr)
trafiko trafiko
tragedio tragedio
trajno (mil.) traino
trajno treno
trajto traito
trakeo trakeo
traktato traktato
trakti traktar (tr)
traktoro traktoro
tralasi permear (tr)
tramo tramo
trampli (p) tramplar (netr)
trampolino trampolino
tranci trancar (netr)
tranĉaĵo loncho
tranĉeo fosato
tranĉeo trancheo
tranĉi tranchar (tr)
tranĉilo kultelo
trankvila kalma
trankvila tranquila
trans trans
transformatoro
transformatoro
transformi transformar (tr)
transfuzi transfuzar (tr)
transigi transferar (tr)
transistoro transistoro
transiti transitar (netr)
transloĝiĝi translojar (netr)
transloki diplasar (tr)
transloki translacar (x)
translokiĝi lokomocar (netr)
translokiĝi translacar (x)
transmeti diplasar (tr)
transmisii transmisar (tr)
transpasi transitar (netr)
transpiri transpirar (netr)
transporti transportar (tr)
transversa transversa
trapenetri permear (tr)
trapezo trapezo
trati tratar (tr)
travadi travadar (tr)
traŭmo traumato
tre tre
trefo trefo
trejni habilitar (tr)
tremi tremar (netr)
tremolo tremulo
trempi imersar (tr)
trempi trempar (tr)
treni remorkar (tr)
treni tranar (tr)
treti tramplar (netr)
trezoro trezoro
tri tri
triangulo triangulo
tribo tribuo
tribun(us)o tribono
tribunalo tribunalo
tribuno tribuno
tributi tributar (netr)
triciklo triciklo
trifolio trifolio
triĥofitozo tinio
trikfliki darnar (tr)
triki trikotar (tr)
triliono triliono
trimestro trimestro
trinki drinkar (tr)
trinkmono gelto
tripiedo tripedo
trista (p) trista
tritiko frumento
triumfi triumfar (netr)
triviala triviala 
trivitaĵo fripo
tro grasa obeza
tro(e) tro(e)
trofeo trofeo
troglodito regolo
trogo trogo
troigi exajerar (x)
troiĝi exajerar (x)
trojko troika
troleo troleo
trombo trombo
trombono trombono
trompeblulo dupo
trompi trompar (tr)
trono trono
tropiko tropiko
troti trotar (netr)
trotuaro trotuaro
trovi trovar (tr)
trui puncar (tr)
trulo trulo
trumpeto trumpeto
trunko trunko
truo truo
trupo trupo
trusto trusto
truto truto
tualeti tualetar (netr)
tuberkulozo tuberkloso
tubero gibo
tubero tubero
tuberoso tuberoso
tubeto tubulo
tubo tubo
tufo tufo
tuj quik
tujagema ajila
tujo tuyo
tuko tuko
tulipo tulipo
tulo tulo
tumoro tumoro
tumulti tumultar (netr)
tundro tundro*
tunelo tunelo
Tunizio Tunizia
tuno tuno
turbano turbano
turbino turbino
turbo tupio
turdo turdo
turka Turka
Turkio Turkia
turkiso turkezo
turko Turko
turmenti tormentar (tr)
turni turnar (x)
turniĝi jirar (netr)
turniĝi turnar (x)
turniri turnirar (netr)
turo turmo
turto turturo
tusi tusar (netr)
tuŝi tushar (x)
tuŝo takto
tuta tota
tute tote
U
udono udono*
uf! uf!
Ugando Uganda
ugviso uguiso*
ulaĉo kerlo
ulcero ulcero
ulmo ulmo
ulno kubito
ulo kerlo
ultimato ultimato
ultra- ultra
ululi ulular (netr)
umbiliko umbiliko
umbro umbro
uncio unco
ungo unglo 
ungvento unguento
uniforma uniforma
uniformo uniformo
unika unika
unikorno unikorno
universitato universitato
universo universo
uno unuo un
unu un
unuafoje erste
unuanima unanima
unuigi unionar (tr)
unukornulo unikorno
ununombra singulara
unuokula tuerta
unuokululo tuerto
unutona monotona
uragano uragano
uranio urano
urbo civito
urbo urbo
uremio uremio
ureo ureo
uretero uretero
uretro uretro
urino urino
urso urso
urtikario urtikario
urtiko urtiko
Urugvajo Uruguay
usonano Usano
Usono Usa
utao wakao*
utero utero
utila utila
utopio utopio
utramaro ultramaro
uverturo uverturo
uvulo uvulo
uzi uzar (tr)
uzi sian in ĝenion por injeniar (tr)
uzuri uzurar (netr)
uzurpi suplantar (tr)
uzurpi uzurpar (tr) Ŭ
ŭato wato
V
vaflo vaflo
vagi vagar (netr)
vagino vagino
vagono vagono
vakcino vacino
vaki vakar (netr)
vakso vaxo
vakua vakua
valida valida
valizo valizo
valo valo
valori valorar (netr)
valsi valsar (netr)
valvo valvo
vampiro vampiro
vana vana
vango vango
vanilo vanilo
vantem(ec)o vanitato
vanto vanto
vaporo vaporo
varbi engajar (tr)
varicelo varicelo
varii variar (netr)
variko variko
variolo variolo
varma varma
varma fonto termo
varmejo stuvo
varmejo teplico
varmeta tepida
varmo kaloro
varmodomo teplico 
varo varo
varpi urdar (tr)
vasabio wasabio*
vasalo vasalo
vasta imensa
vasta vasta
Vatikano Vatikano
vato vato
vazelino vazelino
vazo vazo
ve! ve!
vefto wefto
vegeti vejetar (netr)
veino portvejno porta
vejno veino
vekiĝi vekar (netr)
vektoro vektoro
veldi weldar (tr)
velki langorar (netr)
velki velkar (netr)
velo seglo
veluro veluro
vendi debitar (tr)
vendi vendar (tr)
vendredo venerdio
veneni intoxikar (tr)
veneno veneno
venera venerala
Venezuelo Venezuela
venĝi venjar (tr)
veni venar (netr)
venigi querar (tr)
venki vinkar (tr)
venti ventar (netr)
vento vento
ventoli ventilar (tr)
ventro (de animalo) pancho
ventro ventro
ventroparoli ventroparolar (netr)
ventumi fanar (tr)
ventumi ventizar (tr)
Venuso Venuso
vepro busho
vera vera
verando verando
verbo verbo
verda verda
verdigro verdigriso
verdikto verdikto
vere advere
vergi flogar (tr)
vergo vergo
verki (libro) skriptar (tr)
verko verko
vermiĉelo vermicelo
vermo vermo
verniero verniero
verniso verniso
verso verso
verŝi varsar (tr)
vertebro vertebro
vertebruloj vertebrozo
vertico vertico
vertiĝi vertijar (netr)
vertikala vertikala
veruko veruko
vervo vervo
vespermanĝi dinear (netr)
vespermanĝi supear (netr)
vespero vespero
vesperto vespertilio
vespo vespo
vestiblo vestibulo
vesto vesto
veŝto jileto
veŝto vestono
veterano veterano
veterinaro veterinaro
vetero vetero
veti pariar (tr)
vetoi vetar (tr)
veturi vehar (netr)
veturilo veturo
veziketo ampulo
veziko veziko
vi tu 
vi vi (pl.)
vi vu (sing.)
viadukto viadukto
vibri vibrar (netr)
vicgrafo viskomto
vicio vecho
vidanto testo
vidi vidar (tr)
vidva vidva
vigla vivaca
viktimo viktimo
vilaĝo vilajo
vilao vilaa*
vinagro vinagro
vindi vindar (tr)
vino vino
vintro vintro
vintrodormi hivernar (netr)
violo violo
violonĉelo violoncelo
violono violino
vipi flogar (tr)
vira maskula
viraĉo kerlo
virbovo tauro
virga virga
virina femina
viro viro
virto vertuo
virtuala virtuala
virtuoza virtuoza
virtuozo virtuozo
virulenta virulenta
viruso viruso
viscero vicero
viskio wiskio
visko mistelo
viskoza viskoza
vistario wistario*
viŝi vishar (tr)
vitelo vitelo
vito vito
vitrino vetrino
vitro vitro
vitroŝranko vetrino
viveca vivaca
vivi vivar (netr)
vizaĝo vizajo
vizi vistar (tr)
viziero viziero
vizio viziono
vizitadi frequentar (tr)
viziti vizitar (tr)
vizono vizelo
Vjetnamo Vietnam
voĉdoni votar (netr)
voĉo voco
vodevilo vodevilo
vojaĝi voyajar (netr)
vojaĝo turo
vojo voyo
vokalo vokalo
volbo vulto
volframo wolframo
voli volar (tr)
volonte ..i voluntar (x)
volonti voluntar (x)
volontulo voluntario
volto volto
volumeno volumino
volumo tomo
volupta sensuala
volupto luxurio
volupto volupto
volvi spular (tr)
volvi vindar (tr)
vomi vomar (x)
vortaro dicionario
vortaro lexiko
vorto vorto
vortofinaĵo dezinenco
vosto kaudo
vualo velo
vulgara vulgara
vulkano volkano
vulpo foxo 
vulturo vulturo
vulvo vulvo
vundi lezar (tr)
vundi vundar (tr)
vundo plago
Z
Zairo Zaire
Zambio Zambia
zebro zebro
zefiro zefiro
zenito zenito
zigzagi zigzagar (netr)
Zimbabvo Zimbabwe
zingibro jinjero
zinko zinko
zirkono zirkono
zizifo jujubo
zono zono
zoologio zoologio
zorgi sorgar (tr)
zorgi suciar (tr)
zumi zumar (netr)

}}}</pre>
</div>
<div title="DisableWikiLinksPlugin" creator="YourName" modifier="YourName" created="201306080910" tags="systemConfig" changecount="1">
<pre>/***
|Name|DisableWikiLinksPlugin|
|Source|http://www.TiddlyTools.com/#DisableWikiLinksPlugin|
|Version|1.6.0|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|plugin|
|Description|selectively disable TiddlyWiki's automatic ~WikiWord linking behavior|
This plugin allows you to disable TiddlyWiki's automatic ~WikiWord linking behavior, so that WikiWords embedded in tiddler content will be rendered as regular text, instead of being automatically converted to tiddler links.  To create a tiddler link when automatic linking is disabled, you must enclose the link text within {{{[[...]]}}}.
!!!!!Usage
&lt;&lt;&lt;
You can block automatic WikiWord linking behavior for any specific tiddler by ''tagging it with&lt;&lt;tag excludeWikiWords&gt;&gt;'' (see configuration below) or, check a plugin option to disable automatic WikiWord links to non-existing tiddler titles, while still linking WikiWords that correspond to existing tiddlers titles or shadow tiddler titles.  You can also block specific selected WikiWords from being automatically linked by listing them in [[DisableWikiLinksList]] (see configuration below), separated by whitespace.  This tiddler is optional and, when present, causes the listed words to always be excluded, even if automatic linking of other WikiWords is being permitted.  

Note: WikiWords contained in default ''shadow'' tiddlers will be automatically linked unless you select an additional checkbox option lets you disable these automatic links as well, though this is not recommended, since it can make it more difficult to access some TiddlyWiki standard default content (such as AdvancedOptions or SideBarTabs)
&lt;&lt;&lt;
!!!!!Configuration
&lt;&lt;&lt;
&lt;&lt;option chkDisableWikiLinks&gt;&gt; Disable ALL automatic WikiWord tiddler links
&lt;&lt;option chkAllowLinksFromShadowTiddlers&gt;&gt; ... except for WikiWords //contained in// shadow tiddlers
&lt;&lt;option chkDisableNonExistingWikiLinks&gt;&gt; Disable automatic WikiWord links for non-existing tiddlers
Disable automatic WikiWord links for words listed in: &lt;&lt;option txtDisableWikiLinksList&gt;&gt;
Disable automatic WikiWord links for tiddlers tagged with: &lt;&lt;option txtDisableWikiLinksTag&gt;&gt;
&lt;&lt;&lt;
!!!!!Revisions
&lt;&lt;&lt;
2008.07.22 [1.6.0] hijack tiddler changed() method to filter disabled wiki words from internal links[] array (so they won't appear in the missing tiddlers list)
2007.06.09 [1.5.0] added configurable txtDisableWikiLinksTag (default value: &quot;excludeWikiWords&quot;) to allows selective disabling of automatic WikiWord links for any tiddler tagged with that value.
2006.12.31 [1.4.0] in formatter, test for chkDisableNonExistingWikiLinks
2006.12.09 [1.3.0] in formatter, test for excluded wiki words specified in DisableWikiLinksList
2006.12.09 [1.2.2] fix logic in autoLinkWikiWords() (was allowing links TO shadow tiddlers, even when chkDisableWikiLinks is TRUE).  
2006.12.09 [1.2.1] revised logic for handling links in shadow content
2006.12.08 [1.2.0] added hijack of Tiddler.prototype.autoLinkWikiWords so regular (non-bracketed) WikiWords won't be added to the missing list
2006.05.24 [1.1.0] added option to NOT bypass automatic wikiword links when displaying default shadow content (default is to auto-link shadow content)
2006.02.05 [1.0.1] wrapped wikifier hijack in init function to eliminate globals and avoid FireFox 1.5.0.1 crash bug when referencing globals
2005.12.09 [1.0.0] initial release
&lt;&lt;&lt;
!!!!!Code
***/
//{{{
version.extensions.DisableWikiLinksPlugin= {major: 1, minor: 6, revision: 0, date: new Date(2008,7,22)};

if (config.options.chkDisableNonExistingWikiLinks==undefined) config.options.chkDisableNonExistingWikiLinks= false;
if (config.options.chkDisableWikiLinks==undefined) config.options.chkDisableWikiLinks=false;
if (config.options.txtDisableWikiLinksList==undefined) config.options.txtDisableWikiLinksList=&quot;DisableWikiLinksList&quot;;
if (config.options.chkAllowLinksFromShadowTiddlers==undefined) config.options.chkAllowLinksFromShadowTiddlers=true;
if (config.options.txtDisableWikiLinksTag==undefined) config.options.txtDisableWikiLinksTag=&quot;excludeWikiWords&quot;;

// find the formatter for wikiLink and replace handler with 'pass-thru' rendering
initDisableWikiLinksFormatter();
function initDisableWikiLinksFormatter() {
	for (var i=0; i&lt;config.formatters.length &amp;&amp; config.formatters[i].name!=&quot;wikiLink&quot;; i++);
	config.formatters[i].coreHandler=config.formatters[i].handler;
	config.formatters[i].handler=function(w) {
		// supress any leading &quot;~&quot; (if present)
		var skip=(w.matchText.substr(0,1)==config.textPrimitives.unWikiLink)?1:0;
		var title=w.matchText.substr(skip);
		var exists=store.tiddlerExists(title);
		var inShadow=w.tiddler &amp;&amp; store.isShadowTiddler(w.tiddler.title);
		// check for excluded Tiddler
		if (w.tiddler &amp;&amp; w.tiddler.isTagged(config.options.txtDisableWikiLinksTag))
			{ w.outputText(w.output,w.matchStart+skip,w.nextMatch); return; }
		// check for specific excluded wiki words
		var t=store.getTiddlerText(config.options.txtDisableWikiLinksList);
		if (t &amp;&amp; t.length &amp;&amp; t.indexOf(w.matchText)!=-1)
			{ w.outputText(w.output,w.matchStart+skip,w.nextMatch); return; }
		// if not disabling links from shadows (default setting)
		if (config.options.chkAllowLinksFromShadowTiddlers &amp;&amp; inShadow)
			return this.coreHandler(w);
		// check for non-existing non-shadow tiddler
		if (config.options.chkDisableNonExistingWikiLinks &amp;&amp; !exists)
			{ w.outputText(w.output,w.matchStart+skip,w.nextMatch); return; }
		// if not enabled, just do standard WikiWord link formatting
		if (!config.options.chkDisableWikiLinks)
			return this.coreHandler(w);
		// just return text without linking
		w.outputText(w.output,w.matchStart+skip,w.nextMatch)
	}
}

Tiddler.prototype.coreAutoLinkWikiWords = Tiddler.prototype.autoLinkWikiWords;
Tiddler.prototype.autoLinkWikiWords = function()
{
	// if all automatic links are not disabled, just return results from core function
	if (!config.options.chkDisableWikiLinks)
		return this.coreAutoLinkWikiWords.apply(this,arguments);
	return false;
}

Tiddler.prototype.disableWikiLinks_changed = Tiddler.prototype.changed;
Tiddler.prototype.changed = function()
{
	this.disableWikiLinks_changed.apply(this,arguments);
	// remove excluded wiki words from links array
	var t=store.getTiddlerText(config.options.txtDisableWikiLinksList,&quot;&quot;).readBracketedList();
	if (t.length) for (var i=0; i&lt;t.length; i++)
		if (this.links.contains(t[i]))
			this.links.splice(this.links.indexOf(t[i]),1);
};
//}}}</pre>
</div>
<div title="LoadRemoteFileThroughProxy" modifier="YourName" created="200703202229" modified="201312301206" tags="systemConfig">
<pre>/***
|''Name:''|LoadRemoteFileThroughProxy (previous LoadRemoteFileHijack)|
|''Description:''|When the TiddlyWiki file is located on the web (view over http) the content of [[SiteProxy]] tiddler is added in front of the file url. If [[SiteProxy]] does not exist &quot;/proxy/&quot; is added. |
|''Version:''|1.1.0|
|''Date:''|mar 17, 2007|
|''Source:''|http://tiddlywiki.bidix.info/#LoadRemoteFileHijack|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0|
***/
//{{{
version.extensions.LoadRemoteFileThroughProxy = {
 major: 1, minor: 1, revision: 0, 
 date: new Date(&quot;mar 17, 2007&quot;), 
 source: &quot;http://tiddlywiki.bidix.info/#LoadRemoteFileThroughProxy&quot;};

if (!window.bidix) window.bidix = {}; // bidix namespace
if (!bidix.core) bidix.core = {};

bidix.core.loadRemoteFile = loadRemoteFile;
loadRemoteFile = function(url,callback,params)
{
 if ((document.location.toString().substr(0,4) == &quot;http&quot;) &amp;&amp; (url.substr(0,4) == &quot;http&quot;)){ 
 url = store.getTiddlerText(&quot;SiteProxy&quot;, &quot;/proxy/&quot;) + url;
 }
 return bidix.core.loadRemoteFile(url,callback,params);
}
//}}}
</pre>
</div>
<div title="MarkupPreHead" creator="YourName" modifier="YourName" created="201306061157" modified="201306080919" changecount="3">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;link rel=&quot;shortcut icon&quot; href=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Flag_of_Ido_%28new%29.svg/1200px-Flag_of_Ido_%28new%29.svg.png&quot; type=&quot;image/x-icon&quot;&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="PageTemplate" creator="YourName" modifier="YourName" created="201306061158" changecount="1">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="PasswordOptionsPlugin" modifier="YourName" created="200704220851" modified="201312301206" tags="systemConfig">
<pre>/***
|''Name:''|PasswordOptionPlugin|
|''Description:''|Extends TiddlyWiki options with non encrypted password option.|
|''Version:''|1.0.2|
|''Date:''|Apr 19, 2007|
|''Source:''|http://tiddlywiki.bidix.info/#PasswordOptionPlugin|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0 (Beta 5)|
***/
//{{{
version.extensions.PasswordOptionPlugin = {
	major: 1, minor: 0, revision: 2, 
	date: new Date(&quot;Apr 19, 2007&quot;),
	source: 'http://tiddlywiki.bidix.info/#PasswordOptionPlugin',
	author: 'BidiX (BidiX (at) bidix (dot) info',
	license: '[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D]]',
	coreVersion: '2.2.0 (Beta 5)'
};

config.macros.option.passwordCheckboxLabel = &quot;Save this password on this computer&quot;;
config.macros.option.passwordInputType = &quot;password&quot;; // password | text
setStylesheet(&quot;.pasOptionInput {width: 11em;}\n&quot;,&quot;passwordInputTypeStyle&quot;);

merge(config.macros.option.types, {
	'pas': {
		elementType: &quot;input&quot;,
		valueField: &quot;value&quot;,
		eventName: &quot;onkeyup&quot;,
		className: &quot;pasOptionInput&quot;,
		typeValue: config.macros.option.passwordInputType,
		create: function(place,type,opt,className,desc) {
			// password field
			config.macros.option.genericCreate(place,'pas',opt,className,desc);
			// checkbox linked with this password &quot;save this password on this computer&quot;
			config.macros.option.genericCreate(place,'chk','chk'+opt,className,desc);			
			// text savePasswordCheckboxLabel
			place.appendChild(document.createTextNode(config.macros.option.passwordCheckboxLabel));
		},
		onChange: config.macros.option.genericOnChange
	}
});

merge(config.optionHandlers['chk'], {
	get: function(name) {
		// is there an option linked with this chk ?
		var opt = name.substr(3);
		if (config.options[opt]) 
			saveOptionCookie(opt);
		return config.options[name] ? &quot;true&quot; : &quot;false&quot;;
	}
});

merge(config.optionHandlers, {
	'pas': {
 		get: function(name) {
			if (config.options[&quot;chk&quot;+name]) {
				return encodeCookie(config.options[name].toString());
			} else {
				return &quot;&quot;;
			}
		},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	}
});

// need to reload options to load passwordOptions
loadOptionsCookie();

/*
if (!config.options['pasPassword'])
	config.options['pasPassword'] = '';

merge(config.optionsDesc,{
		pasPassword: &quot;Test password&quot;
	});
*/
//}}}</pre>
</div>
<div title="ReplaceDoubleClick" creator="YourName" modifier="YourName" created="201306061159" changecount="1">
<pre>/%
!info
|Name|ReplaceDoubleClick|
|Source|http://www.TiddlyTools.com/#ReplaceDoubleClick|
|Version|2.0.0|
|Author|Eric Shulman|
|License|http://www.TiddlyTools.com/#LegalStatements|
|~CoreVersion|2.1|
|Type|transclusion|
|Description|disable doubleclick-to-edit-tiddler or replace doubleclick with shift/ctrl/alt+singleclick|
Usage:
&lt;&lt;&lt;
{{{
&lt;&lt;tiddler ReplaceDoubleClick&gt;&gt; or
&lt;&lt;tiddler ReplaceDoubleClick with: key trigger&gt;&gt;
}}}
*''key'' (optional)
**''none'' (default=disables double-click)
**''ctrl, shift,'' or ''alt'' invokes the action only when the indicated key is used in combination with the mouse.
*''trigger'' (optional)&lt;br&gt;is either 'click' or 'doubleclick' (default).
&lt;&lt;&lt;
Example:
&lt;&lt;&lt;
{{{&lt;&lt;tiddler ReplaceDoubleClick with: shift click&gt;&gt;}}}
&lt;&lt;tiddler ReplaceDoubleClick with: shift click&gt;&gt;//(use shift+click to edit this tiddler)//
&lt;&lt;&lt;
!end
!show
&lt;&lt;tiddler {{
	var here=story.findContainingTiddler(place);
	if (here &amp;&amp; here.ondblclick) {
		here.setAttribute('editKey','none');
		var key='$1'; if (key=='$'+'1') key='none'
		if (['shift','ctrl','alt'].contains(key))
			here.setAttribute('editKey',key+'Key');
		var trigger=('$2'=='click')?'onclick':'ondblclick';
		here.save_dblclick=here.ondblclick;
		here.ondblclick=null;
		if (here.getAttribute('editKey')!='none')
			here[trigger]=function(e) {
				var ev=e?e:window.event;
				if (ev[this.getAttribute('editKey')])
					this.save_dblclick.apply(this,arguments);
			}
	}'';}}&gt;&gt;
!end
%/&lt;&lt;tiddler {{var src='ReplaceDoubleClick';src+(tiddler&amp;&amp;tiddler.title==src?'##info':'##show')}} with: [[$1]] [[$2]]&gt;&gt;</pre>
</div>
<div title="SiteSubtitle" creator="YourName" modifier="YourName" created="201306061205" modified="201403040930" changecount="17">
<pre>//Provizora vortaro//</pre>
</div>
<div title="SiteTitle" creator="YourName" modifier="YourName" created="201306061205" modified="201401011554" changecount="7">
<pre>Ido-Esperanto</pre>
</div>
<div title="StyleSheet" creator="YourName" modifier="YourName" created="201306061159" modified="201306080909" changecount="2">
<pre>body {font-size:0.9em; font-family:verdana,arial,helvetica; margin:0; padding:0;}
.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:0em 0 0.1em .5em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:0em 0 .1em .5em; left:0px; top:0px;}
#displayArea {margin:-1em 4em 0em 4em; }
@media screen and (max-width: 600px) {#displayArea {margin: auto;}}
.viewer table, table.twtable {margin:0.8em 0;width:100%;}
.viewer a{color: #000;text-decoration:none;background:transparent;}
.viewer a:hover{color:#03f;text-decoration:underline;background:transparent;}
.toolbar {font-size:0em;}
</pre>
</div>
<div title="ToolbarCommands" creator="YourName" modifier="YourName" created="201306061201" changecount="1">
<pre>|~ViewToolbar|+editTiddler|
|~EditToolbar|+saveTiddler -cancelTiddler copyTiddler deleteTiddler|</pre>
</div>
<div title="TspotSetupPlugin" modifier="YourName" created="200808081041" modified="201312310554" tags="systemConfig" changecount="1">
<pre>/***
Description: Contains the stuff you need to use Tiddlyspot
Note, you also need UploadPlugin, PasswordOptionPlugin and LoadRemoteFileThroughProxy
from http://tiddlywiki.bidix.info for a complete working Tiddlyspot site.
***/
//{{{

// edit this if you are migrating sites or retrofitting an existing TW
config.tiddlyspotSiteId = 'sambahsa';

// make it so you can by default see edit controls via http
config.options.chkHttpReadOnly = false;
window.readOnly = false; // make sure of it (for tw 2.2)
window.showBackstage = true; // show backstage too

// disable autosave in d3
if (window.location.protocol != &quot;file:&quot;)
	config.options.chkGTDLazyAutoSave = false;

// tweak shadow tiddlers to add upload button, password entry box etc
with (config.shadowTiddlers) {
	SiteUrl = 'http://'+config.tiddlyspotSiteId+'.tiddlyspot.com';
	SideBarOptions = SideBarOptions.replace(/(&lt;&lt;saveChanges&gt;&gt;)/,&quot;$1&lt;&lt;tiddler TspotSidebar&gt;&gt;&quot;);
	OptionsPanel = OptionsPanel.replace(/^/,&quot;&lt;&lt;tiddler TspotOptions&gt;&gt;&quot;);
	DefaultTiddlers = DefaultTiddlers.replace(/^/,&quot;[[WelcomeToTiddlyspot]] &quot;);
	MainMenu = MainMenu.replace(/^/,&quot;[[WelcomeToTiddlyspot]] &quot;);
}

// create some shadow tiddler content
merge(config.shadowTiddlers,{

'TspotControls':[
 &quot;| tiddlyspot password:|&lt;&lt;option pasUploadPassword&gt;&gt;|&quot;,
 &quot;| site management:|&lt;&lt;upload http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/store.cgi index.html . .  &quot; + config.tiddlyspotSiteId + &quot;&gt;&gt;//(requires tiddlyspot password)//&lt;br&gt;[[control panel|http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/controlpanel]], [[download (go offline)|http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/download]]|&quot;,
 &quot;| links:|[[tiddlyspot.com|http://tiddlyspot.com/]], [[FAQs|http://faq.tiddlyspot.com/]], [[blog|http://tiddlyspot.blogspot.com/]], email [[support|mailto:support@tiddlyspot.com]] &amp; [[feedback|mailto:feedback@tiddlyspot.com]], [[donate|http://tiddlyspot.com/?page=donate]]|&quot;
].join(&quot;\n&quot;),

'TspotOptions':[
 &quot;tiddlyspot password:&quot;,
 &quot;&lt;&lt;option pasUploadPassword&gt;&gt;&quot;,
 &quot;&quot;
].join(&quot;\n&quot;),

'TspotSidebar':[
 &quot;&lt;&lt;upload http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/store.cgi index.html . .  &quot; + config.tiddlyspotSiteId + &quot;&gt;&gt;&lt;html&gt;&lt;a href='http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/download' class='button'&gt;download&lt;/a&gt;&lt;/html&gt;&quot;
].join(&quot;\n&quot;),

'WelcomeToTiddlyspot':[
 &quot;This document is a ~TiddlyWiki from tiddlyspot.com.  A ~TiddlyWiki is an electronic notebook that is great for managing todo lists, personal information, and all sorts of things.&quot;,
 &quot;&quot;,
 &quot;@@font-weight:bold;font-size:1.3em;color:#444; //What now?// &amp;nbsp;&amp;nbsp;@@ Before you can save any changes, you need to enter your password in the form below.  Then configure privacy and other site settings at your [[control panel|http://&quot; + config.tiddlyspotSiteId + &quot;.tiddlyspot.com/controlpanel]] (your control panel username is //&quot; + config.tiddlyspotSiteId + &quot;//).&quot;,
 &quot;&lt;&lt;tiddler TspotControls&gt;&gt;&quot;,
 &quot;See also GettingStarted.&quot;,
 &quot;&quot;,
 &quot;@@font-weight:bold;font-size:1.3em;color:#444; //Working online// &amp;nbsp;&amp;nbsp;@@ You can edit this ~TiddlyWiki right now, and save your changes using the \&quot;save to web\&quot; button in the column on the right.&quot;,
 &quot;&quot;,
 &quot;@@font-weight:bold;font-size:1.3em;color:#444; //Working offline// &amp;nbsp;&amp;nbsp;@@ A fully functioning copy of this ~TiddlyWiki can be saved onto your hard drive or USB stick.  You can make changes and save them locally without being connected to the Internet.  When you're ready to sync up again, just click \&quot;upload\&quot; and your ~TiddlyWiki will be saved back to tiddlyspot.com.&quot;,
 &quot;&quot;,
 &quot;@@font-weight:bold;font-size:1.3em;color:#444; //Help!// &amp;nbsp;&amp;nbsp;@@ Find out more about ~TiddlyWiki at [[TiddlyWiki.com|http://tiddlywiki.com]].  Also visit [[TiddlyWiki.org|http://tiddlywiki.org]] for documentation on learning and using ~TiddlyWiki. New users are especially welcome on the [[TiddlyWiki mailing list|http://groups.google.com/group/TiddlyWiki]], which is an excellent place to ask questions and get help.  If you have a tiddlyspot related problem email [[tiddlyspot support|mailto:support@tiddlyspot.com]].&quot;,
 &quot;&quot;,
 &quot;@@font-weight:bold;font-size:1.3em;color:#444; //Enjoy :)// &amp;nbsp;&amp;nbsp;@@ We hope you like using your tiddlyspot.com site.  Please email [[feedback@tiddlyspot.com|mailto:feedback@tiddlyspot.com]] with any comments or suggestions.&quot;
].join(&quot;\n&quot;)

});
//}}}
</pre>
</div>
<div title="UploadLog" modifier="YourName" created="201306041645" modified="201502020537">
<pre>| !date | !user | !location | !storeUrl | !uploadDir | !toFilename | !backupdir | !origin |
| 01/01/2014 19:52:52 | YourName | [[sambahsa.html|file:///D:/apps/+tiddlydic/sambahsa.html]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 01/01/2014 19:54:09 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . | ok |
| 01/01/2014 19:54:33 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 01/01/2014 20:01:47 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . | ok |
| 01/01/2014 20:09:33 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 04/03/2014 10:17:42 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 04/03/2014 11:16:46 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 04/03/2014 13:23:56 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 04/03/2014 13:30:20 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |
| 02/02/2015 08:37:52 | YourName | [[/|http://sambahsa.tiddlyspot.com/]] | [[store.cgi|http://sambahsa.tiddlyspot.com/store.cgi]] | . | [[index.html | http://sambahsa.tiddlyspot.com/index.html]] | . |</pre>
</div>
<div title="UploadPlugin" modifier="YourName" created="200808080918" modified="201312301206" tags="systemConfig">
<pre>/***
|''Name:''|UploadPlugin|
|''Description:''|Save to web a TiddlyWiki|
|''Version:''|4.1.3|
|''Date:''|Feb 24, 2008|
|''Source:''|http://tiddlywiki.bidix.info/#UploadPlugin|
|''Documentation:''|http://tiddlywiki.bidix.info/#UploadPluginDoc|
|''Author:''|BidiX (BidiX (at) bidix (dot) info)|
|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|
|''~CoreVersion:''|2.2.0|
|''Requires:''|PasswordOptionPlugin|
***/
//{{{
version.extensions.UploadPlugin = {
	major: 4, minor: 1, revision: 3,
	date: new Date(&quot;Feb 24, 2008&quot;),
	source: 'http://tiddlywiki.bidix.info/#UploadPlugin',
	author: 'BidiX (BidiX (at) bidix (dot) info',
	coreVersion: '2.2.0'
};

//
// Environment
//

if (!window.bidix) window.bidix = {}; // bidix namespace
bidix.debugMode = false;	// true to activate both in Plugin and UploadService
	
//
// Upload Macro
//

config.macros.upload = {
// default values
	defaultBackupDir: '',	//no backup
	defaultStoreScript: &quot;store.php&quot;,
	defaultToFilename: &quot;index.html&quot;,
	defaultUploadDir: &quot;.&quot;,
	authenticateUser: true	// UploadService Authenticate User
};
	
config.macros.upload.label = {
	promptOption: &quot;Save and Upload this TiddlyWiki with UploadOptions&quot;,
	promptParamMacro: &quot;Save and Upload this TiddlyWiki in %0&quot;,
	saveLabel: &quot;save to web&quot;, 
	saveToDisk: &quot;save to disk&quot;,
	uploadLabel: &quot;upload&quot;	
};

config.macros.upload.messages = {
	noStoreUrl: &quot;No store URL in parmeters or options&quot;,
	usernameOrPasswordMissing: &quot;Username or password missing&quot;
};

config.macros.upload.handler = function(place,macroName,params) {
	if (readOnly)
		return;
	var label;
	if (document.location.toString().substr(0,4) == &quot;http&quot;) 
		label = this.label.saveLabel;
	else
		label = this.label.uploadLabel;
	var prompt;
	if (params[0]) {
		prompt = this.label.promptParamMacro.toString().format([this.destFile(params[0], 
			(params[1] ? params[1]:bidix.basename(window.location.toString())), params[3])]);
	} else {
		prompt = this.label.promptOption;
	}
	createTiddlyButton(place, label, prompt, function() {config.macros.upload.action(params);}, null, null, this.accessKey);
};

config.macros.upload.action = function(params)
{
		// for missing macro parameter set value from options
		if (!params) params = {};
		var storeUrl = params[0] ? params[0] : config.options.txtUploadStoreUrl;
		var toFilename = params[1] ? params[1] : config.options.txtUploadFilename;
		var backupDir = params[2] ? params[2] : config.options.txtUploadBackupDir;
		var uploadDir = params[3] ? params[3] : config.options.txtUploadDir;
		var username = params[4] ? params[4] : config.options.txtUploadUserName;
		var password = config.options.pasUploadPassword; // for security reason no password as macro parameter	
		// for still missing parameter set default value
		if ((!storeUrl) &amp;&amp; (document.location.toString().substr(0,4) == &quot;http&quot;)) 
			storeUrl = bidix.dirname(document.location.toString())+'/'+config.macros.upload.defaultStoreScript;
		if (storeUrl.substr(0,4) != &quot;http&quot;)
			storeUrl = bidix.dirname(document.location.toString()) +'/'+ storeUrl;
		if (!toFilename)
			toFilename = bidix.basename(window.location.toString());
		if (!toFilename)
			toFilename = config.macros.upload.defaultToFilename;
		if (!uploadDir)
			uploadDir = config.macros.upload.defaultUploadDir;
		if (!backupDir)
			backupDir = config.macros.upload.defaultBackupDir;
		// report error if still missing
		if (!storeUrl) {
			alert(config.macros.upload.messages.noStoreUrl);
			clearMessage();
			return false;
		}
		if (config.macros.upload.authenticateUser &amp;&amp; (!username || !password)) {
			alert(config.macros.upload.messages.usernameOrPasswordMissing);
			clearMessage();
			return false;
		}
		bidix.upload.uploadChanges(false,null,storeUrl, toFilename, uploadDir, backupDir, username, password); 
		return false; 
};

config.macros.upload.destFile = function(storeUrl, toFilename, uploadDir) 
{
	if (!storeUrl)
		return null;
		var dest = bidix.dirname(storeUrl);
		if (uploadDir &amp;&amp; uploadDir != '.')
			dest = dest + '/' + uploadDir;
		dest = dest + '/' + toFilename;
	return dest;
};

//
// uploadOptions Macro
//

config.macros.uploadOptions = {
	handler: function(place,macroName,params) {
		var wizard = new Wizard();
		wizard.createWizard(place,this.wizardTitle);
		wizard.addStep(this.step1Title,this.step1Html);
		var markList = wizard.getElement(&quot;markList&quot;);
		var listWrapper = document.createElement(&quot;div&quot;);
		markList.parentNode.insertBefore(listWrapper,markList);
		wizard.setValue(&quot;listWrapper&quot;,listWrapper);
		this.refreshOptions(listWrapper,false);
		var uploadCaption;
		if (document.location.toString().substr(0,4) == &quot;http&quot;) 
			uploadCaption = config.macros.upload.label.saveLabel;
		else
			uploadCaption = config.macros.upload.label.uploadLabel;
		
		wizard.setButtons([
				{caption: uploadCaption, tooltip: config.macros.upload.label.promptOption, 
					onClick: config.macros.upload.action},
				{caption: this.cancelButton, tooltip: this.cancelButtonPrompt, onClick: this.onCancel}
				
			]);
	},
	options: [
		&quot;txtUploadUserName&quot;,
		&quot;pasUploadPassword&quot;,
		&quot;txtUploadStoreUrl&quot;,
		&quot;txtUploadDir&quot;,
		&quot;txtUploadFilename&quot;,
		&quot;txtUploadBackupDir&quot;,
		&quot;chkUploadLog&quot;,
		&quot;txtUploadLogMaxLine&quot;		
	],
	refreshOptions: function(listWrapper) {
		var opts = [];
		for(i=0; i&lt;this.options.length; i++) {
			var opt = {};
			opts.push();
			opt.option = &quot;&quot;;
			n = this.options[i];
			opt.name = n;
			opt.lowlight = !config.optionsDesc[n];
			opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
			opts.push(opt);
		}
		var listview = ListView.create(listWrapper,opts,this.listViewTemplate);
		for(n=0; n&lt;opts.length; n++) {
			var type = opts[n].name.substr(0,3);
			var h = config.macros.option.types[type];
			if (h &amp;&amp; h.create) {
				h.create(opts[n].colElements['option'],type,opts[n].name,opts[n].name,&quot;no&quot;);
			}
		}
		
	},
	onCancel: function(e)
	{
		backstage.switchTab(null);
		return false;
	},
	
	wizardTitle: &quot;Upload with options&quot;,
	step1Title: &quot;These options are saved in cookies in your browser&quot;,
	step1Html: &quot;&lt;input type='hidden' name='markList'&gt;&lt;/input&gt;&lt;br&gt;&quot;,
	cancelButton: &quot;Cancel&quot;,
	cancelButtonPrompt: &quot;Cancel prompt&quot;,
	listViewTemplate: {
		columns: [
			{name: 'Description', field: 'description', title: &quot;Description&quot;, type: 'WikiText'},
			{name: 'Option', field: 'option', title: &quot;Option&quot;, type: 'String'},
			{name: 'Name', field: 'name', title: &quot;Name&quot;, type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'} 
			]}
};

//
// upload functions
//

if (!bidix.upload) bidix.upload = {};

if (!bidix.upload.messages) bidix.upload.messages = {
	//from saving
	invalidFileError: &quot;The original file '%0' does not appear to be a valid TiddlyWiki&quot;,
	backupSaved: &quot;Backup saved&quot;,
	backupFailed: &quot;Failed to upload backup file&quot;,
	rssSaved: &quot;RSS feed uploaded&quot;,
	rssFailed: &quot;Failed to upload RSS feed file&quot;,
	emptySaved: &quot;Empty template uploaded&quot;,
	emptyFailed: &quot;Failed to upload empty template file&quot;,
	mainSaved: &quot;Main TiddlyWiki file uploaded&quot;,
	mainFailed: &quot;Failed to upload main TiddlyWiki file. Your changes have not been saved&quot;,
	//specific upload
	loadOriginalHttpPostError: &quot;Can't get original file&quot;,
	aboutToSaveOnHttpPost: 'About to upload on %0 ...',
	storePhpNotFound: &quot;The store script '%0' was not found.&quot;
};

bidix.upload.uploadChanges = function(onlyIfDirty,tiddlers,storeUrl,toFilename,uploadDir,backupDir,username,password)
{
	var callback = function(status,uploadParams,original,url,xhr) {
		if (!status) {
			displayMessage(bidix.upload.messages.loadOriginalHttpPostError);
			return;
		}
		if (bidix.debugMode) 
			alert(original.substr(0,500)+&quot;\n...&quot;);
		// Locate the storeArea div's 
		var posDiv = locateStoreArea(original);
		if((posDiv[0] == -1) || (posDiv[1] == -1)) {
			alert(config.messages.invalidFileError.format([localPath]));
			return;
		}
		bidix.upload.uploadRss(uploadParams,original,posDiv);
	};
	
	if(onlyIfDirty &amp;&amp; !store.isDirty())
		return;
	clearMessage();
	// save on localdisk ?
	if (document.location.toString().substr(0,4) == &quot;file&quot;) {
		var path = document.location.toString();
		var localPath = getLocalPath(path);
		saveChanges();
	}
	// get original
	var uploadParams = new Array(storeUrl,toFilename,uploadDir,backupDir,username,password);
	var originalPath = document.location.toString();
	// If url is a directory : add index.html
	if (originalPath.charAt(originalPath.length-1) == &quot;/&quot;)
		originalPath = originalPath + &quot;index.html&quot;;
	var dest = config.macros.upload.destFile(storeUrl,toFilename,uploadDir);
	var log = new bidix.UploadLog();
	log.startUpload(storeUrl, dest, uploadDir,  backupDir);
	displayMessage(bidix.upload.messages.aboutToSaveOnHttpPost.format([dest]));
	if (bidix.debugMode) 
		alert(&quot;about to execute Http - GET on &quot;+originalPath);
	var r = doHttp(&quot;GET&quot;,originalPath,null,null,username,password,callback,uploadParams,null);
	if (typeof r == &quot;string&quot;)
		displayMessage(r);
	return r;
};

bidix.upload.uploadRss = function(uploadParams,original,posDiv) 
{
	var callback = function(status,params,responseText,url,xhr) {
		if(status) {
			var destfile = responseText.substring(responseText.indexOf(&quot;destfile:&quot;)+9,responseText.indexOf(&quot;\n&quot;, responseText.indexOf(&quot;destfile:&quot;)));
			displayMessage(bidix.upload.messages.rssSaved,bidix.dirname(url)+'/'+destfile);
			bidix.upload.uploadMain(params[0],params[1],params[2]);
		} else {
			displayMessage(bidix.upload.messages.rssFailed);			
		}
	};
	// do uploadRss
	if(config.options.chkGenerateAnRssFeed) {
		var rssPath = uploadParams[1].substr(0,uploadParams[1].lastIndexOf(&quot;.&quot;)) + &quot;.xml&quot;;
		var rssUploadParams = new Array(uploadParams[0],rssPath,uploadParams[2],'',uploadParams[4],uploadParams[5]);
		var rssString = generateRss();
		// no UnicodeToUTF8 conversion needed when location is &quot;file&quot; !!!
		if (document.location.toString().substr(0,4) != &quot;file&quot;)
			rssString = convertUnicodeToUTF8(rssString);	
		bidix.upload.httpUpload(rssUploadParams,rssString,callback,Array(uploadParams,original,posDiv));
	} else {
		bidix.upload.uploadMain(uploadParams,original,posDiv);
	}
};

bidix.upload.uploadMain = function(uploadParams,original,posDiv) 
{
	var callback = function(status,params,responseText,url,xhr) {
		var log = new bidix.UploadLog();
		if(status) {
			// if backupDir specified
			if ((params[3]) &amp;&amp; (responseText.indexOf(&quot;backupfile:&quot;) &gt; -1))  {
				var backupfile = responseText.substring(responseText.indexOf(&quot;backupfile:&quot;)+11,responseText.indexOf(&quot;\n&quot;, responseText.indexOf(&quot;backupfile:&quot;)));
				displayMessage(bidix.upload.messages.backupSaved,bidix.dirname(url)+'/'+backupfile);
			}
			var destfile = responseText.substring(responseText.indexOf(&quot;destfile:&quot;)+9,responseText.indexOf(&quot;\n&quot;, responseText.indexOf(&quot;destfile:&quot;)));
			displayMessage(bidix.upload.messages.mainSaved,bidix.dirname(url)+'/'+destfile);
			store.setDirty(false);
			log.endUpload(&quot;ok&quot;);
		} else {
			alert(bidix.upload.messages.mainFailed);
			displayMessage(bidix.upload.messages.mainFailed);
			log.endUpload(&quot;failed&quot;);			
		}
	};
	// do uploadMain
	var revised = bidix.upload.updateOriginal(original,posDiv);
	bidix.upload.httpUpload(uploadParams,revised,callback,uploadParams);
};

bidix.upload.httpUpload = function(uploadParams,data,callback,params)
{
	var localCallback = function(status,params,responseText,url,xhr) {
		url = (url.indexOf(&quot;nocache=&quot;) &lt; 0 ? url : url.substring(0,url.indexOf(&quot;nocache=&quot;)-1));
		if (xhr.status == 404)
			alert(bidix.upload.messages.storePhpNotFound.format([url]));
		if ((bidix.debugMode) || (responseText.indexOf(&quot;Debug mode&quot;) &gt;= 0 )) {
			alert(responseText);
			if (responseText.indexOf(&quot;Debug mode&quot;) &gt;= 0 )
				responseText = responseText.substring(responseText.indexOf(&quot;\n\n&quot;)+2);
		} else if (responseText.charAt(0) != '0') 
			alert(responseText);
		if (responseText.charAt(0) != '0')
			status = null;
		callback(status,params,responseText,url,xhr);
	};
	// do httpUpload
	var boundary = &quot;---------------------------&quot;+&quot;AaB03x&quot;;	
	var uploadFormName = &quot;UploadPlugin&quot;;
	// compose headers data
	var sheader = &quot;&quot;;
	sheader += &quot;--&quot; + boundary + &quot;\r\nContent-disposition: form-data; name=\&quot;&quot;;
	sheader += uploadFormName +&quot;\&quot;\r\n\r\n&quot;;
	sheader += &quot;backupDir=&quot;+uploadParams[3] +
				&quot;;user=&quot; + uploadParams[4] +
				&quot;;password=&quot; + uploadParams[5] +
				&quot;;uploaddir=&quot; + uploadParams[2];
	if (bidix.debugMode)
		sheader += &quot;;debug=1&quot;;
	sheader += &quot;;;\r\n&quot;; 
	sheader += &quot;\r\n&quot; + &quot;--&quot; + boundary + &quot;\r\n&quot;;
	sheader += &quot;Content-disposition: form-data; name=\&quot;userfile\&quot;; filename=\&quot;&quot;+uploadParams[1]+&quot;\&quot;\r\n&quot;;
	sheader += &quot;Content-Type: text/html;charset=UTF-8&quot; + &quot;\r\n&quot;;
	sheader += &quot;Content-Length: &quot; + data.length + &quot;\r\n\r\n&quot;;
	// compose trailer data
	var strailer = new String();
	strailer = &quot;\r\n--&quot; + boundary + &quot;--\r\n&quot;;
	data = sheader + data + strailer;
	if (bidix.debugMode) alert(&quot;about to execute Http - POST on &quot;+uploadParams[0]+&quot;\n with \n&quot;+data.substr(0,500)+ &quot; ... &quot;);
	var r = doHttp(&quot;POST&quot;,uploadParams[0],data,&quot;multipart/form-data; ;charset=UTF-8; boundary=&quot;+boundary,uploadParams[4],uploadParams[5],localCallback,params,null);
	if (typeof r == &quot;string&quot;)
		displayMessage(r);
	return r;
};

// same as Saving's updateOriginal but without convertUnicodeToUTF8 calls
bidix.upload.updateOriginal = function(original, posDiv)
{
	if (!posDiv)
		posDiv = locateStoreArea(original);
	if((posDiv[0] == -1) || (posDiv[1] == -1)) {
		alert(config.messages.invalidFileError.format([localPath]));
		return;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + &quot;\n&quot; +
				store.allTiddlersAsHtml() + &quot;\n&quot; +
				original.substr(posDiv[1]);
	var newSiteTitle = getPageTitle().htmlEncode();
	revised = revised.replaceChunk(&quot;&lt;title&quot;+&quot;&gt;&quot;,&quot;&lt;/title&quot;+&quot;&gt;&quot;,&quot; &quot; + newSiteTitle + &quot; &quot;);
	revised = updateMarkupBlock(revised,&quot;PRE-HEAD&quot;,&quot;MarkupPreHead&quot;);
	revised = updateMarkupBlock(revised,&quot;POST-HEAD&quot;,&quot;MarkupPostHead&quot;);
	revised = updateMarkupBlock(revised,&quot;PRE-BODY&quot;,&quot;MarkupPreBody&quot;);
	revised = updateMarkupBlock(revised,&quot;POST-SCRIPT&quot;,&quot;MarkupPostBody&quot;);
	return revised;
};

//
// UploadLog
// 
// config.options.chkUploadLog :
//		false : no logging
//		true : logging
// config.options.txtUploadLogMaxLine :
//		-1 : no limit
//      0 :  no Log lines but UploadLog is still in place
//		n :  the last n lines are only kept
//		NaN : no limit (-1)

bidix.UploadLog = function() {
	if (!config.options.chkUploadLog) 
		return; // this.tiddler = null
	this.tiddler = store.getTiddler(&quot;UploadLog&quot;);
	if (!this.tiddler) {
		this.tiddler = new Tiddler();
		this.tiddler.title = &quot;UploadLog&quot;;
		this.tiddler.text = &quot;| !date | !user | !location | !storeUrl | !uploadDir | !toFilename | !backupdir | !origin |&quot;;
		this.tiddler.created = new Date();
		this.tiddler.modifier = config.options.txtUserName;
		this.tiddler.modified = new Date();
		store.addTiddler(this.tiddler);
	}
	return this;
};

bidix.UploadLog.prototype.addText = function(text) {
	if (!this.tiddler)
		return;
	// retrieve maxLine when we need it
	var maxLine = parseInt(config.options.txtUploadLogMaxLine,10);
	if (isNaN(maxLine))
		maxLine = -1;
	// add text
	if (maxLine != 0) 
		this.tiddler.text = this.tiddler.text + text;
	// Trunck to maxLine
	if (maxLine &gt;= 0) {
		var textArray = this.tiddler.text.split('\n');
		if (textArray.length &gt; maxLine + 1)
			textArray.splice(1,textArray.length-1-maxLine);
			this.tiddler.text = textArray.join('\n');		
	}
	// update tiddler fields
	this.tiddler.modifier = config.options.txtUserName;
	this.tiddler.modified = new Date();
	store.addTiddler(this.tiddler);
	// refresh and notifiy for immediate update
	story.refreshTiddler(this.tiddler.title);
	store.notify(this.tiddler.title, true);
};

bidix.UploadLog.prototype.startUpload = function(storeUrl, toFilename, uploadDir,  backupDir) {
	if (!this.tiddler)
		return;
	var now = new Date();
	var text = &quot;\n| &quot;;
	var filename = bidix.basename(document.location.toString());
	if (!filename) filename = '/';
	text += now.formatString(&quot;0DD/0MM/YYYY 0hh:0mm:0ss&quot;) +&quot; | &quot;;
	text += config.options.txtUserName + &quot; | &quot;;
	text += &quot;[[&quot;+filename+&quot;|&quot;+location + &quot;]] |&quot;;
	text += &quot; [[&quot; + bidix.basename(storeUrl) + &quot;|&quot; + storeUrl + &quot;]] | &quot;;
	text += uploadDir + &quot; | &quot;;
	text += &quot;[[&quot; + bidix.basename(toFilename) + &quot; | &quot; +toFilename + &quot;]] | &quot;;
	text += backupDir + &quot; |&quot;;
	this.addText(text);
};

bidix.UploadLog.prototype.endUpload = function(status) {
	if (!this.tiddler)
		return;
	this.addText(&quot; &quot;+status+&quot; |&quot;);
};

//
// Utilities
// 

bidix.checkPlugin = function(plugin, major, minor, revision) {
	var ext = version.extensions[plugin];
	if (!
		(ext  &amp;&amp; 
			((ext.major &gt; major) || 
			((ext.major == major) &amp;&amp; (ext.minor &gt; minor))  ||
			((ext.major == major) &amp;&amp; (ext.minor == minor) &amp;&amp; (ext.revision &gt;= revision))))) {
			// write error in PluginManager
			if (pluginInfo)
				pluginInfo.log.push(&quot;Requires &quot; + plugin + &quot; &quot; + major + &quot;.&quot; + minor + &quot;.&quot; + revision);
			eval(plugin); // generate an error : &quot;Error: ReferenceError: xxxx is not defined&quot;
	}
};

bidix.dirname = function(filePath) {
	if (!filePath) 
		return;
	var lastpos;
	if ((lastpos = filePath.lastIndexOf(&quot;/&quot;)) != -1) {
		return filePath.substring(0, lastpos);
	} else {
		return filePath.substring(0, filePath.lastIndexOf(&quot;\\&quot;));
	}
};

bidix.basename = function(filePath) {
	if (!filePath) 
		return;
	var lastpos;
	if ((lastpos = filePath.lastIndexOf(&quot;#&quot;)) != -1) 
		filePath = filePath.substring(0, lastpos);
	if ((lastpos = filePath.lastIndexOf(&quot;/&quot;)) != -1) {
		return filePath.substring(lastpos + 1);
	} else
		return filePath.substring(filePath.lastIndexOf(&quot;\\&quot;)+1);
};

bidix.initOption = function(name,value) {
	if (!config.options[name])
		config.options[name] = value;
};

//
// Initializations
//

// require PasswordOptionPlugin 1.0.1 or better
bidix.checkPlugin(&quot;PasswordOptionPlugin&quot;, 1, 0, 1);

// styleSheet
setStylesheet('.txtUploadStoreUrl, .txtUploadBackupDir, .txtUploadDir {width: 22em;}',&quot;uploadPluginStyles&quot;);

//optionsDesc
merge(config.optionsDesc,{
	txtUploadStoreUrl: &quot;Url of the UploadService script (default: store.php)&quot;,
	txtUploadFilename: &quot;Filename of the uploaded file (default: in index.html)&quot;,
	txtUploadDir: &quot;Relative Directory where to store the file (default: . (downloadService directory))&quot;,
	txtUploadBackupDir: &quot;Relative Directory where to backup the file. If empty no backup. (default: ''(empty))&quot;,
	txtUploadUserName: &quot;Upload Username&quot;,
	pasUploadPassword: &quot;Upload Password&quot;,
	chkUploadLog: &quot;do Logging in UploadLog (default: true)&quot;,
	txtUploadLogMaxLine: &quot;Maximum of lines in UploadLog (default: 10)&quot;
});

// Options Initializations
bidix.initOption('txtUploadStoreUrl','');
bidix.initOption('txtUploadFilename','');
bidix.initOption('txtUploadDir','');
bidix.initOption('txtUploadBackupDir','');
bidix.initOption('txtUploadUserName','');
bidix.initOption('pasUploadPassword','');
bidix.initOption('chkUploadLog',true);
bidix.initOption('txtUploadLogMaxLine','10');


// Backstage
merge(config.tasks,{
	uploadOptions: {text: &quot;upload&quot;, tooltip: &quot;Change UploadOptions and Upload&quot;, content: '&lt;&lt;uploadOptions&gt;&gt;'}
});
config.backstageTasks.push(&quot;uploadOptions&quot;);


//}}}

</pre>
</div>
<div title="ViewTemplate" creator="YourName" modifier="YourName" created="201306061200" changecount="1">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;span macro=&quot;tiddler ReplaceDoubleClick with: alt click&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="sercho" creator="YourName" modifier="YourName" created="201306061202" modified="201401011558" changecount="44">
<pre>&lt;&lt;tiddler HideTiddlerTags&gt;&gt;{{small smallform{
&lt;html&gt;&lt;a href='' class='link'&gt;&lt;u&gt;&lt;/u&gt;&lt;/a&gt;&lt;form style='display:inline;white-space:nowrap;' onsubmit='this.pavysisku.click();return false;'&gt;
&lt;table&gt;&lt;tr&gt;&lt;td style='width:33%;font-size:1.4em;'&gt;
&lt;span id='nomesearch'&gt; &lt;/span&gt; &lt;input id='formulariopesquisa' name=pattern value='' title='' autofocus&gt;
&lt;input id='botaook' type=button name=pavysisku value='serchez' onclick=&quot;
var f=this.form;
var target=f.nextSibling; removeChildren(target);
var arrRestStr=[];
var outa=[];
var outb=[];
var outc=[];
var outd=[];
var oute=[];
var Couta=[];
var Coutb=[];
var Coutc=[];
var Coutd=[];
var Coute=[];
var zil=[];
var tempa;
var tempb='';
var tempc;
var tempd;
var tempe;
var tb='[^\t]*?\t[^\t]*?\t';
var fpvd;
var zi='@@background-color:#7FFF00;$1@@';
var sle='&gt;|&gt;|@@margin-top:0px;padding-left:0.5em;padding-right:0.5em;font-size:1em;float:right;font-weight:normal;border:1px solid #393939;margin-top:-1px;color:#fff;background:#db4;display:block;//[[';
var slewhite='&gt;|&gt;|@@margin-top:0px;padding-left:0.5em;padding-right:0.5em;font-size:1em;float:right;font-weight:normal;border:1px solid #222;margin-top:-1px;color:#fff;background:#999;display:block;//[[';
Array.prototype.diff = function(a) {
    return this.filter(function(i) {return !(a.indexOf(i) &gt; -1);});
};

var tids=store.getTaggedTiddlers('dic');
fpv = f.pattern.value.toLowerCase();
fpvd=fpv;
if(fpv.length == 0) return;
for (var t=0; t&lt;tids.length; t++) {

	arrRestStr=store.getTiddlerText(tids[t].title,'').split('\n');
//precise
	tempa=arrRestStr.filter(/./.test.bind(new RegExp('^'+fpv+'\t','i')));
	arrRestStr = arrRestStr.diff(tempa);
	//tempb=arrRestStr.filter(/./.test.bind(new RegExp('^'+'(|[^\t]*?[;\.\042])'+fpv+'[!;\.\042\t]','i')));
	//arrRestStr = arrRestStr.diff(tempb);
	tempc=arrRestStr.filter(/./.test.bind(new RegExp('^'+'(|[^\t]*?[;\.\042, ])'+fpv+'[!;\.\042, \t]','i')));
	arrRestStr = arrRestStr.diff(tempc);
	if (tempa.length+tempb.length+tempc.length&gt;0) outa = outa.concat([sle+tids[t].title+']]//@@']);
	zil = zil.concat(tempa.slice(0,30)).concat(tempc.slice(0,30)).map(function(somet){return somet.replace(new RegExp('('+fpv+')', 'gi'),zi);});
        outa = outa.concat(zil); zil=[];
//now vague
	tempd=arrRestStr.filter(/./.test.bind(new RegExp('^'+'(|[^\t]*?[;\.\042, ])'+fpv,'i')));
	arrRestStr = arrRestStr.diff(tempd);
	tempe=arrRestStr.filter(/./.test.bind(new RegExp('^'+'(|[^\t]*?)'+fpv,'i')));
	arrRestStr = arrRestStr.diff(tempe);
	if (tempd.length+tempe.length&gt;0) outd = outd.concat([slewhite+tids[t].title+']]//@@']);
	zil = zil.concat(tempd.slice(0,30)).concat(tempe.slice(0,30)).map(function(somet){return somet.replace(new RegExp('('+fpv+')', 'gi'),zi);});
        outd = outd.concat(zil); zil=[];
//Cout precise
	tempa=arrRestStr.filter(/./.test.bind(new RegExp('^'+tb+fpv+'([!;\.\042\t,]|$)','i')));
	arrRestStr = arrRestStr.diff(tempa);
	//tempb=arrRestStr.filter(/./.test.bind(new RegExp('^'+tb+'(|[^\t]*?[;\.\042])'+fpv+'([!;\.\042\t]|$)','i')));
	//arrRestStr = arrRestStr.diff(tempb);
	tempc=arrRestStr.filter(/./.test.bind(new RegExp('^'+tb+'(|[^\t]*?[;\.\042, ])'+fpv+'([!;\.\042, \t]|$)','i')));
	arrRestStr = arrRestStr.diff(tempc);
	if (tempa.length+tempb.length+tempc.length&gt;0) Couta = Couta.concat([sle+tids[t].title+']]//@@']);
	zil = zil.concat(tempa.slice(0,30)).concat(tempc.slice(0,30)).map(function(somet){return somet.replace(new RegExp('('+fpv+')', 'gi'),zi);});
        Couta = Couta.concat(zil); zil=[];
//now vague
	tempd=arrRestStr.filter(/./.test.bind(new RegExp('^'+tb+'(|[^\t]*?[;\.\042, ])'+fpv+'([!;\.\042, \t]|$)','i')));
	arrRestStr = arrRestStr.diff(tempd);
	tempe=arrRestStr.filter(/./.test.bind(new RegExp('^'+tb+'(|[^\t]*?)'+fpv,'i')));
	arrRestStr = arrRestStr.diff(tempe);
	if (tempd.length+tempe.length&gt;0) Coutd = Coutd.concat([slewhite+tids[t].title+']]//@@']);
	zil = zil.concat(tempd.slice(0,30)).concat(tempe.slice(0,30)).map(function(somet){return somet.replace(new RegExp('('+fpv+')', 'gi'),zi);});
        Coutd = Coutd.concat(zil); zil=[];
	//Coute = Coute.concat(tempe.slice(0,30));
}
//concat all arrays, reformat to tw-table formatting

if (Couta.length&gt;0) Couta = ['&gt;\t&gt;\t!in translation:'].concat(Couta);
if (outa.length+Couta.length&gt;0) outa = ['&gt;\t&gt;\t!PRECIZA SERCHO'].concat(outa);

//vague search output

if (Coutd.length&gt;0) Coutd = ['&gt;\t&gt;\tbackground-color:#999;!in translation:'].concat(Coutd);
if (outd.length+Coutd.length&gt;0) outd = ['&gt;\t&gt;\tbackground-color:#999;!SEQUANTA SERCHO'].concat(outd);
tids = outa.concat(Couta).concat(outd).concat(Coutd).join('\n').replace(/(^|\t|$)/img,'|');

//output this fucking string!
if (tids.length&gt;3) wikify(tids,target);
&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/form&gt;&lt;div&gt;&lt;/div&gt;&lt;/html&gt;
}}}</pre>
</div>
<div title="temp" creator="YourName" modifier="YourName" created="201306061158" modified="201312290617" tags="systemConfig" changecount="3">
<pre>config.messages.backstage.open.text=&quot;&quot;;
config.messages.backstage.close.text=&quot;&quot;;
config.options.chkShowRightSidebar=false;
config.options.txtToggleRightSideBarLabelShow=&quot;jbobau&quot;;
config.options.txtToggleRightSideBarLabelHide=&quot;jbobau&quot;;
config.options.chkSinglePageMode=true;
config.options.chkSinglePagePermalink=true;
config.options.chkDisableWikiLinks=true;
//{{{ 
// hacky solution to avoid scrolling header out of view 
window.ensureVisible = function(e) {return false} 

//}}} 
</pre>
</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->

<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[

//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */
//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

// Adaptors
config.adaptors = {};
config.defaultAdaptor = null;

// Backstage tasks
config.tasks = {};

// Annotations
config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

// Messages
config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkIncrementalSearch: true,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	chkDisplayInstrumentation: false,
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30",
	txtFileSystemCharSet: "UTF-8",
	txtTheme: ""
	};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

// Backstage tasks
config.backstageTasks = ["save","importTask","tweak","upgrade","plugins"];

// Extensions
config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {defaultView: "text"},
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "http://tiddlywiki-releases.tiddlyspace.com/upgrade",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {type: "popup"},
	jump: {type: "popup"},
	syncing: {type: "popup"},
	fields: {type: "popup"}
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern = "(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	ieVersion: /MSIE (\d{1,2}.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isChrome: config.userAgent.indexOf('chrome') > -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs,{
	browsers: [
		function() {return config.browser.isIE;},
		function() {return true;}
		],
	codes: {
		downTriangle: ["\u25BC","\u25BE"],
		downArrow: ["\u2193","\u2193"],
		bentArrowLeft: ["\u2190","\u21A9"],
		bentArrowRight: ["\u2192","\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.tasks,{
	save: {text: "save", tooltip: "Save your changes to this TiddlyWiki"},
	importTask: {text: "import", tooltip: "Import tiddlers and plugins from other TiddlyWiki files and servers", content: '<<importTiddlers>>'},
	tweak: {text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>'},
	upgrade: {text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>'},
	plugins: {text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>'}
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc,{
	txtUserName: "Username for signing your edits",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkAnimate: "Enable animations",
	chkSaveBackups: "Keep backup file when saving changes",
	chkAutoSave: "Automatically save changes",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkOpenInNewWindow: "Open external links in a new window",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	txtBackupFolder: "Name of folder to use for backups",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	txtTheme: "Name of the theme to use",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainDownload: "Downloading/saving main TiddlyWiki file",
	mainDownloadManual: "RIGHT CLICK HERE to download/save main TiddlyWiki file",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.backstage = {
	open: {text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks"},
	close: {text: "close", tooltip: "Close the backstage area"},
	prompt: "backstage: ",
	decal: {
		edit: {text: "edit", tooltip: "Edit the tiddler '%0'"}
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = ["st","nd","rd","th","th","th","th","th","th","th",
		"th","th","th","th","th","th","th","th","th","th",
		"st","nd","rd","th","th","th","th","th","th","th",
		"st"];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup,{
	});

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.messages,{
	sizeTemplates:
		[
		{unit: 1024*1024*1024, template: "%0\u00a0GB"},
		{unit: 1024*1024, template: "%0\u00a0MB"},
		{unit: 1024, template: "%0\u00a0KB"},
		{unit: 1, template: "%0\u00a0B"}
		]});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.options,{
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'}
			]}
	});

merge(config.macros.plugins,{
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]},
	listViewTemplateReadOnly: {
		columns: [
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]}
	});

merge(config.macros.toolbar,{
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	errorGettingTiddlerListHttp404: "Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.",
	errorGettingTiddlerListHttp: "Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled",
	errorGettingTiddlerListFile: "Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\nThis tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			]}
	});

merge(config.macros.upgrade,{
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
	});

merge(config.macros.annotations,{
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.commands.fields,{
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{name: 'Field', field: 'field', title: "Field", type: 'String'},
			{name: 'Value', field: 'value', title: "Value", type: 'String'}
			],
		rowClasses: [
			],
		buttons: [
			]}});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
	});

merge(config.annotations,{
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "This tiddler is used to store configuration options for this TiddlyWiki document",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
	});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Whether this file can be saved back to the same location [Preemption]
window.allowSave = window.allowSave || function(l)
{
	return true;
}

// Whether this file is being viewed locally
window.isLocal = function()
{
	return (document.location.protocol == "file:");
}

// Whether to use the JavaSaver applet
var useJavaSaver = window.isLocal() && (config.browser.isSafari || config.browser.isOpera);

// Allow preemption code a chance to tweak config and useJavaSaver [Preemption]
if (window.tweakConfig) window.tweakConfig();

if(!window || !window.console) {
	console = {tiddlywiki:true,log:function(message) {displayMessage(message);}};
}

// Starting up
function main()
{
	window.originalHTML=recreateOriginal();

	var t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki({config:config});
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	var s;
	for(s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea","store",true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params,"onload");
	t4 = new Date();
	readOnly = window.isLocal() ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params,"onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	var m;
	for(m in config.macros) {
		if(config.macros[m].init)
			config.macros[m].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2-t1) + " ms");
		displayMessage("LoadFromDiv " + (t3-t2) + " ms");
		displayMessage("LoadPlugins " + (t5-t4) + " ms");
		displayMessage("Macro init " + (t7-t6) + " ms");
		displayMessage("Notify " + (t8-t7) + " ms");
		displayMessage("Restart " + (t9-t8) + " ms");
		displayMessage("Total: " + (t10-t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. All functions called conditionally since they themselves may have been unloaded.
function unload()
{
	if(window.checkUnsavedChanges)
		checkUnsavedChanges();
	if(window.scrubNodes)
		scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0,0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea","shadows",true);
	shadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	var i;
	for(i=0; i<nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n)
			map[n] = p;
		n = p.Source;
		if(n)
			map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done)
			return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			var i;
			for(i=0; i<reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i=0; i<nPlugins; i++)
		visit(installedPlugins[i]);
	for(i=0; i<toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","Requires","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0],10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1],10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2],10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	var p = null;
	if(window.location.hash) {
		p = decodeURIComponent(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
	}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	var i;
	for(i=1; i<params.length; i++) {
		var p = config.paramifiers[params[i].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[i].value);
		else {
			var h = config.optionHandlers[params[i].name.substr(0,3)];
			if(h && h.set instanceof Function)
				h.set(params[i].name,params[i].value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(v) {
		if(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))
			story.displayTiddler("bottom",v,null,false,null);
	}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
	}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
	}
};

config.paramifiers.tag = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers("[tag["+v+"]]"),null,false,null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;
		if(!readOnly) {
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);
			story.focusTiddler(title,"text");
			var i,tags = args.tag || [];
			for(i=0;i<tags.length;i++) {
				story.setTiddlerTag(title,tags[i],+1);
			}
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly) {
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
		}
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(v) {
		story.switchTheme(v);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent= {
	onstart: function(v) {
		var titles=[];
		var i,tiddlers=store.getTiddlers("modified","excludeLists").reverse();
		for(i=0; i<v && i<tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null,titles);
	}
};

config.paramifiers.filter = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers(v),null,false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	var n;
	this.formatters = [];
	var pattern = [];
	for(n=0; n<formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s,v;
			if(lookaheadMatch[1]) {
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
			} else {
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
			}
			if(s=="bgcolor")
				s = "backgroundColor";
			if(s=="float")
				s = "cssFloat";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		var t;
		for(t=0; t< styles.length; t++) {
			try {
				e.style[styles[t].style] = styles[t].value;
			} catch (ex) {
			}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE && (config.browser.ieVersion[1] < 10))
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1 || link.indexOf("#")!=-1) {
			return true;
		}
		return false;
	}

};

//--
//-- Standard formatters
//--

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},
	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table",null,"twtable");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		var onmouseover = function() {jQuery(this).addClass("hoverRow");};
		var onmouseout = function() {jQuery(this).removeClass("hoverRow");};
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k") {
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
			} else {
				if(nextRowType != currRowType) {
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
				}
				if(currRowType == "c") {
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
				} else {
					var theRow = createTiddlyElement(rowContainer,"tr",null,rowCount%2?"oddRow":"evenRow");
					theRow.onmouseover = onmouseover;
					theRow.onmouseout = onmouseout;
					this.rowHandler(w,theRow,prevColumns);
					rowCount++;
				}
			}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch) {
			if(cellMatch[1] == "~") {
				// Rowspan
				var last = prevColumns[col];
				if(last) {
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					if(colSpanCount > 1) {
						last.element.setAttribute("colspan",colSpanCount);
						last.element.setAttribute("colSpan",colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
				}
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[1] == ">") {
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[2]) {
				// End of row
				if(prevCell && colSpanCount > 1) {
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
				}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
			} else {
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ") {
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
				}
				var cell;
				if(chr == "!") {
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
				} else {
					cell = createTiddlyElement(e,"td");
				}
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1,element:cell};
				if(colSpanCount > 1) {
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
				}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
			}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
		}
	}
},

{
	name: "heading",
	match: "^!{1,6}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:[\\*#;:]+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType, baseType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			if(lookaheadMatch[1]) {
				listType = "ul";
				itemType = "li";
			} else if(lookaheadMatch[2]) {
				listType = "ol";
				itemType = "li";
			} else if(lookaheadMatch[3]) {
				listType = "dl";
				itemType = "dt";
			} else if(lookaheadMatch[4]) {
				listType = "dl";
				itemType = "dd";
			}
			if(!baseType)
				baseType = listType;
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			var t;
			if(listLevel > currLevel) {
				for(t=currLevel; t<listLevel; t++) {
					var target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;
					stack.push(createTiddlyElement(target,listType));
				}
			} else if(listType!=baseType && listLevel==1) {
				w.nextMatch -= lookaheadMatch[0].length;
				return;
			} else if(listLevel < currLevel) {
				for(t=currLevel; t>listLevel; t--)
					stack.pop();
			} else if(listLevel == currLevel && listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t,matched;
		do {
			if(newLevel > currLevel) {
				for(t=currLevel; t<newLevel; t++)
					stack.push(createTiddlyElement(stack[stack.length-1],this.element));
			} else if(newLevel < currLevel) {
				for(t=currLevel; t>newLevel; t--)
					stack.pop();
			}
			currLevel = newLevel;
			w.subWikifyTerm(stack[stack.length-1],this.termRegExp);
			createTiddlyElement(stack[stack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched) {
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
			}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?|<hr ?/?>\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
	element: "pre",
	handler: function(w)
	{
		switch(w.matchText) {
		case "/*{{{*/\n": // CSS
			this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
			break;
		case "{{{\n": // monospaced block
			this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
			break;
		case "//{{{\n": // plugin
			this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
			break;
		case "<!--{{{-->\n": //template
			this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
			break;
		default:
			break;
		}
		config.formatterHelpers.enclosedTextHelper.call(this,w);
	}
},

{
	name: "wikifyComment",
	match: "^(?:/\\*\\*\\*|<!---)\\n",
	handler: function(w)
	{
		var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
		w.subWikifyTerm(w.output,termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
		}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3]) {
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?
						createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
			} else {
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);
			}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.unWikiLink+"?"+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {
			w.outputText(w.output,w.matchStart+1,w.nextMatch);
			return;
		}
		if(w.matchStart > 0) {
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1) {
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
			}
		}
		if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);
			w.outputText(link,w.matchStart,w.nextMatch);
		} else {
			w.outputText(w.output,w.matchStart,w.nextMatch);
		}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e = w.output;
			if(lookaheadMatch[5]) {
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
				jQuery(e).addClass("imageLink");
			}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3]) {
				img.title = lookaheadMatch[3];
				img.setAttribute("alt",lookaheadMatch[3]);
			}
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "characterFormat",
	match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "''":
			w.subWikifyTerm(w.output.appendChild(document.createElement("strong")),/('')/mg);
			break;
		case "//":
			w.subWikifyTerm(createTiddlyElement(w.output,"em"),/(\/\/)/mg);
			break;
		case "__":
			w.subWikifyTerm(createTiddlyElement(w.output,"u"),/(__)/mg);
			break;
		case "^^":
			w.subWikifyTerm(createTiddlyElement(w.output,"sup"),/(\^\^)/mg);
			break;
		case "~~":
			w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(~~)/mg);
			break;
		case "--":
			w.subWikifyTerm(createTiddlyElement(w.output,"strike"),/(--)/mg);
			break;
		case "{{{":
			var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
				w.nextMatch = lookaheadRegExp.lastIndex;
			}
			break;
		}
	}
},

{
	name: "customFormat",
	match: "@@|\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "@@":
			var e = createTiddlyElement(w.output,"span");
			var styles = config.formatterHelpers.inlineCssHelper(w);
			if(styles.length == 0)
				e.className = "marked";
			else
				config.formatterHelpers.applyCssHelper(e,styles);
			w.subWikifyTerm(e,/(@@)/mg);
			break;
		case "{{":
			var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch) {
				w.nextMatch = lookaheadRegExp.lastIndex;
				e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
				w.subWikifyTerm(e,/(\}\}\})/mg);
			}
			break;
		}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
	}
}

];

//--
//-- Wikifier
//--

function getParser(tiddler,format)
{
	if(tiddler) {
		if(!format)
			format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers) {
				if(format == config.parsers[i].format)
					return config.parsers[i];
			}
		} else {
			for(i in config.parsers) {
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
			}
		}
	}
	return formatter;
}

function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output,terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place,this.source.substring(startPos,endPos));
	}
};

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		var t0 = new Date();
		wikifier.subWikify(output);
		if(tiddler && config.options.chkDisplayInstrumentation)
			displayMessage("wikify:" +tiddler.title+ " in " + (new Date()-t0) + " ms");
	}
}

function wikifyStatic(source,highlightRegExp,tiddler,format)
{
	var e = createTiddlyElement(document.body,"pre");
	e.style.display = "none";
	var html = "";
	if(source && source != "") {
		if(!tiddler)
			tiddler = new Tiddler("temp");
		var wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikify(e);
		html = e.innerHTML;
		jQuery(e).remove();
	}
	return html;
}

function wikifyPlainText(text,limit,tiddler)
{
	if(limit > 0)
		text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);
		wikifier.outputText(output,0,source.length);
	}
}

//--
//-- Macro definitions
//--

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);
			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;
			var allowEval = true;
			if(config.evaluateMacroParameters=="system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);
		} else {
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place,macroName,params,wikifier,paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list) {
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	jQuery(list).empty().addClass("list list-" + type);
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	if(this[type].prompt)
		createTiddlyElement(list,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	var t;
	for(t = 0; t < results.length; t++) {
		var li = document.createElement("li");
		list.appendChild(li);
		var tiddler = results[t];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
				tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	var results = [];
	if(filter) {
		var tiddlers = store.filterTiddlers(filter);
		var t;
		for(t=0; t<tiddlers.length; t++)
			results.push(tiddlers[t].title);
	}
	return results;
};

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(ul,"li",null,"listTitle",this.noTags);
	var t;
	for(t=0; t<tags.length; t++) {
		var title = tags[t][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul,"li");
		var btn = createTiddlyButton(li,title + " (" + tags[t][1] + ")",this.tooltip.format([title]),onClickTag,info.classes);
		btn.setAttribute("tag",title);
		btn.setAttribute("refresh","link");
		btn.setAttribute("tiddlyLink",title);
		if(params[1]) {
			btn.setAttribute("sortby",params[1]);
		}
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place,macroName,params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var prefix = field.charAt(0);
		var no_prefix_field = prefix === "-" || prefix === "+" ? field.substr(1, field.length) : field;
		var dateFormat = params[2] || this.dateFormat;
		var groupTemplate = macro.groupTemplate.format(no_prefix_field, dateFormat);
		groupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :
			groupTemplate;

		var itemTemplate = macro.itemTemplate;
		itemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :
			itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var lastGroup = "", ul;
		var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;
		var t;
		for(t=tiddlers.length-1; t>=last; t--) {
			var tiddler = tiddlers[t];
			var theGroup = wikifyPlainText(groupTemplate,0,tiddler);
			if(typeof(ul) == "undefined" || theGroup != lastGroup) {
				ul = document.createElement("ul");
				jQuery(ul).addClass("timeline");
				container.appendChild(ul);
				createTiddlyElement(ul,"li",null,"listTitle",theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul,"li",null,"listLink");
			wikify(itemTemplate,item,null,tiddler);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>", 
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length-1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0,pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name",null,allowEval,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className,null,{
		refresh: "content", tiddler: tiddlerName
	});
	if(args!==undefined)
		wrapper.setAttribute("args","[["+args.join("]] [[")+"]]");
	this.transclude(wrapper,tiddlerName,args);
};

config.macros.tiddler.transclude = function(wrapper,tiddlerName,args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text)
		return;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1)
		return;
	stack.push(tiddlerName);
	try {
		if(typeof args == "string")
			args = args.readBracketedList();
		var n = args ? Math.min(args.length,9) : 0;
		var i;
		for(i=0; i<n; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
			text = text.replace(placeholderRE,args[i]);
		}
		config.macros.tiddler.renderText(wrapper,text,tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place,text,tiddlerName)
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	var btn = createTagButton(place,params[0],null,params[1],params[2]);
	if(params[3]) {
		btn.setAttribute('sortby',params[3]);
	}
};

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var label = null;
	var t;
	for(t=0; t<tiddler.tags.length; t++) {
		var tag = store.getTiddler(tiddler.tags[t]);
		if(!tag || !tag.tags.contains("excludeLists")) {
			if(!label)
				label = createTiddlyElement(ul,"li",null,"listTitle",lingo.labelTags.format([tiddler.title]));
			createTagButton(createTiddlyElement(ul,"li"),tiddler.tags[t],tiddler.title);
			if(t<tiddler.tags.length-1)
				createTiddlyText(ul,sep);
		}
	}
	if(!label)
		createTiddlyElement(ul,"li",null,"listTitle",lingo.labelNoTags.format([tiddler.title]));
};

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	ul.setAttribute("title",this.tooltip.format([title]));
	var sortby = getParam(params,"sortBy",false);
	var tagged = store.getTaggedTiddlers(title,sortby);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(ul,"li",null,"listTitle",prompt.format([title,tagged.length]));
	var t;
	for(t=0; t<tagged.length; t++) {
		createTiddlyLink(createTiddlyElement(ul,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(ul,sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place,macroName,params)
{
	if(!readOnly)
		createTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n,!isOpen,null,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh","content");
	panel.setAttribute("tiddler",params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var panel = wikifier ? createTiddlyElement(place,"div",null,"gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
	}
	params = paramString.parseParams("color");
	var locolors = [], hicolors = [];
	var t;
	for(t=2; t<params.length; t++) {
		var c = params[t].value;
		if(params[t].name == "snap") {
			hicolors[hicolors.length-1] = c;
		} else {
			locolors.push(c);
			hicolors.push(c);
		}
	}
	drawGradient(panel,params[1].value != "vert",locolors,hicolors);
	if(wikifier)
		wikifier.subWikify(panel,">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0]) {
		var names = params[0].split(".");
		var lookupMessage = function(root,nameIndex) {
				if(root[names[nameIndex]]) {
					if(nameIndex < names.length-1)
						return (lookupMessage(root[names[nameIndex]],nameIndex+1));
					else
						return root[names[nameIndex]];
				} else
					return null;
			};
		var m = lookupMessage(config,0);
		if(m == null)
			m = lookupMessage(window,0);
		createTiddlyText(place,m.toString().format(params.splice(1)));
	}
};


config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value,place,params,wikifier,paramString,tiddler) {
		highlightify(value,place,highlightHack,tiddler);
	},
	link: function(value,place,params,wikifier,paramString,tiddler) {
		createTiddlyLink(place,value,true);
	},
	wikified: function(value,place,params,wikifier,paramString,tiddler) {
		if(config.macros.view.depth>50)
			return;
		if(config.macros.view.depth>0) {
			if (value==config.macros.view.values[config.macros.view.depth-1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value=params[2].unescapeLineBreaks().format([value]);
		wikify(value,place,highlightHack,tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value,place,params,wikifier,paramString,tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0]) {
		var value = store.getValue(tiddler,params[0]);
		if(value) {
			var type = params[1] || config.macros.view.defaultView;
			var handler = config.macros.view.views[type];
			if(handler)
				handler(value,place,params,wikifier,paramString,tiddler);
		}
	}
};

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defVal = params[2] || '';
	if((tiddler instanceof Tiddler) && field) {
		story.setDirty(tiddler.title,true);
		var e,v;
		if(field != "text" && !rows) {
			e = createTiddlyElement(null,"input",null,null,null,{
				type: "text", edit: field, size: "40", autocomplete: "off"
			});
			e.value = store.getValue(tiddler,field) || defVal;
			place.appendChild(e);
		} else {
			var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
			var wrapper2 = createTiddlyElement(wrapper1,"div");
			e = createTiddlyElement(wrapper2,"textarea");
			e.value = v = store.getValue(tiddler,field) || defVal;
			rows = rows || 10;
			var lines = v.match(/\n/mg);
			var maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);
			if(lines != null && lines.length > rows)
				rows = lines.length + 5;
			rows = Math.min(rows,maxLines);
			e.setAttribute("rows",rows);
			e.setAttribute("edit",field);
			place.appendChild(wrapper1);
		}
		if(tiddler.isReadOnly()) {
			e.setAttribute("readOnly","readOnly");
			jQuery(e).addClass("readOnly");
		}
		return e;
	}
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));
	if(tags.length == 0)
		jQuery("<li/>").text(lingo.popupNone).appendTo(popup);
	var t;
	for(t=0; t<tags.length; t++) {
		var tag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag",tags[t][0]);
		tag.setAttribute("tiddler",this.getAttribute("tiddler"));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return false;
};

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler) {
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler",tiddler.title);
		btn.setAttribute("tags",params[0]);
	}
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var a = title ? config.annotations[title] : null;
	if(!tiddler || !title || !a)
		return;
	var text = a.format([title]);
	wikify(text,createTiddlyElement(place,"div",null,"annotation"),null,tiddler);
};
//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	var t;
	for(t=1; t<params.length; t++) {
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	}
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var customFields = getParam(params,"fields","");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal ? "true" : "false");
	if(tags.length > 0)
		btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	if(customFields !== "")
		btn.setAttribute("customFields",customFields);
	var text = getParam(params,"text");
	if(text !== undefined)
		btn.setAttribute("newText",text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	story.displayTiddler(null,title,template,false,null,null);
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem,customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title,"text"))
		story.getTiddlerField(title,"text").value = text.format([title]);
	var t;
	for(t=0;t<tags.length;t++)
		story.setTiddlerTag(title,tags[t],+1);
	story.focusTiddler(title,focus);
	return false;
};

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
	}
};

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
	}
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,false,false,false);
	createTiddlyButton(place,this.label,this.prompt,this.onClick,"searchButton");
	var txt = createTiddlyElement(null,"input",null,"txtOptionInput searchField");
	txt.value = getParam(params,"anon","");
	if(config.browser.isSafari) {
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
	} else {
		txt.setAttribute("type","text");
	}
	place.appendChild(txt);
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",getParam(params,"accesskey",this.accessKey));
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	txt.setAttribute("placeholder",getParam(params,"placeholder",this.placeholder));
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0) {
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
	}
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) {
					clearTimeout(me.timeout);
				}
				var txt = this;
				me.timeout = setTimeout(function() {me.doSearch(txt);},500);
			}
		} else {
			if(me.timeout) {
				clearTimeout(me.timeout);
			}
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,"tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	var t;
	for(t=0; t<numTabs; t++) {
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	var t;
	for(t=0; t<nodes.length; t++) {
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab) {
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
		} else {
			nodes[t].className = "tab tabUnselected";
		}
	}
	if(theTab) {
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			jQuery(tabset.nextSibling).remove();
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie) {
			config.options[cookie] = tab;
			saveOption(cookie);
		}
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string") {
		var c = null;
		var t;
		for(t in config.commands) {
			if(config.commands[t] == commandName)
				c = t;
		}
		commandName = c;
	}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string")) {
		var command = config.commands[commandName];
		if(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {
			var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
			var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
			var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
			var btn = createTiddlyButton(null,text,tooltip,cmd);
			btn.setAttribute("commandName",commandName);
			btn.setAttribute("tiddler",tiddler.title);
			jQuery(btn).addClass("command_" + commandName);
			if(className)
				jQuery(btn).addClass(className);
			place.appendChild(btn);
		}
	}
};

config.macros.toolbar.isCommandEnabled = function(command,tiddler)
{
	var title = tiddler.title;
	var ro = tiddler.isReadOnly();
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	return (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);
};

config.macros.toolbar.getCommandText = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var command = config.commands[this.getAttribute("commandName")];
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler",title);
	command.handlePopup(popup,title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,className,event)
{
	var children = place.getElementsByTagName("a");
	var t;
	for(t=0; t<children.length; t++) {
		var c = children[t];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var t;
	for(t=0; t<params.length; t++) {
		var btn;
		var c = params[t];
		switch(c) {
		case "!":
			createTiddlyText(place,this.separator);
			break;
		case "*":
			createTiddlyElement(place,"br");
			break;
		case "<":
			btn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);
			jQuery(btn).addClass("lessCommand");
			break;
		case ">":
			btn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);
			jQuery(btn).addClass("moreCommand");
			var e = createTiddlyElement(place,"span",null,"moreCommand");
			e.style.display = "none";
			place = e;
			break;
		default:
			var className = "";
			switch(c.substr(0,1)) {
			case "+":
				className = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				className = "cancelCommand";
				c = c.substr(1);
				break;
			}
			if(config.commands[c]) {
				this.createCommand(place,c,tiddler,className);
			} else {
				this.customCommand(place,c,wikifier,tiddler);
			}
			break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event,src,title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.closeTiddler(title,true);
	return false;
};

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);
	var e = story.getTiddlerField(title,config.options.txtEditorFocus||"text");
	if(e) {
		setCaretPosition(e,0);
	}
	return false;
};

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
		story.displayTiddler(null,newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
};

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if(deleteIt) {
		store.removeTiddler(title);
		story.closeTiddler(title,true);
		autoSaveChanges();
	}
	return false;
};

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
};

config.commands.references.handlePopup = function(popup,title)
{
	var references = store.getReferringTiddlers(title);
	var c = false;
	var r;
	for(r=0; r<references.length; r++) {
		if(references[r].title != title && !references[r].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
			c = true;
		}
	}
	if(!c)
		createTiddlyElement(popup,"li",null,"disabled",this.popupNone);
};

config.commands.jump.handlePopup = function(popup,title)
{
	story.forEachTiddler(function(title,element) {
		createTiddlyLink(createTiddlyElement(popup,"li"),title,true,null,false,null,true);
		});
};

config.commands.fields.handlePopup = function(popup,title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var items = [];
	store.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);
	items.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});
	if(items.length > 0)
		ListView.create(popup,items,this.listViewTemplate);
	else
		createTiddlyElement(popup,"div",null,null,this.emptyText);
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	var i;
	for(i in this.fields) {
		if(i=="server.host" || i=="server.workspace" || i=="wikiformat"|| i=="server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c,10) : 0;
	this.fields['changecount'] = String(c+1);
};

// Clear the changeCount of a tiddler
Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)
{
	this.assign(title,text,modifier,modified,tags,created,fields,creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(creator != undefined)
		this.creator = creator;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g,"").
		replace(/\{{3}((?:.|\n)*?)\}{3}/g,"").
		replace(/"""((?:.|\n)*?)"""/g,"").
		replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g,"").
		replace(/<html\>((?:.|\n)*?)<\/html\>/g,"").
		replace(/<script((?:.|\n)*?)<\/script\>/g,"");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier;
	if(!modifier)
		modifier = config.messages.subtitleUnknown || "";
	var modified = this.modified;
	if(modified)
		modified = modified.toLocaleString();
	else
		modified = config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title,modifier,modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = null;
	if(this.fields['server.type'])
		serverType = this.fields['server.type'];
	if(!serverType)
		serverType = this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType])
		serverType = null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki(params)
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	if(params && params.config) {
		this.config = config;
	}
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		var t;
		for(t in tiddlers) {
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return t != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.isAvailable = function(title) {
	if (!title)
		return false;
	var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
	if(s!=-1)
		title = title.substr(0,s);
	return this.tiddlerExists(title) || this.isShadowTiddler(title);
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	if(typeof config.shadowTiddlers[title] == "string")
		return config.shadowTiddlers[title];
	else
		return "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0,pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
	}
	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(text) {
		if(!section)
			return text;
		var re = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)","mg");
		re.lastIndex = 0;
		var match = re.exec(text);
		if(match) {
			var t = text.substr(match.index+match[1].length);
			var re2 = /^!/mg;
			re2.lastIndex = 0;
			match = re2.exec(t); //# search for the next heading
			if(match)
				t = t.substr(0,match.index-1);//# don't include final \n
			return t;
		}
		return defaultText;
	}
	if(defaultText != undefined)
		return defaultText;
	return null;
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var match,lastPos = 0;
	do {
		match = bracketRegExp.exec(text);
		if(match) {
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"",depth-1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]*)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\|\n]*)[\t\x20]*\|$)/gm;
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	var m = this.slicesRE.exec(text);
	while(m) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
		m = this.slicesRE.exec(text);
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var t,r = {};
	for(t=0; t<sliceNames.length; t++) {
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
		}
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
		}
	}
};

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	var i;
	for(i=0; i<this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({name: title, notify: fn});
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		tiddler.incChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.addTiddlerFields = function(title,fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		return;
	merge(tiddler.fields,fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title,true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		tiddler.fields = merge(merge({},tiddler.fields),config.defaultCustomFields,true);
		title = tiddler.title;
		newTitle = title;
	} else {
		tiddler = this.fetchTiddler(title);
		if(tiddler) {
			created = created || tiddler.created; // Preserve created date
			creator = creator || tiddler.creator;
			this.deleteTiddler(title);
		} else {
			created = created || modified;
			tiddler = new Tiddler();
		}
		fields = merge(merge({},fields),config.defaultCustomFields,true);
		tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);
	}
	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	this.setDirty(true);
	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem)
		return;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		var i;
		for(i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv)
		return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var candidates = this.reverseLookup("tags",excludeTag,!!match);
	var t,results = [];
	for(t=0; t<candidates.length; t++) {
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
	}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
};

// Returns a list of all tags in use
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
	    var g,c;
		for(g=0; g<tiddler.tags.length; g++) {
			var tag = tiddler.tags[g];
			var n = true;
			for(c=0; c<results.length; c++) {
				if(results[c][0] == tag) {
					n = false;
					results[c][1]++;
				}
			}
			if(n && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					n = false;
			}
			if(n)
				results.push([tag,1]);
		}
	});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)
{
	return this.reverseLookup(field,value,true,sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
};

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			if(accessor) {
				values = [ accessor.get(tiddler) ];
			} else {
				values = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];
			}
		}
		var lookup;
		for(lookup=0; lookup<values.length; lookup++) {
			if(values[lookup] == lookupValue)
				f = lookupMatch;
		}
		if(f)
			results.push(tiddler);
	});
	if(!sortField)
		sortField = "title";
	return this.sortTiddlers(results,sortField);
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;
		var n;
		for(n=0; n<tiddler.links.length;n++) {
			var link = tiddler.links[n];
			if(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t,results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
		});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)
{
	var asc = +1;
	switch(field.substr(0,1)) {
	case "-":
		asc = -1;
		field = field.substr(1);
		break;
	case "+":
		field = field.substr(1);
		break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field=="title") {
			tiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});
		} else {
			tiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});
		}
	} else {
		tiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results,match) {
		var title = match[1]||match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title,this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results,match) {
		var m,matched = this.getTaggedTiddlers(match[3]);
		for(m=0; m<matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	},
	sort: function(results,match) {
		return this.sortTiddlers(results,match[3]);
	},
	limit: function(results,match) {
		return results.slice(0,parseInt(match[3],10));
	},
	field: function(results,match) {
		var m,matched = this.getValueTiddlers(match[2],match[3]);
		for (m = 0; m < matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	var results = [];
	if(filter) {
		var match = re.exec(filter);
		while(match) {
			var handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';
			results = config.filters[handler].call(this,results,match);
			match = re.exec(filter);
		}
	}
	return results;
};
// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(n,readOnly)
{
	this.set = readOnly ?
			function(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :
			function(t,v) {if(v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n)
{
	this.set = function(t,v) {
		var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);
		if(d != t[n]) {
			t[n] = d; return true;
		}
	};
	this.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};
}

function LinksFieldAccess(n)
{
	this.set = function(t,v) {
		var s = (typeof v == "string") ? v.readBracketedList() : v;
		if(s.toString() != t[n].toString()) {
			t[n] = s; return true;
		}
	};
	this.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title",true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title",true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler,fieldName)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {
		var sliceType = fieldName.substr(0, 2);
		var sliceName = fieldName.substring(2);
		return store.getTiddlerText("%0%1%2".format(t.title,sliceType,sliceName));
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) {
			return accessor.get(t);
		}
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler,fieldName,value).
TiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	var n,result;
	for(n in t.fields) {
		result = callback(t,n,t.fields[n]);
		if(result)
			return result;
		}
	if(onlyExtendedFields)
		return undefined;
	for(n in TiddlyWiki.standardFieldAccess) {
		if(n != "tiddler") {
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			result = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));
			if(result)
				return result;
		}
	}
	return undefined;
};

//--
//-- Story functions
//--

function Story(containerId,idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		title = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + title;
		return id==this.container ? this.idPrefix + "_" + title : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(fn)
{
	var place = this.getContainer();
	if(!place)
		return;
	var e = place.firstChild;
	while(e) {
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		if(title) {
			fn.call(this,title,e);
		}
		e = n;
	}
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)
{
	var t;
	for(t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);
};

Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title,true);
		} else {
			this.refreshTiddler(title,template,false,customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template,customFields);
	}
	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
		case "top":
			before = place.firstChild;
			break;
		case "bottom":
			before = null;
			break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place,before,title,template,customFields)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.tiddlerId(title),"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields",customFields);
	place.insertBefore(tiddlerElem,before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title,customFields);
	this.refreshTiddler(title,template,false,customFields,defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title,fields,callback)
{
	var getTiddlerCallback = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			if(!t.created)
				t.created = new Date();
			if(!t.modified)
				t.modified = t.created;
			var dirty = store.isDirty();
			context.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);
			if(!window.allowSave())
				store.setDirty(dirty);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title,null,true);
		}
		context.adaptor.close();
		if(callback) {
			callback(context);
		}
	};
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields||{};
	var context = {serverType:tiddler.getServerType()};
	if(!context.serverType)
		return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();
	adaptor.getTiddler(title,context,null,getTiddlerCallback);
	return config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
};

Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force) {
			var tiddler = store.getTiddler(title);
			if(!tiddler) {
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title)) {
					var tags = [];
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);
				} else {
					var text = template=="EditTemplate" ?
								config.views.editor.defaultText.format([title]) :
								config.views.wikified.defaultText.format([title]);
					text = defaultText || text;
					var fields = customFields ? customFields.decodeHashMap() : null;
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);
				}
			}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			tiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				jQuery(tiddlerElem).addClass("isTag");
			else
				jQuery(tiddlerElem).removeClass("isTag");
			if(store.tiddlerExists(title)) {
				jQuery(tiddlerElem).removeClass("shadow");
				jQuery(tiddlerElem).removeClass("missing");
			} else {
				jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
			}
			if(customFields)
				this.addCustomFields(tiddlerElem,customFields);
		}
	}
	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place,customFields)
{
	var fields = customFields.decodeHashMap();
	var w = createTiddlyElement(place,"div",null,"customFields");
	w.style.display = "none";
	var t;
	for(t in fields) {
		var e = document.createElement("input");
		e.setAttribute("type","text");
		e.setAttribute("value",fields[t]);
		w.appendChild(e);
		e.setAttribute("edit",t);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	var e = this.getContainer().firstChild;
	while(e) {
		var template = e.getAttribute("template");
		if(template && e.getAttribute("dirty") != "true") {
			this.refreshTiddler(e.getAttribute("tiddler"),force ? null : template,true);
		}
		e = e.nextSibling;
	}
};

Story.prototype.onTiddlerMouseOver = function(e)
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function(e)
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(target && target.nodeName.toLowerCase() != "input" && target.nodeName.toLowerCase() != "textarea") {
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if(e.stopPropagation) e.stopPropagation();
		return true;
	}
	return false;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" && ed.value==config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera) {
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		}
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = this.getTiddler(title);
	var e = null;
	if(tiddlerElem) {
		var t,children = tiddlerElem.getElementsByTagName("*");
		for(t=0; t<children.length; t++) {
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea") {
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
			}
		}
	}
	return e;
};

Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = this.getTiddlerField(title,field);
	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	this.setTiddlerField(title,tag,mode,"tags");
};

Story.prototype.closeTiddler = function(title,animate,unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(config.options.chkAnimate && animate && anim && typeof Slider == "function")
			anim.startAnimating(new Slider(tiddlerElem,false,null,"all"));
		else {
			jQuery(tiddlerElem).remove();
		}
	}
};

Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
};

Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0,ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	this.displayTiddlers(null,matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(e)
{
	while(e && !jQuery(e).hasClass("tiddler")) {
		e = jQuery(e).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;
	}
	return e;
};

Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute) {
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");
		if(e.hasChildNodes()) {
			var t,c = e.childNodes;
			for(t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields);
		}
	}
};

Story.prototype.hasChanges = function(title)
{
	var e = this.getTiddler(title);
	if(e) {
		var fields = {};
		this.gatherSaveFields(e,fields);
		if(store.fetchTiddler(title)) {
		    var n;
			for(n in fields) {
				if(store.getValue(title,n) != fields[n]) //# tiddler changed
					return true;
			}
		} else {
			if(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags
				return false;
			} else { //# changed shadow or new tiddler
				return true;
			}
		}
	}
	return false;
};

Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title || title;
		if(!store.tiddlerExists(newTitle)) {
			newTitle = newTitle.trim();
			var creator = config.options.txtUserName;
		}
		if(store.tiddlerExists(newTitle) && newTitle != title) {
			if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				return null;
				title = newTitle;
		}
		if(newTitle != title)
			this.closeTiddler(newTitle,false);
		tiddlerElem.id = this.tiddlerId(newTitle);
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		if(!store.tiddlerExists(newTitle))
			minorUpdate = false;
		var newDate = new Date();
		if(store.tiddlerExists(title)) {
			var t = store.fetchTiddler(title);
			var extendedFields = t.fields;
			creator = t.creator;
		} else {
			extendedFields = merge({},config.defaultCustomFields);
		}
		var n;
		for(n in fields) {
			if(!TiddlyWiki.isStandardField(n))
				extendedFields[n] = fields[n];
		}
		var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
		autoSaveChanges(null,[tiddler]);
		return newTitle;
	}
	return null;
};

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
	});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode)
		return;

	var getSlice = function(theme,slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme,slice+"ReadOnly") || store.getTiddlerSlice(theme,"Web"+slice);
		r = r || store.getTiddlerSlice(theme,slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)
			r = theme + r;
		return store.isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i,name,theme,slice) {
		var newName = getSlice(theme,slice);
		if(name!=newName && store.namedNotifications[i].name==name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	var i;
	for(i=0; i<config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
		case "PageTemplate":
			config.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);
			break;
		case "StyleSheet":
			removeStyleSheet(config.refresherData.styleSheet);
			config.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);
			break;
		case "ColorPalette":
			config.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);
			break;
		default:
			break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme,"ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme,"EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,"",10),config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var t = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,
						function(e) {backstage.show(); return false;},null,"backstageShow");
		t = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,
						function(e) {backstage.hide(); return false;},null,"backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel,"div",null,"backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel,"div",null,"backstagePanelBody");
		this.cloak.onmousedown = function(e) {backstage.switchTab(null);};
		createTiddlyText(this.toolbar,cmb.prompt);
		for(t=0; t<config.backstageTasks.length; t++) {
			var taskName = config.backstageTasks[t];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,"backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
			}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			var p = [{style: "left", start: findWindowWidth(), end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			this.switchTab(null);
		} else {
			backstage.toolbar.style.left = "0px";
			if(anim && config.options.chkAnimate) {
				var p = [{style: "left", start: 0, end: findWindowWidth(), template: "%0px"}];
				var c = function(element,properties) {backstage.area.style.display = "none";};
				anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));
			} else {
				this.area.style.display = "none";
			}
			this.showButton.style.display = "block";
			this.hideButton.style.display = "none";
			config.options.chkBackstage = false;
			saveOption("chkBackstage");
			jQuery(this.content).removeClass("backstageVisible");
		}
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == backstage.currTabName) {
			backstage.hidePanel();
			return;
		}
		if(backstage.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			backstage.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content,backstage.panelBody,null,null);
			backstage.showPanel();
		} else if(backstage.currTabElem) {
			backstage.hidePanel();
		}
		backstage.currTabName = tabName;
		backstage.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findDocHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			var p = [{style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var p = [
				{style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px"},
				{style: "display", atEnd: "none"}
			];
			var c = function(element,properties) {backstage.cloak.style.display = "none";};
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));
		} else {
			jQuery([backstage.panel,backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place,macroName,params)
{
	var backstageTask = config.tasks[params[0]];
	if(backstageTask)
		createTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly) {
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title,this.step1Html);
	var t,s = wizard.getElement("selTypes");
	for(t in config.adaptors) {
		var e = createTiddlyElement(s,"option",null,null,config.adaptors[t].serverLabel || t);
		e.value = t;
	}
	if(config.defaultAdaptor)
		s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(t in feeds) {
		e = createTiddlyElement(s,"option",null,null,t);
		e.value = t;
	}
	wizard.setValue("feeds",feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen}]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var t,tagged = store.getTaggedTiddlers("systemServer","title");
	for(t=0; t<tagged.length; t++) {
		var title = tagged[t].title;
		var serverType = store.getTiddlerSlice(title,"Type");
		if(!serverType)
			serverType = "file";
		feeds[title] = {title: title,
						url: store.getTiddlerSlice(title,"URL"),
						workspace: store.getTiddlerSlice(title,"Workspace"),
						workspaceList: store.getTiddlerSlice(title,"WorkspaceList"),
						tiddlerFilter: store.getTiddlerSlice(title,"TiddlerFilter"),
						serverType: serverType,
						description: store.getTiddlerSlice(title,"Description")};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName",f.serverType);
		wizard.setValue("feedHost",f.url);
		wizard.setValue("feedWorkspace",f.workspace);
		wizard.setValue("feedWorkspaceList",f.workspaceList);
		wizard.setValue("feedTiddlerFilter",f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	var file = this.value;
	file = file.replace(/^C:\\fakepath\\/i,''); // remove fakepath (chrome/opera/safari)
	if(this.files && this.files[0]) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
			file = this.files[0].fileName; // REQUIRES PRIVILEGES.. NULL otherwise
		} catch (ex) {
			// non-priv fallback: combine filename with path to current document
			var path=getLocalPath(document.location.href);
			var slashpos=path.lastIndexOf('/'); if (slashpos==-1) slashpos=path.lastIndexOf('\\'); 
			if (slashpos!=-1) path=path.substr(0,slashpos+1); // remove filename, leave trailing 	slash
			file=path+file;
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(file);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(v)
{
	if(!v || !v.length)
		return v;
	v = v.replace(/\\/g,"/"); // use "/" for cross-platform consistency
	var u;
	var t = v.split(":");
	var p = t[1] || t[0]; // remove drive letter (if any)
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		u = v;
	} else if(p.substr(0,1)=="/") {
		u = document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + v;
	} else {
		var c = document.location.href.replace(/\\/g,"/");
		var pos = c.lastIndexOf("/");
		if(pos!=-1)
			c = c.substr(0,pos); // remove filename
		u = c + "/" + p;
	}
	return u;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor",adaptor);
	wizard.setValue("serverType",serverType);
	wizard.setValue("host",url);
	adaptor.openHost(url,null,wizard,me.onOpenHost);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context,wizard,me.onGetWorkspaceList);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context",context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length==1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
		wizard.setValue("workspace",workspace);
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title,me.step2Html);
	var t,s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(t=0; t<context.workspaces.length; t++) {
		var e = createTiddlyElement(s,"option",null,null,context.workspaces[t].title);
		e.value = context.workspaces[t].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var n,list = workspaceList.parseParams("workspace",null,false,true);
		for(n=1; n<list.length; n++) {
			if(context.workspaces.findByField("title",list[n].value) == null) {
				e = createTiddlyElement(s,"option",null,null,list[n].value);
				e.value = list[n].value;
			}
		}
	}
	if(workspace) {
		t = wizard.getElement("txtWorkspace");
		t.value = workspace;
	}
	wizard.setButtons([{caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace}]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	var t = wizard.getElement("txtWorkspace");
	t.value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace",workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	var browse=wizard.getElement("txtBrowse");
	if (browse.files) context.file=browse.files[0]; // for HTML5 FileReader
	adaptor.getTiddlerList(context,wizard,me.onGetTiddlerList,wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		var error = context.statusText||me.errorGettingTiddlerList;
		if(context.host.indexOf("file://") === 0) {
			error = me.errorGettingTiddlerListFile;
		} else {
			error = context.xhr && context.xhr.status == 404 ? me.errorGettingTiddlerListHttp404 :
				me.errorGettingTiddlerListHttp;
		}
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],"");
		jQuery("span.status", wizard.footerEl).html(error); // so error message can be html
		return;
	}
	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		var n;
		for(n=0; n<context.tiddlers.length; n++) {
			var tiddler = context.tiddlers[n];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text,100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	// Display the listview
	wizard.addStep(me.step3Title,me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	var listView = ListView.create(listWrapper,listedTiddlers,me.listViewTemplate);
	wizard.setValue("listView",listView);
	wizard.setValue("context",context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel},
			{caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport}
		]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType,host,workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType,host,workspace]);
	store.saveTiddler(txtSaveTiddler,txtSaveTiddler,text,me.serverSaveModifier,new Date(),["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync",chkSync);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	var t;
	for(t=0; t<rowNames.length; t++) {
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}
	wizard.addStep(me.step4Title.format([rowNames.length]),me.step4Html);
	for(t=0; t<rowNames.length; t++) {
		var link = document.createElement("div");
		createTiddlyLink(link,rowNames[t],true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(link,place);
	}
	wizard.setValue("remainingImports",rowNames.length);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}
		],me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(t=0; t<rowNames.length; t++) {
		var context = {
			allowSynchronous:true,
			tiddler:tiddlers[tiddlers.findByField("title",rowNames[t])]
		};
		adaptor.getTiddler(rowNames[t],context,wizard,me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title,'server',null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous)
		store.notify(tiddler.title,true);
	var remainingImports = wizard.getValue("remainingImports")-1;
	wizard.setValue("remainingImports",remainingImports);
	if(remainingImports == 0) {
		if(context.isSynchronous) {
			store.notifyAll();
			refreshDisplay();
		}
		wizard.setButtons([
				{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
			],me.statusDoneImport);
		autoSaveChanges();
	}
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	w.addStep(this.step1Title,this.step1Html.format([this.source,this.source]));
	w.setButtons([{caption: this.upgradeLabel, tooltip: this.upgradePrompt, onClick: this.onClickUpgrade}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(!window.allowSave()) {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath,me.backupExtension);
	w.setValue("backupPath",backupPath);
	w.setButtons([],me.statusPreparingBackup);
	var original = loadOriginal(localPath);
	w.setButtons([],me.statusSavingBackup);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(!backup) {
		w.setButtons([],me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setButtons([],me.statusLoadingCore);
	var options = {
		type:"GET",
		url:me.source,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			me.onLoadCore(true,w,jqXHR.responseText,me.source,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			me.onLoadCore(false,w,null,me.source,jqXHR);
		}
	};
	ajaxReq(options);
	return false;
};

config.macros.upgrade.onLoadCore = function(status,params,responseText,url,xhr)
{
	var me = config.macros.upgrade;
	var w = params;
	var errMsg;
	if(!status)
		errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer)
		errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([],errMsg);
		alert(errMsg);
		return;
	}
	var onStartUpgrade = function(e) {
		w.setButtons([],me.statusSavingCore);
		var localPath = getLocalPath(document.location.toString());
		saveFile(localPath,responseText);
		w.setButtons([],me.statusReloadingCore);
		var backupPath = w.getValue("backupPath");
		var newLoc = document.location.toString() + "?time=" + new Date().convertToYYYYMMDDHHMM() + "#upgrade:[[" + encodeURI(backupPath) + "]]";
		window.setTimeout(function () {window.location = newLoc;},10);
	};
	var step2 = [me.step2Html_downgrade,me.step2Html_restore,me.step2Html_upgrade][compareVersions(version,newVer) + 1];
	w.addStep(me.step2Title,step2.format([formatVersion(newVer),formatVersion(version)]));
	w.setButtons([{caption: me.startLabel, tooltip: me.startPrompt, onClick: onStartUpgrade},{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}]);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title,me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /^var version = \{title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return m ? {title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])} : null;
};

function upgradeFrom(path)
{
	var importStore = new TiddlyWiki();
	var tw = loadFile(path);
	if(window.netscape !== undefined)
		tw = convertUTF8ToUnicode(tw);
	importStore.importTiddlyWiki(tw);
	importStore.forEachTiddler(function(title,tiddler) {
		if(!store.getTiddler(title)) {
			store.addTiddler(tiddler);
		}
	});
	refreshDisplay();
	saveChanges(); //# To create appropriate Markup* sections
	alert(config.messages.upgradeDone.format([formatVersion()]));
	window.location = window.location.toString().substr(0,window.location.toString().lastIndexOf("?"));
}

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	listWrapper.setAttribute("refresh","macro");
	listWrapper.setAttribute("macroName","plugins");
	listWrapper.setAttribute("params",paramString);
	this.refresh(listWrapper,paramString);
};

config.macros.plugins.refresh = function(listWrapper,params)
{
	var me = config.macros.plugins;
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	jQuery(listWrapper).empty();
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++) {
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null) {
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
		}
	}
	for(t=0; t<plugins.length; t++) {
		p = plugins[t];
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
	}
	if(plugins.length == 0) {
		createTiddlyElement(listWrapper,"em",null,null,this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);
		wizard.setValue("listView",listView);
		if(!readOnly) {
			wizard.setButtons([
				{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},
				{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		var t;
		for(t=0; t<rowNames.length; t++) {
			store.setTiddlerTag(rowNames[t],false,"systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			var t;
			for(t=0; t<rowNames.length; t++) {
				store.removeTiddler(rowNames[t]);
				story.closeTiddler(rowNames[t],true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(linkText) {
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
	} else {
		e.appendChild(document.createTextNode(text));
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{name: "SystemSettings", notify: onSystemSettingsChange},
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "WindowTitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
];

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},

	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.getAttribute("args");
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e,title,args);
			return true;
		} else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root,changeList)
{
	var c,nodes = root.childNodes;
	for(c=0; c<nodes.length; c++) {
		var e = nodes[c], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
	}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
				}
				invokeMacro(e,macro,params,null,tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes,t;
	if(display) {
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
	}
	var wrapper = document.getElementById("contentWrapper");

	if(!title || !store.isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!store.isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable
	wrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper,"div",story.containerId());
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e,hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e,hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle",""),null,tiddler);
}

function refreshStyles(title,doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title,doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) {return encodeCookie(config.options[name].toString());},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	},
	'chk': {
		get: function(name) {return config.options[name] ? 'true' : 'false';},
		set: function(name,value) {config.options[name] = value == 'true';}
	}
};

function setOption(name,value)
{
	var optType = name.substr(0,3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name,value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substr(0,3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode)
		return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i,cookies = {};
	for(i=0; i<cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = cookieList[i].substr(0,p).trim();
			var value = cookieList[i].substr(p+1).trim();
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i,cookies = getCookies();
	if(cookies['TiddlyWiki']) {
		cookies = cookies['TiddlyWiki'].decodeHashMap();
	}
	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i,cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key,settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key,settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode)
		return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}
	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name,true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key,cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';
	cookies = getCookies();
	var c;
	for(c in cookies) {
		var optType = c.substr(0,3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		autoSaveChanges(null,[tiddler]);
	}, 1000);
}

function saveSystemSetting(name,saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title,name);
	if(readOnly || slice === getOption(name)) {
		return; //# don't save if read-only or the option hasn't changed
	}
	var slices = store.calcAllSlices(title);
	var key;
	for(key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}
	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key,slices[key]]));
	}
	text = text.sort().join('\n');
	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});
}

config.macros.option.genericCreate = function(place,type,opt,className,desc)
{
	var typeInfo = config.macros.option.types[type];
	var c = document.createElement(typeInfo.elementType);
	if(typeInfo.typeValue)
		c.setAttribute('type',typeInfo.typeValue);
	c[typeInfo.eventName] = typeInfo.onChange;
	c.setAttribute('option',opt);
	c.className = className || typeInfo.className;
	if(config.optionsDesc[opt])
		c.setAttribute('title',config.optionsDesc[opt]);
	place.appendChild(c);
	if(desc != 'no')
		createTiddlyText(place,config.optionsDesc[opt] || opt);
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substr(0,3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)
{
	config.options[opt] = value;
	saveOption(opt);
	var t,nodes = document.getElementsByTagName(elementType);
	for(t=0; t<nodes.length; t++) {
		var optNode = nodes[t].getAttribute('option');
		if(opt == optNode && nodes[t]!=elem)
			nodes[t][valueField] = value;
	}
};

config.macros.option.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);
	var desc = getParam(params,'desc','no');
	var type = opt.substr(0,3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place,type,opt,className,desc);
};

config.macros.options.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var showUnknown = getParam(params,'showUnknown','no');
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper,markList);
	wizard.setValue('listWrapper',listWrapper);
	this.refreshOptions(listWrapper,showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper,showUnknown)
{
	var n,opts = [];
	for(n in config.options) {
		var opt = {};
		opt.option = '';
		opt.name = n;
		opt.lowlight = !config.optionsDesc[n];
		opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
		if(!opt.lowlight || showUnknown)
			opts.push(opt);
	}
	opts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});
	ListView.create(listWrapper,opts,this.listViewTemplate);
	for(n=0; n<opts.length; n++) {
		var type = opts[n].name.substr(0,3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[n].colElements['option'],type,opts[n].name,null,'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper,this.checked);
	return false;
};

//--
//-- Saving
//--

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(config.locale) {
		var mRE = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/;
		var m = mRE.exec(s);
		if(m) {
			var t = m[1];
			if(m[2])
				t += ' xml:lang="' + config.locale + '"';
			if(m[3])
				t += ' lang="' + config.locale + '"';
			t += ">";
			s = s.substr(0,m.index) + t + s.substr(m.index+m[0].length);
		}
	}
	return s;
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + convertUnicodeToFileFormat(store.getRecursiveTiddlerText(tiddlerName,"")) + "\n");
}

function updateOriginal(original,posDiv,localPath)
{
	if(!posDiv)
		posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				convertUnicodeToFileFormat(store.allTiddlersAsHtml()) + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = convertUnicodeToFileFormat(getPageTitle()).htmlEncode();
	revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original)
		return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<"+"!--POST-STOREAREA--"+">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<"+"!--POST-BODY-START--"+">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea,start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps,start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv,posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty,tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty,tiddlers);
}

function loadOriginal(localPath)
{
	var content=loadFile(localPath);
	if (!content) content=window.originalHTML||recreateOriginal();
	return content;
}

function recreateOriginal()
{
	// construct doctype
	var content = "<!DOCTYPE ";
	var t=document.doctype;
	if (!t) 
		content+="html"
	else {
		content+=t.name;
		if      (t.publicId)		content+=' PUBLIC "'+t.publicId+'"';
		else if (t.systemId)		content+=' SYSTEM "'+t.systemId+'"';
	}
	content+=' "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"';
	content+='>\n';

	// append current document content
	content+=document.documentElement.outerHTML;

	content=content.replace(/<div id="saveTest">savetest<\/div>/,'<div id="saveTest"></div>');
	content=content.replace(/script><applet [^\>]*><\/applet>/g,'script>');
	content=content.replace(/><head>/,'>\n<head>');
	content=content.replace(/\n\n<\/body><\/html>$/,'</body>\n</html>\n');
	content=content.replace(/(<(meta) [^\>]*[^\/])>/g,'$1 />');
	content=content.replace(/<noscript>[^\<]*<\/noscript>/,
		function(m){return m.replace(/&lt;/g,'<').replace(/&gt;/g,'>');});
	content=content.replace(/<div id="copyright">[^\<]*<\/div>/,
		function(m){return m.replace(/\xA9/g,'&copy;');});

	return content;
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty,tiddlers)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	var originalPath = document.location.toString();
	if(!window.allowSave()) {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var localPath = getLocalPath(originalPath);
	var original = loadOriginal(localPath);
	if(original == null) {
		alert(msg.cantSaveError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(msg.invalidFileError.format([localPath]));
		return;
	}
	var co=config.options; //# abbreviation
	config.saveByDownload=false;
	config.saveByManualDownload=false;
	saveMain(localPath,original,posDiv);
	if (!config.saveByDownload && !config.saveByManualDownload) {
		if(co.chkSaveBackups)
			saveBackup(localPath,original);
		if(co.chkSaveEmptyTemplate)
			saveEmpty(localPath,original,posDiv);
		if(co.chkGenerateAnRssFeed && saveRss instanceof Function)
			saveRss(localPath);
	}
	if(co.chkDisplayInstrumentation)
		displayMessage("saveChanges " + (new Date()-t0) + " ms");
}


function saveMain(localPath,original,posDiv)
{
	var save;
	try {
		var revised = updateOriginal(original,posDiv,localPath);
		save = saveFile(localPath,revised);
	} catch (ex) {
		showException(ex);
	}
	if(save) {
		if (!config.saveByManualDownload) {
			if (config.saveByDownload) { //# set by HTML5DownloadSaveFile()
				var link = getDataURI(revised);
				var msg  = config.messages.mainDownload;
			} else {
				var link = "file://" + localPath;
				var msg  = config.messages.mainSaved;
			}
			displayMessage(msg,link);
		}
		store.setDirty(false);
	} else {
		alert(config.messages.mainFailed);
	}
}

function saveBackup(localPath,original)
{
	var backupPath = getBackupPath(localPath);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(backup)
		displayMessage(config.messages.backupSaved,"file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath,original,posDiv)
{
	var emptyPath,p;
	if((p = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0,p) + "/";
	else if((p = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0,p) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";
	var empty = original.substr(0,posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath,empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved,"file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

// Translate URL to local path [Preemption]
window.getLocalPath = window.getLocalPath || function(origPath)
{
	var originalPath = convertUriToUTF8(origPath,config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath,title,extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + slash + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + ".";
	if(title)
		backupPath += title.replace(/[\\\/\*\?\":<> ]/g,"_") + ".";
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath,convertUnicodeToFileFormat(generateRss())))
		displayMessage(config.messages.rssSaved,"file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler,uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text,null,tiddler).htmlEncode() + "</description>\n";
	var i;
	for(i=0; i<tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s +="<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle",""),null,tiddler).htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle",""),null,tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var i,n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for(i=tiddlers.length-1; i>=n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i],u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

// Copy a file in filesystem [Preemption]
window.copyFile = window.copyFile || function(dest,source)
{
	return config.browser.isIE ? ieCopyFile(dest,source) : false;
}


// Save a file in filesystem [Preemption]
window.saveFile = window.saveFile || function(fileUrl,content)
{
	var r = mozillaSaveFile(fileUrl,content);
	if(!r)
		r = ieSaveFile(fileUrl,content);
	if(!r)
		r = javaSaveFile(fileUrl,content);
	if(!r)
		r = HTML5DownloadSaveFile(fileUrl,content);
	if(!r)
		r = manualSaveFile(fileUrl,content);
	return r;
}

// Load a file from filesystem [Preemption]
window.loadFile = window.loadFile || function(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return r;
}

function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	var pos = path.lastIndexOf("\\");
	if(pos==-1)
		pos = path.lastIndexOf("/");
	if(pos!=-1)
		path = path.substring(0,pos+1);

	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	for(i=scan.length-1;i>=0;i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath,content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest,source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath,content)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				file.create(0,0x01B4);// 0x01B4 = 0664
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file,0x22,0x04,null);
			out.write(content,content.length);
			out.flush();
			out.close();
			return true;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				return null;
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file,0x01,0x04,null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			var contents = sInputStream.read(sInputStream.available());
			sInputStream.close();
			inputStream.close();
			return contents;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i-1) : url;
}

/*
 *
 * in between when the applet has been started
 * and the user has given permission to run the applet
 * we get an applet object, but it doesn't have the methods
 * we expect yet.
 *
 */
var LOG_TIDDLYSAVER = true;
function logTiddlySaverException(msg, ex) {
	var applet = document.applets['TiddlySaver'];
	console.log(msg + ": " + ex);
	if (LOG_TIDDLYSAVER && applet) {
		try {
			console.log(msg + ": " + applet.getLastErrorMsg());
			console.log(msg + ": " + applet.getLastErrorStackTrace());
		} catch (ex) {}
	}
}

function javaDebugInformation () {
	var applet = document.applets['TiddlySaver'];
	var what = [
		["Java Version", applet.getJavaVersion],
		["Last Exception", applet.getLastErrorMessage],
		["Last Exception Stack Trace", applet.getLastErrorStackTrace],
		["System Properties", applet.getSystemProperties] ];

	function formatItem (description, method) {
		try {
			 result = String(method.call(applet));
		} catch (ex) {
			 result = String(ex)
		}
		return description + ": " + result
	}

	return jQuery.map(what, function (item) { return formatItem.apply(this, item) })
			.join('\n\n')
}

function javaSaveFile(filePath,content)
{
	var applet = document.applets['TiddlySaver'];
	try {
		if (applet && filePath) 
			return applet.saveFile(javaUrlToFilename(filePath), "UTF-8", content);
	} catch(ex) {
		logTiddlySaverException("javaSaveFile", ex);
	}
	// is this next block working anywhere ? -- grmble
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	var applet = document.applets['TiddlySaver'];
	try {
		if (applet && filePath) {
			var ret = applet.loadFile(javaUrlToFilename(filePath),"UTF-8");
			if(!ret)
				return null;
			return String(ret);
		}
	} catch(ex) {
		logTiddlySaverException("javaLoadFile", ex);
	}
	// is this next block working anywhere ? -- grmble
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

function HTML5DownloadSaveFile(filePath,content)
{
	if(document.createElement("a").download !== undefined) {
		config.saveByDownload=true;
		var slashpos=filePath.lastIndexOf("/");
		if (slashpos==-1) slashpos=filePath.lastIndexOf("\\"); 
		var filename=filePath.substr(slashpos+1);
		var uri = getDataURI(content);
		var link = document.createElement("a");
		link.setAttribute("target","_blank");
		link.setAttribute("href",uri);
		link.setAttribute("download",filename);
		document.body.appendChild(link); link.click(); document.body.removeChild(link);
		return true;
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function manualSaveFile(filePath,content)
{
	// FALLBACK for showing a link to data: URI
	config.saveByManualDownload=true;
	var slashpos=filePath.lastIndexOf("/");
	if (slashpos==-1) slashpos=filePath.lastIndexOf("\\"); 
	var filename=filePath.substr(slashpos+1);
	var uri = getDataURI(content);
	displayMessage(config.messages.mainDownloadManual,uri);
	return true;
}

// construct data URI (using base64 encoding to preserve multi-byte encodings)
function getDataURI(data) {
	if (config.browser.isIE)
		return "data:text/html,"+encodeURIComponent(data);
	else
		return "data:text/html;base64,"+encodeBase64(data);
}

function encodeBase64(data) {
	if (!data) return "";
	var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
	var out = "";
	var chr1,chr2,chr3="";
	var enc1,enc2,enc3,enc4="";
	for (var count=0,i=0; i<data.length; ) {
		chr1=data.charCodeAt(i++);
		chr2=data.charCodeAt(i++);
		chr3=data.charCodeAt(i++);
		enc1=chr1 >> 2;
		enc2=((chr1 & 3) << 4) | (chr2 >> 4);
		enc3=((chr2 & 15) << 2) | (chr3 >> 6);
		enc4=chr3 & 63;
		if (isNaN(chr2)) enc3=enc4=64;
		else if (isNaN(chr3)) enc4=64;
		out+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);
		chr1=chr2=chr3=enc1=enc2=enc3=enc4="";
	}
	return out;
}//--
//-- Filesystem utilities
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}


function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s+fin : s;
}

function convertUnicodeToFileFormat(s)
{
	return config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re,function($0) {return "&#" + $0.charCodeAt(0).toString() + ";";});
}

function convertUnicodeToUTF8(s)
{
// return convertUnicodeToFileFormat to allow plugin migration
	return convertUnicodeToFileFormat(s);
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUriToUTF8(uri,charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"].getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri,charSet);
}
//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host)
		return '';
	host = host.trim();
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length-1) == '/')
		host = host.substr(0,host.length-1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context,userParams,callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
AdaptorBase.prototype.openHost = function(host,context,userParams,callback)
{
	this.host = host;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {context.callback(context,userParams);},10);
	return true;
};

// Open the specified workspace
AdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)
{
	this.workspace = workspace;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context,jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context,context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context,jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context,context.userParams);
};

// Get the list of workspaces on a given server
FileAdaptor.prototype.getWorkspaceList = function(context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.workspaces = [{title:"(default)"}];
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

// Gets the list of tiddlers within a given workspace
FileAdaptor.prototype.getTiddlerList = function(context,userParams,callback,filter)
{
	context = this.setContext(context,userParams,callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		file:context.file, // for HTML5 FileReader
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			context.xhr = jqXHR;
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context,userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title,tiddler) {context.tiddlers.push(tiddler);});
		}
		var i;
		for(i=0; i<context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	var info = {};
	info.uri = tiddler.fields['server.host'] + "#" + tiddler.title;
	return info;
};

// Retrieve a tiddler from a given workspace on a given server
FileAdaptor.prototype.getTiddler = function(title,context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context,userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context,userParams);
	} else {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

function ajaxReq(args)
{
	if (args.file || args.url.startsWith("file"))  // LOCAL FILE
		return localAjax(args);
	return jQuery.ajax(args);
}

function localAjax(args)
{
	var success=function(data)
		{ args.success(data,"success",{ responseText:data }); }
	var failure=function(who)
		{ args.error({ message:who+": cannot read local file" },"error",0); }

	if (args.file) try { // HTML5 FileReader (Chrome, FF20+, Safari, etc.)
		var reader=new FileReader();
		reader.onload=function(e)  { success(e.target.result); }
		reader.onerror=function(e) { failure("FileReader"); }
		reader.readAsText(args.file);
		return true;
	} catch (ex) { ; }

	try { // local file I/O (IE, FF with TiddlyFox, Chrome/Safari with TiddlySaver, etc.)
		var data=loadFile(getLocalPath(args.url));
		if (data) success(data);
		else failure("loadFile");
		return true;
	} catch (ex) { ; }

	return true;
}

function httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type:type,
		url:url,
		processData:false,
		data:data,
		cache:!!allowCache,
		beforeSend: function(xhr) {
			var i;
			for(i in headers)
				xhr.setRequestHeader(i,headers[i]);
		}
	};

	if(callback) {
		options.complete = function(xhr,textStatus) {
			if(httpSuccess(xhr))
				callback(true,params,xhr.responseText,url,xhr);
			else
				callback(false,params,null,url,xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	try {
		if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
			window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	} catch (ex) {
	}
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Returns TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1,v2)
{
	var x1,x2,i,a = ["major","minor","revision"];
	for(i = 0; i<a.length; i++) {
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1<x2)
			return 1;
		if(x1>x2)
			return -1;
	}
	x1 = v1.beta || 9999;
	x2 = v2.beta || 9999;
	if(x1<x2)
		return 1;
	return x1 > x2 ? -1 : 0;
}

function merge(dst,src,preserveExisting)
{
	var i;
	for(i in src) {
		if(!preserveExisting || dst[i] === undefined)
			dst[i] = src[i];
	}
	return dst;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if(e.target)
		obj = e.target;
	else if(e.srcElement)
		obj = e.srcElement;
	if(obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return obj;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e,message)
{
	var s = e.description || e.toString();
	return message ? "%0:\n%1".format([message,s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e,message)
{
	alert(exceptionText(e,message));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	var b = g.currBrowser;
	if(b == null) {
		b = 0;
		while(b < g.browsers.length-1 && !g.browsers[b]())
			b++;
		g.currBrowser = b;
	}
	if(!g.codes[name])
		return "";
	return g.codes[name][b];
}

function createTiddlyText(parent,text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,parent);
	return cb;
}

function createTiddlyElement(parent,element,id,className,text,attribs)
{
	var n,e = document.createElement(element);
	if(className != null)
		e.className = className;
	if(id != null)
		e.setAttribute("id",id);
	if(text != null)
		e.appendChild(document.createTextNode(text));
	if(attribs) {
		for(n in attribs) {
			e.setAttribute(n,attribs[n]);
		}
	}
	if(parent != null)
		parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)
{
	var i,btn = document.createElement("a");
	btn.setAttribute("href","javascript:;");
	if(action) {
		btn.onclick = action;
	}
	if(tooltip)
		btn.setAttribute("title",tooltip);
	if(text)
		btn.appendChild(document.createTextNode(text));
	btn.className = className || "button";
	if(id)
		btn.id = id;
	if(attribs) {
		for(i in attribs) {
			btn.setAttribute(i,attribs[i]);
		}
	}
	if(parent)
		parent.appendChild(btn);
	if(accessKey)
		btn.setAttribute("accessKey",accessKey);
	return btn;
}

function createExternalLink(place,url,label)
{
	var link = document.createElement("a");
	link.className = "externalLink";
	link.href = url;
	var f = config.messages.externalLinkTooltip;
	link.title = f ? f.format([url]) : url;
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	place.appendChild(link);
	if(label)
		createTiddlyText(link, label);
	return link;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title]=="string")
		subTitle = config.annotations[title];
	return {classes: classes.join(" "),subTitle: subTitle};
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target,title,null,true,null,fields,toggling);
	}
	clearMessage();
	return false;
}

function createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)
{
	var title = jQuery.trim(title);
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,className);
	var btn = isStatic ? createExternalLink(place,store.getTiddlerText("SiteUrl",null) + "#" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	if(noToggle)
		btn.setAttribute("noToggle","true");
	if(linkedFromTiddler) {
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields",fields);
	}
	return btn;
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function createTiddlyDropDown(place,onchange,options,defaultValue)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	var t;
	for(t=0; t<options.length; t++) {
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		if(options[t].name == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby&&sortby.length) {
		store.sortTiddlers(tiddlers,sortby);
	}
	story.displayTiddlers(this,tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby&&sortby.length) {
			store.sortTiddlers(tagged,sortby);
		}
		var titles = [];
		var r;
		for(r=0;r<tagged.length;r++) {
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			openAll.setAttribute("sortby",sortby);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++) {
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
			}
		} else {
			createTiddlyElement(popup,"li",null,"disabled",lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler,title,tooltip)
{
	var btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);
	btn.setAttribute("tag",tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler",excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this,"div","popupTiddler");
		wikify(tiddler.text,popup,null,tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place,caption,tooltip,tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place,caption,true);
		var btn = createTiddlyButton(place,glyph("downArrow"),tooltip,onClickTiddlyPopup,"tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place,caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	var t;
	for(t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if(text) btn.setAttribute("errorText",text);
}
//-
//- Animation engine
//-

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	var t;
	for(t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length) {
		var animation = me.animations[a];
		if(animation.tick()) {
			a++;
		} else {
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element,duration,properties,callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element,style,value)
{
	switch(style) {
	case "-tw-vertScroll":
		window.scrollTo(findScrollX(),value);
		break;
	case "-tw-horizScroll":
		window.scrollTo(value,findScrollY());
		break;
	default:
		element.style[style] = value;
		break;
	}
};

Morpher.prototype.stop = function()
{
	var t;
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element,p.style,p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element,this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
			case undefined:
			case "style":
				var v = p.start + (p.end-p.start) * progress;
				this.assignStyle(this.element,p.style,template.format([v]));
				break;
			case "color":
				break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text,startElement,targetElement,unused)
{
	var e = createTiddlyElement(document.body,"div",null,"zoomer");
	createTiddlyElement(e,"div",null,null,text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},
		{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},
		{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},
		{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},
		{style: 'fontSize', start: 8, end: 24, template: '%0pt'}
	];
	var c = function(element,properties) {jQuery(element).remove();};
	return new Morpher(e,config.animDuration,p,c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	var p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];
	return new Morpher(targetElement,config.animDuration,p);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,unused,deleteMode)
{
	element.style.overflow = 'hidden';
	if(opening)
		element.style.height = '0px'; // Resolves a Firefox flashing bug
	element.style.display = 'block';
	var height = element.scrollHeight;
	var p = [];
	var c = null;
	if(opening) {
		p.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});
		p.push({style: 'opacity', start: 0, end: 1, template: '%0'});
		p.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});
	} else {
		p.push({style: 'height', start: height, end: 0, template: '%0px'});
		p.push({style: 'display', atEnd: 'none'});
		p.push({style: 'opacity', start: 1, end: 0, template: '%0'});
		p.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});
		switch(deleteMode) {
		case "all":
			c = function(element,properties) {jQuery(element).remove();};
			break;
		case "children":
			c = function(element,properties) {jQuery(element).empty();};
			break;
		}
	}
	return new Morpher(element,config.animDuration,p,c);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root,elem,className)
{
	var stackPosition = this.find(root,"popup");
	Popup.remove(stackPosition+1);
	var popup = createTiddlyElement(document.body,elem || "ol","popup",className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({root: root, popup: popup});
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign,halign,offset)
{
	var curr = Popup.stack[Popup.stack.length-1];
	this.place(curr.root,curr.popup,valign,halign,offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
};

Popup.place = function(root,popup,valign,halign,offset)
{
	if(!offset)
		offset = {x:0,y:0};
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth*0.75)
		popup.style.width = winWidth*0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var t,pos = -1;
	for(t=this.stack.length-1; t>=0; t--) {
		if(isDescendant(e,this.stack[t].popup))
			pos = t;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	var t;
	for(t=Popup.stack.length-1; t>=from; t--) {
		var p = Popup.stack[t];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0,from);
};

//--
//-- Wizard support
//--

function Wizard(elem)
{
	if(elem) {
		this.formElem = findRelated(elem,"wizard","className");
		this.bodyElem = findRelated(this.formElem.firstChild,"wizardBody","className","nextSibling");
		this.footElem = findRelated(this.formElem.firstChild,"wizardFooter","className","nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name,value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place,title)
{
	this.formElem = createTiddlyElement(place,"form",null,"wizard");
	createTiddlyElement(this.formElem,"h1",null,null,title);
	this.bodyElem = createTiddlyElement(this.formElem,"div",null,"wizardBody");
	this.footElem = createTiddlyElement(this.formElem,"div",null,"wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo,status)
{
	jQuery(this.footElem).empty();
	var t;
	for(t=0; t<buttonInfo.length; t++) {
		createTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);
		insertSpacer(this.footElem);
		}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem,"span",null,"status",status);
	}
};

Wizard.prototype.addStep = function(stepTitle,html)
{
	jQuery(this.bodyElem).empty();
	var w = createTiddlyElement(this.bodyElem,"div");
	createTiddlyElement(w,"h2",null,null,stepTitle);
	var step = createTiddlyElement(w,"div",null,"wizardStep");
	step.innerHTML = html;
	applyHtmlMacros(step,tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className || "listView twtable");
	var thead = createTiddlyElement(table,"thead");
	var t,r = createTiddlyElement(thead,"tr");
	for(t=0; t<listTemplate.columns.length; t++) {
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(c,columnTemplate,t);
			if(columnTemplate.className)
				jQuery(c).addClass(columnTemplate.className);
		}
	}
	var rc,tbody = createTiddlyElement(table,"tbody");
	for(rc=0; rc<listObject.length; rc++) {
		var rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(c=0; c<listTemplate.rowClasses.length; c++) {
			if(rowObject[listTemplate.rowClasses[c].field])
				jQuery(r).addClass(listTemplate.rowClasses[c].className);
		}
		rowObject.rowElement = r;
		rowObject.colElements = {};
		var cc;
		for(cc=0; cc<listTemplate.columns.length; cc++) {
			c = createTiddlyElement(r,"td");
			columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
				if(columnTemplate.className)
					jQuery(c).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = c;
		}
	}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons) {
		for(t=0; t<listTemplate.buttons.length; t++) {
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view,name,tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var t,hadOne = false;
	for(t=0; t<checkboxes.length; t++) {
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox") {
			var rn = cb.getAttribute("rowName");
			if(rn) {
				callback(cb,rn);
				hadOne = true;
			}
		}
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view,function(e,rowName) {
				if(e.checked)
					rowNames.push(rowName);
				});
	return rowNames;
};

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				wikify(v,place,null,null);
		}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined && v.title)
				createTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);
		}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var msg = config.messages.sizeTemplates;
			var v = listObject[field];
			if(v != undefined) {
				var t = 0;
				while(t<msg.length-1 && v<msg[t].unit)
					t++;
				createTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));
			}
		}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			var c = columnTemplate.text;
			if(v != undefined)
				createExternalLink(place,v,c || v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var t;
				for(t=0; t<v.length; t++) {
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
				}
			}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
			}
		}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// Add indexOf function if browser does not support it
if(!Array.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	var i;
	for(i=from; i<this.length; i++) {
		if(this[i] === item)
			return i;
	}
	return -1;
};}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field,value)
{
	var t;
	for(t=0; t<this.length; t++) {
		if(this[t][field] === value)
			return t;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1)
			this.push(value);
	} else if(mode == -1) {
		if(p != -1)
			this.splice(p,1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	var i;
	for(i=0; i<items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	var i;
	for(i = 0; i<items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique === false) {
		this.push(item);
	} else {
		if(this.indexOf(item) == -1)
			this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
};

if(!Array.prototype.map) {
Array.prototype.map = function(fn,thisObj)
{
	var scope = thisObj || window;
	var i,j,a = [];
	for(i=0, j=this.length; i < j; ++i) {
		a.push(fn.call(scope,this[i],i,this));
	}
	return a;
};}

//--
//-- Augmented methods for the JavaScript String() object
//--

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length-n) : this;
};

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
};

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var t,s = this.split("-");
	if(s.length > 1) {
		for(t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	}
	return s.join("");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match,r = [];
	do {
		match = subRegExp.exec(this);
		if(match && match[1]) {
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1],10)]);
			currPos = subRegExp.lastIndex;
		}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var t,c = this;
	for(t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval && config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) {
							n = window.restrictedEval(n);
						}
					} else {
						n = window.eval(n);
					}
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({name:"",value:n});
			} else {
				var v = parseToken(match,8);
				if(v == null && defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null && defaultValue) {
					v = defaultValue;
				}
				r.push({name:n,value:v});
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	// Summarise parameters into first element
	var t;
	for(t=1; t<r.length; t++) {
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	}
	return r;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list",null,!notAllowEval,true);
	var t,n = [];
	for(t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var t,n = [];
	for(t=1; t<p.length; t++) {
		if(p[t].value)
			n.pushUnique(p[t].value,unique);
	}
	return n;
};

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end)
{
	var s = this.indexOf(start);
	if(s != -1) {
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s,e];
	}
};

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;
};

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if(r)
		return this.substring(r[0],r[1]);
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list) {
		var t,results = [];
		for(t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
	} else {
		return "";
	}
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon","",false);
	var t,r = {};
	for(t=1; t<fields.length; t++)
		r[fields[t].name] = fields[t].value;
	return r;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var t,r = [];
	for(t in hashmap)
		r.push(t + ':"' + hashmap[t] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0,prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params,name,defaultValue)
{
	if(!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params,name,defaultValue)
{
	return !!getParam(params,name,defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	t = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));
	t = t.replace(/\\/g,"");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);
	return Math.floor(n/7)+1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate()-1];
};

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);
};

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);
};

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +"0";
};

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0,4),10),
			parseInt(d.substr(4,2),10)-1,
			parseInt(d.substr(6,2),10),
			parseInt(d.substr(8,2)||"00",10),
			parseInt(d.substr(10,2)||"00",10),
			parseInt(d.substr(12,2)||"00",10),
			parseInt(d.substr(14,3)||"000",10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0,1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
			} else {
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var clamp = function(x,min,max) {
		return x < min ? min : (x > max ? max : x);
	};
	return "#" +
			("0" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place,horiz,locolors,hicolors)
{
	if(!hicolors)
		hicolors = locolors;
	var t;
	for(t=0; t<= 100; t+=2) {
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var p = t/100*(locolors.length-1);
		var hc = hicolors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = locolors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();
	}
}

function addEvent(obj,type,fn)
{
	if(obj.attachEvent) {
		obj["e"+type+fn] = fn;
		obj[type+fn] = function(){obj["e"+type+fn](window.event);};
		obj.attachEvent("on"+type,obj[type+fn]);
	} else {
		obj.addEventListener(type,fn,false);
	}
}

function removeEvent(obj,type,fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on"+type,obj[type+fn]);
		obj[type+fn] = null;
	} else {
		obj.removeEventListener(type,fn,false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current height of the document
function findDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e,text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0,e.selectionStart).split("\n").length-1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) {
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e,pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) {
		// IE support
		e.focus ();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character',pos);
		sel.moveEnd('character',0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = "";
	while(e && e.nodeName == "#text") {
		t += e.nodeValue;
		e = e.nextSibling;
	}
	return t;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e,ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE)
		return;
	var att = e.attributes;
	if(att) {
		var t;
		for(t=0; t<att.length; t++) {
			var n = att[t].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s,id,doc)
{
	jQuery.twStylesheet(s,{id:id,doc:doc});
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({id:id});
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store,node,tiddlers)
{
	var title = this.getTitle(store,node);
	if(safeMode && store.isShadowTiddler(title))
		return;
	if(title) {
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store,tiddler,title,node);
		tiddlers.push(tiddler);
	}
};

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var t,tiddlers = [];
	for(t = 0; t < nodes.length; t++) {
		try {
			this.loadTiddler(store,nodes[t],tiddlers);
		} catch(ex) {
			showException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var t,tiddlers = store.getTiddlers("title");
	for(t = 0; t < tiddlers.length; t++) {
		if(!tiddlers[t].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[t]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store,node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title");
		if(!title)
			title = node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var lenPrefix = store.idPrefix.length;
		if(node.id.substr(0,lenPrefix) == store.idPrefix)
			title = node.id.substr(lenPrefix);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName!="PRE" && e.nodeName!="pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg,"").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i,attrs = node.attributes;
	for(i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created,fields,creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store,tiddler)
{
	try {
		var extendedAttributes = "";
		var usePre = config.options.chkUsePreForStorage;
		store.forEachField(tiddler,
			function(tiddler,fieldName,value) {
				// don't store stuff from the temp namespace
				if(typeof value != "string")
					value = "";
				if(!fieldName.match(/^temp\./))
					extendedAttributes += ' %0="%1"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);
			},true);
		var created = tiddler.created;
		var modified = tiddler.modified;
		var attributes = tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "";
		attributes += tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "";
		attributes += (usePre && created == version.date) ? "" :' created="' + created.convertToYYYYMMDDHHMM() + '"';
		attributes += (usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() +'"';
		var tags = tiddler.getTags();
		if(!usePre || tags)
			attributes += ' tags="' + tags.htmlEncode() + '"';
		return ('<div %0="%1"%2%3>%4</'+'div>').format([
				usePre ? "title" : "tiddler",
				tiddler.title.htmlEncode(),
				attributes,
				extendedAttributes,
				usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
			]);
	} catch (ex) {
		throw exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};



//]]>
</script>

<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,unused3)
{
	story.displayTiddlers(srcElement,titles,template,animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,unused3)
{
	story.displayTiddler(srcElement,title,template,animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"' : '\\"',
		'\\': '\\\\'
		};
	var replaceFn = function(a,b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
		};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g,replaceFn) + '"';
	return '"' + this + '"';
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all it's children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e,className)
{
	jQuery(e).addClass(className);
}

function removeClass(e,className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e,className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}


//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);

//]]>
</script>
<script type="text/javascript">
//<![CDATA[
if(useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<font face="verdana">
<dd>
INTRODUKTO<br>
ENKONDUKO<br>
Vortaro Ido-Esperanto havas ĉirkaŭ 3 000 vortoj.<br>
Lexico Ido-Esperanto havas cirkum 3 000 vorti.<br>
Vorti qui esas sama en amba lingui aparas sen traduko.<br>
Vortoj kiuj estas samaj en ambaŭ lingvoj aperas sen traduko.<br>
Tamen vorti quale "aktoro", "avo" e "bovo" ne esas tote sama, nam en Ido li ne esas maskula o femina.<br>
Tamen vortoj kiel "aktoro", "avo" kaj "bovo" ne estas tute samaj, ĉar en Ido ili ne estas virseksaj aŭ inseksaj.<br>
Simbolo "~" indikas traduko ne-exakta<br>
Simbolo "~" indikas traduko ne-preciza.<br>
Certe ica listo ne esas perfekta, e bezonas plusa laboro, ma ni esperas ke on trovas ol esar utila.<br>
Certe chi tiu listo ne estas perfekta, kaj bezonas pli da laboro, sed ni esperas ke oni trovas ĝin utila.<br>
fonto:<a href="http://idolinguo.org.uk/idoesp.htm"target="_blank">http://idolinguo.org.uk/idoesp.htm</a><p>

Vortaro Esperanto - Ido havas ĉirkaŭ 6 000 vortoj.<br>
Lexiko Esperanto - Ido havas cirkum 6 000 vorti.<br>
fonto:<a href="https://esperanto-akademio.wikispaces.com/file/view/Vortaro-eo-ido-20150312.pdf"target="_blank">https://esperanto-akademio.wikispaces.com/file/view/Vortaro-eo-ido-20150312.pdf</a><p>
</font>

altra vortari:<br>
<a href="https://kyegupov.org/ido/dyer_dictionary_web/"target="_blank">English-Ido and Ido-English web dictionary</a><br>
<a href="http://kanaria1973.ido.li/vortari.html"target="_blank">Vortari di la linguo IDO</a><p>
<a href="/index.html">Chefpagino</a><br>

</body>
</html>
